diff --git a/.env b/.env
index 7f280e9..0d7cc5a 100644
--- a/.env
+++ b/.env
@@ -18,9 +18,6 @@ BLOB_READ_WRITE_TOKEN="vercel_blob_rw_0dG10aVH15DAsZWd_NvTqPADY3zK83uptFEkaUZCEY
 # SERVER-SIDE WRITE TOKEN (Used for creating drafts, etc.)
 SANITY_API_WRITE_TOKEN="skHSNGizuApQH6cHqPX9Mp12df1fHQOxubYPnpoAiPbwv2BwES2TUb2hJHmmXtJCmGkdVaqjS55DYct7AIQxQYBFIDT3dMEvrCCjOY2wjGVoS8MCeevuy8whHnPwVfD2dzi7JVAXqrAngC1s6WCHkH16iXPBFFOwOIW3YcnuSICQTVVk2gE6"
 
-# [SECURITY PATCH APPLIED] CLIENT-SIDE UPLOAD TOKEN (Limited to 'Editor' permissions)
-NEXT_PUBLIC_SANITY_API_WRITE_TOKEN="sk876MxzMkxP5wmXiMzaALwwUcE8RFZN43ZUe2tZC4JDdz1WZDamTGLwJTjdRzgzi6ANfA5J8hBCQ5rDwX3nGizak5W9teRAmGmUJUUHrKszFgKw5JiLWYJxUh8ou8yKqHxQd6rKetMzQvLPtMNv6MfnXY6llqyXoR9CtSM2jFSO3YXWbH5e"
-
 # SERVER-SIDE READ TOKEN (Used for fetching data in server components)
 SANITY_API_READ_TOKEN="skWyr0w9l0GX2Cm2Zpmu9lApLQFcMxxnJtH8cpIyiWYurpe7FbNQncMSwQxifl2CPjrZKD24UNX1ssTdAvKNQIKD4JXzVH1Ja3AWuepTEtTRwBeOL64AyCG0xcF1UEtW25HInglUx9r8uhJ2HUFxatMJytU4RTdsy84Np8gHsNxDDgJsAhE0"
 
diff --git a/app/actions/userActions.ts b/app/actions/userActions.ts
index 7b4b28a..36e4a9e 100644
--- a/app/actions/userActions.ts
+++ b/app/actions/userActions.ts
@@ -2,7 +2,7 @@
 'use server';
 
 import prisma from '@/lib/prisma';
-import { revalidatePath } from 'next/cache';
+import { revalidatePath, revalidateTag } from 'next/cache';
 import { put } from '@vercel/blob';
 import bcrypt from 'bcryptjs';
 import { getAuthenticatedSession } from '@/lib/auth';
@@ -60,7 +60,9 @@ export async function updateUserProfile(formData: FormData) {
                 countryPublic,
             },
         });
-
+        
+        revalidateTag('enriched-creators', '');
+        revalidateTag('enriched-creator-details', '');
         revalidatePath('/profile');
         revalidatePath(`/profile/${session.user.id}`);
         if (username) revalidatePath(`/creators/${username}`);
@@ -112,6 +114,8 @@ export async function completeOnboardingAction(formData: FormData) {
             },
         });
 
+        revalidateTag('enriched-creators', '');
+        revalidateTag('enriched-creator-details', '');
         revalidatePath('/profile');
         if (username) revalidatePath(`/profile/${username}`);
         
@@ -256,6 +260,4 @@ export async function getCommentedContentIds() {
     } catch (error) {
         return [];
     }
-}
-
-
+}
\ No newline at end of file
diff --git a/app/api/articles/route.ts b/app/api/articles/route.ts
deleted file mode 100644
index ed622d9..0000000
--- a/app/api/articles/route.ts
+++ /dev/null
@@ -1,58 +0,0 @@
-// app/api/articles/route.ts
-import { NextRequest, NextResponse } from 'next/server';
-import { client } from '@/lib/sanity.client';
-import { paginatedArticlesQuery } from '@/lib/sanity.queries';
-import { adaptToCardProps } from '@/lib/adapters';
-import { unstable_cache } from 'next/cache';
-
-export const dynamic = 'force-dynamic';
-export const revalidate = 300;
-
-const getCachedPaginatedArticles = unstable_cache(
-    async (
-        gameSlug: string | undefined, 
-        tagSlugs: string[] | undefined, 
-        searchTerm: string | undefined, 
-        offset: number, 
-        limit: number,
-        sort: 'latest' | 'viral'
-    ) => {
-        const query = paginatedArticlesQuery(gameSlug, tagSlugs, searchTerm, offset, limit, sort);
-        const sanityData = await client.fetch(query);
-        return sanityData.map(adaptToCardProps).filter(Boolean);
-    },
-    ['paginated-articles'],
-    { revalidate: 300, tags: ['articles', 'paginated'] }
-);
-
-export async function GET(req: NextRequest) {
-    try {
-        const { searchParams } = new URL(req.url);
-        
-        const offset = parseInt(searchParams.get('offset') || '0');
-        const limit = parseInt(searchParams.get('limit') || '20');
-        const gameSlug = searchParams.get('game') || undefined;
-        const searchTerm = searchParams.get('q') || undefined;
-        const tagSlugsString = searchParams.get('tags');
-        const tagSlugs = tagSlugsString ? tagSlugsString.split(',') : undefined;
-        const sort = (searchParams.get('sort') as 'latest' | 'viral') || 'latest';
-
-        const data = await getCachedPaginatedArticles(
-            gameSlug, 
-            tagSlugs, 
-            searchTerm, 
-            offset, 
-            limit,
-            sort
-        );
-
-        return NextResponse.json({
-            data,
-            nextOffset: data.length === limit ? offset + limit : null,
-        });
-
-    } catch (error) {
-        console.error('Error fetching paginated articles:', error);
-        return NextResponse.json({ error: 'Failed to fetch articles data' }, { status: 500 });
-    }
-}
\ No newline at end of file
diff --git a/app/api/news/route.ts b/app/api/news/route.ts
deleted file mode 100644
index e6fe437..0000000
--- a/app/api/news/route.ts
+++ /dev/null
@@ -1,60 +0,0 @@
-// app/api/news/route.ts
-import { NextRequest, NextResponse } from 'next/server';
-import { client } from '@/lib/sanity.client';
-import { paginatedNewsQuery } from '@/lib/sanity.queries';
-import { adaptToCardProps } from '@/lib/adapters';
-import { unstable_cache } from 'next/cache';
-
-export const dynamic = 'force-dynamic';
-export const revalidate = 300;
-
-const getCachedPaginatedNews = unstable_cache(
-    async (
-        gameSlug: string | undefined, 
-        tagSlugs: string[] | undefined, 
-        searchTerm: string | undefined, 
-        offset: number, 
-        limit: number,
-        sort: 'latest' | 'viral'
-    ) => {
-        const tags = tagSlugs?.length === 0 ? undefined : tagSlugs;
-        const query = paginatedNewsQuery(gameSlug, tags, searchTerm, offset, limit, sort);
-        const sanityData = await client.fetch(query);
-        const data = sanityData.map(adaptToCardProps).filter(Boolean);
-        return data;
-    },
-    ['paginated-news'],
-    { revalidate: 300, tags: ['news', 'paginated'] }
-);
-
-export async function GET(req: NextRequest) {
-    try {
-        const { searchParams } = new URL(req.url);
-        
-        const offset = parseInt(searchParams.get('offset') || '0');
-        const limit = parseInt(searchParams.get('limit') || '50');
-        const gameSlug = searchParams.get('game') || undefined;
-        const searchTerm = searchParams.get('q') || undefined;
-        const tagSlugsString = searchParams.get('tags');
-        const tagSlugs = tagSlugsString ? tagSlugsString.split(',') : undefined;
-        const sort = (searchParams.get('sort') as 'latest' | 'viral') || 'latest';
-        
-        const data = await getCachedPaginatedNews(
-            gameSlug, 
-            tagSlugs, 
-            searchTerm, 
-            offset, 
-            limit,
-            sort
-        );
-
-        return NextResponse.json({
-            data,
-            nextOffset: data.length === limit ? offset + limit : null,
-        });
-
-    } catch (error) {
-        console.error('Error fetching paginated news:', error);
-        return NextResponse.json({ error: 'Failed to fetch news data' }, { status: 500 });
-    }
-}
\ No newline at end of file
diff --git a/app/api/reviews/route.ts b/app/api/reviews/route.ts
deleted file mode 100644
index 4f94ec1..0000000
--- a/app/api/reviews/route.ts
+++ /dev/null
@@ -1,62 +0,0 @@
-// app/api/reviews/route.ts
-import { NextRequest, NextResponse } from 'next/server';
-import { client } from '@/lib/sanity.client';
-import { paginatedReviewsQuery } from '@/lib/sanity.queries';
-import { adaptToCardProps } from '@/lib/adapters';
-import { unstable_cache } from 'next/cache';
-import { ScoreFilter } from '@/components/filters/ReviewFilters';
-
-export const dynamic = 'force-dynamic';
-export const revalidate = 300;
-
-const getCachedPaginatedReviews = unstable_cache(
-    async (
-        gameSlug: string | undefined, 
-        tagSlugs: string[] | undefined, 
-        searchTerm: string | undefined, 
-        scoreRange: ScoreFilter | undefined,
-        offset: number, 
-        limit: number,
-        sort: 'latest' | 'score'
-    ) => {
-        const query = paginatedReviewsQuery(gameSlug, tagSlugs, searchTerm, scoreRange, offset, limit, sort);
-        const sanityData = await client.fetch(query);
-        return sanityData.map(adaptToCardProps).filter(Boolean);
-    },
-    ['paginated-reviews'],
-    { revalidate: 300, tags: ['reviews', 'paginated'] }
-);
-
-export async function GET(req: NextRequest) {
-    try {
-        const { searchParams } = new URL(req.url);
-        
-        const offset = parseInt(searchParams.get('offset') || '0');
-        const limit = parseInt(searchParams.get('limit') || '20');
-        const gameSlug = searchParams.get('game') || undefined;
-        const searchTerm = searchParams.get('q') || undefined;
-        const tagSlugsString = searchParams.get('tags');
-        const tagSlugs = tagSlugsString ? tagSlugsString.split(',') : undefined;
-        const sort = (searchParams.get('sort') as 'latest' | 'score') || 'latest';
-        const scoreRange = searchParams.get('score') as ScoreFilter || undefined;
-
-        const data = await getCachedPaginatedReviews(
-            gameSlug, 
-            tagSlugs, 
-            searchTerm, 
-            scoreRange,
-            offset, 
-            limit,
-            sort
-        );
-
-        return NextResponse.json({
-            data,
-            nextOffset: data.length === limit ? offset + limit : null,
-        });
-
-    } catch (error) {
-        console.error('Error fetching paginated reviews:', error);
-        return NextResponse.json({ error: 'Failed to fetch reviews data' }, { status: 500 });
-    }
-}
\ No newline at end of file
diff --git a/app/articles/ArticlesPageClient.tsx b/app/articles/ArticlesPageClient.tsx
index 2af081c..5df2a31 100644
--- a/app/articles/ArticlesPageClient.tsx
+++ b/app/articles/ArticlesPageClient.tsx
@@ -1,25 +1,19 @@
 // app/articles/ArticlesPageClient.tsx
 'use client';
 
-import React, { useState, useMemo, useCallback, useEffect, useRef } from 'react';
-import { motion, AnimatePresence, useInView } from 'framer-motion';
+import React, { useState, useMemo, useEffect } from 'react';
+import { motion, AnimatePresence } from 'framer-motion';
 import type { SanityArticle, SanityGame, SanityTag } from '@/types/sanity';
 import HorizontalShowcase from '@/components/HorizontalShowcase';
 import ArticleFilters from '@/components/filters/ArticleFilters';
-import ArticleGrid from '@/components/ArticleGrid';
-import { ContentBlock } from '@/components/ContentBlock';
+import ArticleCard from '@/components/ArticleCard';
 import Image from 'next/image';
-import Link from 'next/link';
 import AnimatedGridBackground from '@/components/AnimatedGridBackground';
 import { adaptToCardProps } from '@/lib/adapters';
 import { CardProps } from '@/types';
 import styles from '@/components/HorizontalShowcase.module.css';
-
-const fetchArticles = async (params: URLSearchParams) => {
-    const res = await fetch(`/api/articles?${params.toString()}`);
-    if (!res.ok) throw new Error('Failed to fetch articles');
-    return res.json();
-};
+import { useRouter, usePathname, useSearchParams } from 'next/navigation';
+import { useLayoutIdStore } from '@/lib/layoutIdStore';
 
 const ArrowIcon = ({ direction = 'right' }: { direction?: 'left' | 'right' }) => (
     <svg width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round">
@@ -27,8 +21,10 @@ const ArrowIcon = ({ direction = 'right' }: { direction?: 'left' | 'right' }) =>
     </svg>
 );
   
-const MobileShowcase = ({ articles, onActiveIndexChange }: { articles: any[], onActiveIndexChange: (index: number) => void }) => {
+const MobileShowcase = ({ articles, onActiveIndexChange }: { articles: CardProps[], onActiveIndexChange: (index: number) => void }) => {
     const [[page, direction], setPage] = useState([0, 0]);
+    const router = useRouter();
+    const setPrefix = useLayoutIdStore((state) => state.setPrefix);
     
     const paginate = (newDirection: number) => {
         const newIndex = (page + newDirection + articles.length) % articles.length;
@@ -37,6 +33,12 @@ const MobileShowcase = ({ articles, onActiveIndexChange }: { articles: any[], on
     };
 
     const activeArticle = articles[page];
+    const layoutIdPrefix = "articles-showcase";
+    const handleClick = (e: React.MouseEvent) => {
+        e.preventDefault();
+        setPrefix(layoutIdPrefix);
+        router.push(`/articles/${activeArticle.slug}`, { scroll: false });
+    };
     
     const variants = {
         enter: (direction: number) => ({ opacity: 0, x: direction > 0 ? 100 : -100 }),
@@ -48,10 +50,14 @@ const MobileShowcase = ({ articles, onActiveIndexChange }: { articles: any[], on
         <div className={styles.mobileShowcaseContainer}>
              <AnimatePresence initial={false} custom={direction} mode="wait">
                 <motion.div key={page} custom={direction} variants={variants} initial="enter" animate="center" exit="exit" className={styles.mobileShowcaseCardWrapper} transition={{ duration: 0.4, ease: 'easeInOut' }}>
-                    <Link href={`/articles/${activeArticle.slug}`} className={`no-underline ${styles.showcaseCardLink}`}>
-                        <div className={styles.showcaseCardImageWrapper}><Image src={activeArticle.imageUrl} alt={activeArticle.title} fill sizes="80vw" style={{ objectFit: 'cover' }} className={styles.showcaseCardImage}/></div>
-                        <div className={styles.showcaseCardContent}><h3 className={styles.showcaseCardTitle}>{activeArticle.title}</h3><p className={styles.showcaseCardGame}>{activeArticle.game}</p></div>
-                    </Link>
+                    <motion.div
+                        layoutId={`${layoutIdPrefix}-card-container-${activeArticle.legacyId}`}
+                        onClick={handleClick}
+                        className={`no-underline ${styles.showcaseCardLink}`}
+                    >
+                        <motion.div layoutId={`${layoutIdPrefix}-card-image-${activeArticle.legacyId}`} className={styles.showcaseCardImageWrapper}><Image src={activeArticle.imageUrl} alt={activeArticle.title} fill sizes="80vw" style={{ objectFit: 'cover' }} className={styles.showcaseCardImage}/></motion.div>
+                        <div className={styles.showcaseCardContent}><motion.h3 layoutId={`${layoutIdPrefix}-card-title-${activeArticle.legacyId}`} className={styles.showcaseCardTitle}>{activeArticle.title}</motion.h3><p className={styles.showcaseCardGame}>{activeArticle.game}</p></div>
+                    </motion.div>
                 </motion.div>
             </AnimatePresence>
             <button className={`${styles.showcaseArrow} ${styles.left}`} onClick={() => paginate(-1)}><ArrowIcon direction="left" /></button>
@@ -66,86 +72,53 @@ export default function ArticlesPageClient({ featuredArticles, initialGridArticl
 }) {
     const [activeIndex, setActiveIndex] = useState(0);
     const [isMobile, setIsMobile] = useState(false);
-    const intersectionRef = useRef(null);
-    const isIntersecting = useInView(intersectionRef);
-
-    const initialCards = useMemo(() => initialGridArticles.map(adaptToCardProps).filter(Boolean) as CardProps[], [initialGridArticles]);
-    const [gridArticles, setGridArticles] = useState<CardProps[]>(initialCards);
-    const [isLoading, setIsLoading] = useState(false);
-    const [nextOffset, setNextOffset] = useState<number | null>(initialCards.length === 20 ? 20 : null);
-    const [isFeedExhausted, setIsFeedExhausted] = useState(initialCards.length < 20);
-
-    useEffect(() => { const checkMobile = () => setIsMobile(window.innerWidth <= 768); checkMobile(); window.addEventListener('resize', checkMobile); return () => window.removeEventListener('resize', checkMobile); }, []);
-
-    // Replaced useUrlState with standard useState
-    const [searchTerm, setSearchTerm] = useState('');
-    const [sortOrder, setSortOrder] = useState<'latest' | 'viral'>('latest');
-    const [selectedGame, setSelectedGame] = useState<SanityGame | null>(null);
-    const [selectedGameTags, setSelectedGameTags] = useState<SanityTag[]>([]);
-    const [selectedArticleType, setSelectedArticleType] = useState<SanityTag | null>(null);
     
-    const currentFilters = useMemo(() => ({ searchTerm, sortOrder, selectedGame, selectedGameTags, selectedArticleType }), [searchTerm, sortOrder, selectedGame, selectedGameTags, selectedArticleType]);
-    const hasActiveFilters = searchTerm || sortOrder !== 'latest' || !!selectedGame || selectedGameTags.length > 0 || !!selectedArticleType;
+    const gridArticles = useMemo(() => initialGridArticles.map(adaptToCardProps).filter(Boolean) as CardProps[], [initialGridArticles]);
 
-    useEffect(() => {
-        const allSelectedTags = [...selectedGameTags, ...(selectedArticleType ? [selectedArticleType] : [])];
-        const filtersAreDefault = !hasActiveFilters;
-
-        if (filtersAreDefault) {
-            setGridArticles(initialCards);
-            setNextOffset(initialCards.length === 20 ? 20 : null);
-            setIsFeedExhausted(initialCards.length < 20);
-            return;
-        }
-
-        const fetchAndReplace = async () => {
-            setIsLoading(true);
-            setIsFeedExhausted(false);
-            const params = new URLSearchParams({ offset: '0', limit: '20' });
-            if (searchTerm) params.set('q', searchTerm);
-            if (sortOrder !== 'latest') params.set('sort', sortOrder);
-            if (selectedGame) params.set('game', selectedGame.slug);
-            if (allSelectedTags.length > 0) params.set('tags', allSelectedTags.map(t => t.slug).join(','));
-
-            try {
-                const result = await fetchArticles(params);
-                setGridArticles(result.data);
-                setNextOffset(result.nextOffset);
-                if (!result.nextOffset) setIsFeedExhausted(true);
-            } catch (error) { console.error("Filter change fetch failed:", error); } 
-            finally { setIsLoading(false); }
-        };
-
-        fetchAndReplace();
-    }, [currentFilters, hasActiveFilters, initialCards]);
+    const router = useRouter();
+    const pathname = usePathname();
+    const searchParams = useSearchParams();
+    
+    useEffect(() => { const checkMobile = () => setIsMobile(window.innerWidth <= 768); checkMobile(); window.addEventListener('resize', checkMobile); return () => window.removeEventListener('resize', checkMobile); }, []);
 
+    // Initialize filter state from URL
+    const [searchTerm, setSearchTerm] = useState(searchParams.get('q') || '');
+    const [sortOrder, setSortOrder] = useState<'latest' | 'viral'>((searchParams.get('sort') as any) || 'latest');
+    const [selectedGame, setSelectedGame] = useState<SanityGame | null>(() => {
+        const gameSlug = searchParams.get('game');
+        return gameSlug ? allGames.find(g => g.slug === gameSlug) || null : null;
+    });
+    const [selectedGameTags, setSelectedGameTags] = useState<SanityTag[]>(() => {
+        const tagSlugs = searchParams.get('tags')?.split(',') || [];
+        return allGameTags.filter(t => tagSlugs.includes(t.slug));
+    });
+    const [selectedArticleType, setSelectedArticleType] = useState<SanityTag | null>(() => {
+        // This assumes article type tags are also passed via 'tags' param
+        const tagSlugs = searchParams.get('tags')?.split(',') || [];
+        return allArticleTypeTags.find(t => tagSlugs.includes(t.slug)) || null;
+    });
+
+    // Update URL when filters change
     useEffect(() => {
-        if (isIntersecting && nextOffset !== null && !isLoading) {
-            const loadMore = async () => {
-                setIsLoading(true);
-                const allSelectedTags = [...selectedGameTags, ...(selectedArticleType ? [selectedArticleType] : [])];
-                const params = new URLSearchParams({ offset: String(nextOffset), limit: '20' });
-                if (searchTerm) params.set('q', searchTerm);
-                if (sortOrder !== 'latest') params.set('sort', sortOrder);
-                if (selectedGame) params.set('game', selectedGame.slug);
-                if (allSelectedTags.length > 0) params.set('tags', allSelectedTags.map(t => t.slug).join(','));
+        const params = new URLSearchParams(searchParams);
+        if (searchTerm) params.set('q', searchTerm); else params.delete('q');
+        if (sortOrder !== 'latest') params.set('sort', sortOrder); else params.delete('sort');
+        if (selectedGame) params.set('game', selectedGame.slug); else params.delete('game');
 
-                try {
-                    const result = await fetchArticles(params);
-                    setGridArticles(prev => [...prev, ...result.data]);
-                    setNextOffset(result.nextOffset);
-                    if (!result.nextOffset) setIsFeedExhausted(true);
-                } catch (error) { console.error("Failed to load more articles:", error); } 
-                finally { setIsLoading(false); }
-            };
-            loadMore();
+        const allSelectedTags = [...selectedGameTags, ...(selectedArticleType ? [selectedArticleType] : [])];
+        if (allSelectedTags.length > 0) {
+            params.set('tags', allSelectedTags.map(t => t.slug).join(','));
+        } else {
+            params.delete('tags');
         }
-    }, [isIntersecting, nextOffset, isLoading, currentFilters]);
+        
+        router.push(`${pathname}?${params.toString()}`, { scroll: false });
+    }, [searchTerm, sortOrder, selectedGame, selectedGameTags, selectedArticleType, router, pathname, searchParams]);
 
     const handleGameTagToggle = (tag: SanityTag) => { setSelectedGameTags(prev => prev.some(t => t._id === tag._id) ? prev.filter(t => t._id !== tag._id) : [...prev, tag]); };
     const handleClearAllFilters = () => { setSelectedGame(null); setSelectedGameTags([]); setSelectedArticleType(null); setSearchTerm(''); setSortOrder('latest'); };
     
-    const featuredForShowcase = useMemo(() => featuredArticles.map(adaptToCardProps).filter(Boolean), [featuredArticles]);
+    const featuredForShowcase = useMemo(() => featuredArticles.map(adaptToCardProps).filter(Boolean) as CardProps[], [featuredArticles]);
     const activeBackgroundUrl = featuredForShowcase[activeIndex]?.imageUrl;
 
     return (
@@ -157,26 +130,18 @@ export default function ArticlesPageClient({ featuredArticles, initialGridArticl
                     <h1 className="page-title" style={{ color: '#fff', textShadow: '0 3px 15px rgba(0,0,0,0.5)', fontSize: '5rem', marginTop: '0.7rem', marginBottom: '4rem' }}>ديوان الفن</h1>
                     <div className={styles.showcaseSection}>{isMobile ? (<MobileShowcase articles={featuredForShowcase} onActiveIndexChange={setActiveIndex} />) : (<HorizontalShowcase articles={featuredForShowcase} onActiveIndexChange={setActiveIndex} />)}</div>
                     <div className={styles.gridSection}> 
-                        <ContentBlock title="جميع المقالات">
+                        <div style={{marginBottom: '6rem'}}>
+                            <h2 className="section-title" style={{textAlign: 'right', marginBottom: '3rem', fontSize: 'clamp(2.8rem, 4vw, 3.6rem)'}}>جميع المقالات</h2>
                             <ArticleFilters sortOrder={sortOrder} onSortChange={setSortOrder} searchTerm={searchTerm} onSearchChange={setSearchTerm} allGames={allGames} selectedGame={selectedGame} onGameSelect={setSelectedGame} allGameTags={allGameTags} selectedGameTags={selectedGameTags} onGameTagToggle={handleGameTagToggle} allArticleTypeTags={allArticleTypeTags} selectedArticleType={selectedArticleType} onArticleTypeSelect={setSelectedArticleType} onClearAllFilters={handleClearAllFilters} />
-                            <ArticleGrid articles={gridArticles} />
-                            <AnimatePresence>
-                                {(isLoading && nextOffset !== null) && (
-                                    <motion.div key="loading" style={{display: 'flex', justifyContent: 'center', padding: '4rem'}} initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}>
-                                        <div className="spinner" />
-                                    </motion.div>
-                                )}
-                            </AnimatePresence>
-                            <div ref={intersectionRef} style={{ height: '1px', margin: '1rem 0' }} />
-                            <AnimatePresence>
-                                {(isFeedExhausted && gridArticles.length > 0 && !isLoading) && (
-                                     <motion.p key="end" style={{textAlign: 'center', padding: '3rem 0', color: 'var(--text-secondary)'}} initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}>وصلت إلى نهاية الأرشيف.</motion.p>
-                                )}
-                            </AnimatePresence>
-                            {(!isLoading && gridArticles.length === 0 && hasActiveFilters) && (
-                                <motion.p key="no-match" style={{textAlign: 'center', color: 'var(--text-secondary)', padding: '4rem 0'}} initial={{ opacity: 0 }} animate={{ opacity: 1 }}>لم نعثر على مقالات تطابق مرادك.</motion.p>
-                            )}
-                        </ContentBlock>
+                            
+                            <motion.div layout className="content-grid">
+                                <AnimatePresence>
+                                    {gridArticles.map((article, index) => ( <ArticleCard key={article.id} article={article} layoutIdPrefix="articles-grid" isPriority={index < 3} /> ))}
+                                </AnimatePresence>
+                            </motion.div>
+
+                            {gridArticles.length === 0 && ( <motion.p key="no-match" style={{textAlign: 'center', color: 'var(--text-secondary)', padding: '4rem 0'}} initial={{ opacity: 0 }} animate={{ opacity: 1 }}> لم نعثر على مقالات تطابق مرادك. </motion.p> )}
+                        </div>
                     </div>
                 </div>
             </div>
diff --git a/app/articles/page.tsx b/app/articles/page.tsx
index 8c85715..6344d37 100644
--- a/app/articles/page.tsx
+++ b/app/articles/page.tsx
@@ -1,10 +1,11 @@
 // app/articles/page.tsx
 import { client } from '@/lib/sanity.client';
-import { featuredShowcaseArticlesQuery, allArticlesListQuery } from '@/lib/sanity.queries';
+import { featuredShowcaseArticlesQuery, paginatedArticlesQuery } from '@/lib/sanity.queries';
 import { groq } from 'next-sanity';
 import type { SanityArticle, SanityGame, SanityTag } from '@/types/sanity';
 import ArticlesPageClient from './ArticlesPageClient';
 import { Suspense } from 'react';
+import GridPageSkeleton from '@/components/skeletons/GridPageSkeleton';
 
 export const revalidate = 60;
 
@@ -12,15 +13,26 @@ const allGamesQuery = groq`*[_type == "game"] | order(title asc) {_id, title, "s
 const allGameTagsQuery = groq`*[_type == "tag" && category == "Game"] | order(title asc) {_id, title, "slug": slug.current}`;
 const allArticleTypeTagsQuery = groq`*[_type == "tag" && category == "Article"] | order(title asc) {_id, title, "slug": slug.current}`;
 
-export default async function ArticlesPage() {
-  const [featuredArticles, initialGridArticles, allGames, allGameTags, allArticleTypeTags]: [SanityArticle[], SanityArticle[], SanityGame[], SanityTag[], SanityTag[]] = await Promise.all([
+export default async function ArticlesPage({ searchParams }: {
+  searchParams: { [key: string]: string | string[] | undefined }
+}) {
+  const [featuredArticles, allGames, allGameTags, allArticleTypeTags]: [SanityArticle[], SanityGame[], SanityTag[], SanityTag[]] = await Promise.all([
     client.fetch(featuredShowcaseArticlesQuery),
-    client.fetch(allArticlesListQuery),
     client.fetch(allGamesQuery),
     client.fetch(allGameTagsQuery),
     client.fetch(allArticleTypeTagsQuery),
   ]);
 
+  const offset = 0;
+  const limit = 20;
+  const sort = (searchParams['sort'] as 'latest' | 'viral') || 'latest';
+  const gameSlug = (searchParams['game'] as string) || undefined;
+  const tagSlugs = searchParams['tags'] ? String(searchParams['tags']).split(',') : undefined;
+  const searchTerm = (searchParams['q'] as string) || undefined;
+  
+  const query = paginatedArticlesQuery(gameSlug, tagSlugs, searchTerm, offset, limit, sort);
+  const initialGridArticles: SanityArticle[] = await client.fetch(query);
+
   if (!featuredArticles || featuredArticles.length === 0) {
     return (
         <div className="container page-container">
@@ -30,14 +42,8 @@ export default async function ArticlesPage() {
     );
   }
 
-  const ArticlesPageFallback = () => (
-    <div className="container page-container" style={{display: 'flex', alignItems:'center', justifyContent: 'center'}}>
-      <div className="spinner" />
-    </div>
-  );
-
   return (
-    <Suspense fallback={<ArticlesPageFallback />}>
+    <Suspense fallback={<GridPageSkeleton />}>
       <ArticlesPageClient
         featuredArticles={featuredArticles}
         initialGridArticles={initialGridArticles}
diff --git a/app/games/[slug]/page.tsx b/app/games/[slug]/page.tsx
index e9b3b01..0ae9404 100644
--- a/app/games/[slug]/page.tsx
+++ b/app/games/[slug]/page.tsx
@@ -17,8 +17,19 @@ export default async function GameHubPage({ params }: { params: { slug: string }
         notFound();
     }
 
-    // MODIFIED: Using lean query for initial content load
     const allItems = await client.fetch(allContentByGameListQuery, { slug: gameSlug });
+    
+    // THE DEFINITIVE FIX: The check is now correctly placed *before* the HubPageClient is rendered.
+    if (!allItems || allItems.length === 0) {
+        return (
+             <div className="container page-container">
+                <h1 className="page-title">محور لعبة: &quot;{gameMeta.title}&quot;</h1>
+                <p style={{textAlign: 'center', color: 'var(--text-secondary)', fontSize: '1.8rem', maxWidth: '600px', margin: '0 auto'}}>
+                    لم يُنشر أي محتوى حول هذه اللعبة بعد. الأرشيف يترقب المستجدات.
+                </p>
+            </div>
+        );
+    }
 
     return (
         <HubPageClient
@@ -27,6 +38,4 @@ export default async function GameHubPage({ params }: { params: { slug: string }
             hubType="اللعبة"
         />
     );
-}
-
-
+}
\ No newline at end of file
diff --git a/app/globals.css b/app/globals.css
index 51804b4..d75190a 100644
--- a/app/globals.css
+++ b/app/globals.css
@@ -19,6 +19,10 @@
 --border-color:#2a2e3c;
 }
 *,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
+html, body {
+  width: 100%;
+  overflow-x: hidden;
+}
 html{
 font-size:62.5%;
 scroll-behavior:smooth;
@@ -35,7 +39,6 @@ color:var(--text-primary);
 font-family:var(--font-main), sans-serif;
 font-size:1.8rem;
 line-height:1.7;
-overflow-x:hidden;
 transition:background-color 0.3s ease,color 0.3s ease;
 }
 h1,h2,h3,h4,h5,h6{
diff --git a/app/layout.tsx b/app/layout.tsx
index 913a0df..f449710 100644
--- a/app/layout.tsx
+++ b/app/layout.tsx
@@ -40,7 +40,7 @@ return (
 <NextAuthProvider>
 <UserStoreHydration />
 <ThemeProvider attribute="data-theme" defaultTheme="system" enableSystem disableTransitionOnChange>
-<div style={{ maxWidth: '100vw', overflowX: 'hidden' }}>
+<div style={{ position: 'relative', width: '100%', overflowX: 'clip' }}>
     <ToastProvider />
     <Lightbox /> 
     <Navbar />
@@ -54,6 +54,4 @@ return (
 </body>
 </html>
 );
-}
-
-
+}
\ No newline at end of file
diff --git a/app/news/NewsPageClient.tsx b/app/news/NewsPageClient.tsx
index f65512d..af17a80 100644
--- a/app/news/NewsPageClient.tsx
+++ b/app/news/NewsPageClient.tsx
@@ -1,22 +1,16 @@
 // app/news/NewsPageClient.tsx
 'use client';
 
-import { useState, useMemo, useRef, useEffect } from 'react';
+import { useState, useMemo, useEffect } from 'react';
 import type { SanityNews, SanityGame, SanityTag } from '@/types/sanity';
-import { motion, AnimatePresence, useInView } from 'framer-motion';
+import { motion, AnimatePresence } from 'framer-motion';
 import NewsHero from '@/components/news/NewsHero';
 import NewsFilters from '@/components/filters/NewsFilters';
 import NewsGrid from '@/components/news/NewsGrid';
 import { ContentBlock } from '@/components/ContentBlock';
 import { adaptToCardProps } from '@/lib/adapters';
 import { CardProps } from '@/types';
-import styles from './NewsPage.module.css';
-
-const fetchNews = async (params: URLSearchParams) => {
-    const res = await fetch(`/api/news?${params.toString()}`);
-    if (!res.ok) throw new Error('Failed to fetch news');
-    return res.json();
-};
+import { useRouter, usePathname, useSearchParams } from 'next/navigation';
 
 export default function NewsPageClient({ heroArticles, initialGridArticles, allGames, allTags }: {
   heroArticles: SanityNews[];
@@ -24,82 +18,35 @@ export default function NewsPageClient({ heroArticles, initialGridArticles, allG
   allGames: SanityGame[];
   allTags: SanityTag[];
 }) {
-    const intersectionRef = useRef(null);
-    const isIntersecting = useInView(intersectionRef);
+    const router = useRouter();
+    const pathname = usePathname();
+    const searchParams = useSearchParams();
 
     const adaptedHeroArticles = useMemo(() => heroArticles.map(adaptToCardProps).filter(Boolean) as CardProps[], [heroArticles]);
-    const initialCards = useMemo(() => initialGridArticles.map(adaptToCardProps).filter(Boolean) as CardProps[], [initialGridArticles]);
-
-    const [newsItems, setNewsItems] = useState<CardProps[]>(initialCards);
-    const [isLoading, setIsLoading] = useState(false);
-    const [nextOffset, setNextOffset] = useState<number | null>(initialCards.length === 50 ? 50 : null);
-    const [isFeedExhausted, setIsFeedExhausted] = useState(initialCards.length < 50);
-
-    const [searchTerm, setSearchTerm] = useState('');
-    const [activeSort, setActiveSort] = useState<'latest' | 'viral'>('latest');
-    const [selectedGame, setSelectedGame] = useState<SanityGame | null>(null);
-    const [selectedTags, setSelectedTags] = useState<SanityTag[]>([]);
+    const newsItems = useMemo(() => initialGridArticles.map(adaptToCardProps).filter(Boolean) as CardProps[], [initialGridArticles]);
 
-    const currentFilters = useMemo(() => ({ searchTerm, activeSort, selectedGame, selectedTags }), [searchTerm, activeSort, selectedGame, selectedTags]);
-    const hasActiveFilters = !!searchTerm || !!selectedGame || selectedTags.length > 0 || activeSort !== 'latest';
+    // Initialize filter state from URL
+    const [searchTerm, setSearchTerm] = useState(searchParams.get('q') || '');
+    const [activeSort, setActiveSort] = useState<'latest' | 'viral'>((searchParams.get('sort') as any) || 'latest');
+    const [selectedGame, setSelectedGame] = useState<SanityGame | null>(() => {
+        const gameSlug = searchParams.get('game');
+        return gameSlug ? allGames.find(g => g.slug === gameSlug) || null : null;
+    });
+    const [selectedTags, setSelectedTags] = useState<SanityTag[]>(() => {
+        const tagSlugs = searchParams.get('tags')?.split(',') || [];
+        return allTags.filter(t => tagSlugs.includes(t.slug));
+    });
 
+    // Update URL when filters change
     useEffect(() => {
-        const filtersAreDefault = !hasActiveFilters;
-        if (filtersAreDefault) {
-            setNewsItems(initialCards);
-            setNextOffset(initialCards.length === 50 ? 50 : null);
-            setIsFeedExhausted(initialCards.length < 50);
-            return;
-        }
-
-        const fetchAndReplace = async () => {
-            setIsLoading(true);
-            setIsFeedExhausted(false);
-            const params = new URLSearchParams({ offset: '0', limit: '50' });
-            if (searchTerm) params.set('q', searchTerm);
-            if (activeSort !== 'latest') params.set('sort', activeSort);
-            if (selectedGame) params.set('game', selectedGame.slug);
-            if (selectedTags.length > 0) params.set('tags', selectedTags.map(t => t.slug).join(','));
-
-            try {
-                const result = await fetchNews(params);
-                setNewsItems(result.data);
-                setNextOffset(result.nextOffset);
-                if (!result.nextOffset) setIsFeedExhausted(true);
-            } catch (error) {
-                console.error("Filter change fetch failed:", error);
-            } finally {
-                setIsLoading(false);
-            }
-        };
+        const params = new URLSearchParams(searchParams);
+        if (searchTerm) params.set('q', searchTerm); else params.delete('q');
+        if (activeSort !== 'latest') params.set('sort', activeSort); else params.delete('sort');
+        if (selectedGame) params.set('game', selectedGame.slug); else params.delete('game');
+        if (selectedTags.length > 0) params.set('tags', selectedTags.map(t => t.slug).join(',')); else params.delete('tags');
 
-        fetchAndReplace();
-    }, [currentFilters, initialCards, hasActiveFilters]);
-
-    useEffect(() => {
-        if (isIntersecting && nextOffset !== null && !isLoading) {
-            const loadMore = async () => {
-                setIsLoading(true);
-                const params = new URLSearchParams({ offset: String(nextOffset), limit: '50' });
-                if (searchTerm) params.set('q', searchTerm);
-                if (activeSort !== 'latest') params.set('sort', activeSort);
-                if (selectedGame) params.set('game', selectedGame.slug);
-                if (selectedTags.length > 0) params.set('tags', selectedTags.map(t => t.slug).join(','));
-
-                try {
-                    const result = await fetchNews(params);
-                    setNewsItems(prev => [...prev, ...result.data]);
-                    setNextOffset(result.nextOffset);
-                    if (!result.nextOffset) setIsFeedExhausted(true);
-                } catch (error) {
-                    console.error("Failed to load more news:", error);
-                } finally {
-                    setIsLoading(false);
-                }
-            };
-            loadMore();
-        }
-    }, [isIntersecting, nextOffset, isLoading, currentFilters]);
+        router.push(`${pathname}?${params.toString()}`, { scroll: false });
+    }, [searchTerm, activeSort, selectedGame, selectedTags, router, pathname, searchParams]);
 
     const handleTagToggle = (tag: SanityTag) => {
         setSelectedTags(prev => prev.some(t => t._id === tag._id) ? prev.filter(t => t._id !== tag._id) : [...prev, tag]);
@@ -129,23 +76,9 @@ export default function NewsPageClient({ heroArticles, initialGridArticles, allG
                         onTagToggle={handleTagToggle}
                         onClearAll={handleClearAll}
                     />
-                    <NewsGrid news={newsItems} isLoading={isLoading} />
-                    <AnimatePresence>
-                        {(isLoading && nextOffset !== null) && (
-                            <motion.div key="loading" style={{display: 'flex', justifyContent: 'center', padding: '4rem'}} initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}>
-                                <div className="spinner" />
-                            </motion.div>
-                        )}
-                    </AnimatePresence>
-                    <div ref={intersectionRef} style={{ height: '1px', margin: '1rem 0' }} />
-                    <AnimatePresence>
-                        {(isFeedExhausted && newsItems.length > 0 && !isLoading) && (
-                            <motion.p key="end" style={{textAlign: 'center', padding: '3rem 0', color: 'var(--text-secondary)'}} initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}>
-                                وصلت إلى نهاية الأرشيف.
-                            </motion.p>
-                        )}
-                    </AnimatePresence>
-                    {(!isLoading && newsItems.length === 0 && hasActiveFilters) && (
+                    <NewsGrid news={newsItems} />
+
+                    {newsItems.length === 0 && (
                         <motion.p key="no-match" style={{textAlign: 'center', padding: '4rem 0', color: 'var(--text-secondary)'}} initial={{ opacity: 0 }} animate={{ opacity: 1 }}>
                             لا توجد أخبار تطابق ما اخترت.
                         </motion.p>
diff --git a/app/news/page.tsx b/app/news/page.tsx
index 1bae69f..2a00f72 100644
--- a/app/news/page.tsx
+++ b/app/news/page.tsx
@@ -1,24 +1,36 @@
 // app/news/page.tsx
 import { client } from '@/lib/sanity.client';
-import { newsHeroQuery, newsGridInitialQuery } from '@/lib/sanity.queries';
+import { newsHeroQuery, paginatedNewsQuery } from '@/lib/sanity.queries';
 import { groq } from 'next-sanity';
 import type { SanityNews, SanityGame, SanityTag } from '@/types/sanity';
 import NewsPageClient from './NewsPageClient';
 import { Suspense } from 'react';
+import GridPageSkeleton from '@/components/skeletons/GridPageSkeleton';
 
 export const revalidate = 60;
 
 const allGamesQuery = groq`*[_type == "game"] | order(title asc) {_id, title, "slug": slug.current}`;
 const allNewsTagsQuery = groq`*[_type == "tag" && category == "News"] | order(title asc) {_id, title, "slug": slug.current}`;
 
-export default async function NewsPage() {
-  const [heroNewsRaw, initialGridNewsRaw, allGames, allTags]: [SanityNews[], SanityNews[], SanityGame[], SanityTag[]] = await Promise.all([
+export default async function NewsPage({ searchParams }: {
+  searchParams: { [key: string]: string | string[] | undefined }
+}) {
+  const [heroNewsRaw, allGames, allTags]: [SanityNews[], SanityGame[], SanityTag[]] = await Promise.all([
     client.fetch(newsHeroQuery),
-    client.fetch(newsGridInitialQuery),
     client.fetch(allGamesQuery),
     client.fetch(allNewsTagsQuery),
   ]);
 
+  const offset = 0;
+  const limit = 50;
+  const sort = (searchParams['sort'] as 'latest' | 'viral') || 'latest';
+  const gameSlug = (searchParams['game'] as string) || undefined;
+  const tagSlugs = searchParams['tags'] ? String(searchParams['tags']).split(',') : undefined;
+  const searchTerm = (searchParams['q'] as string) || undefined;
+
+  const query = paginatedNewsQuery(gameSlug, tagSlugs, searchTerm, offset, limit, sort);
+  const initialGridNewsRaw: SanityNews[] = await client.fetch(query);
+
   if (!heroNewsRaw || heroNewsRaw.length === 0) {
     return (
         <div className="container page-container">
@@ -28,14 +40,8 @@ export default async function NewsPage() {
     );
   }
 
-  const NewsPageFallback = () => (
-    <div className="container page-container" style={{display: 'flex', alignItems:'center', justifyContent: 'center', minHeight: '80vh'}}>
-      <div className="spinner" />
-    </div>
-  );
-
   return (
-    <Suspense fallback={<NewsPageFallback />}>
+    <Suspense fallback={<div className="page-container"><GridPageSkeleton count={8}/></div>}>
       <NewsPageClient
         heroArticles={heroNewsRaw || []}
         initialGridArticles={initialGridNewsRaw || []}
diff --git a/app/page.tsx b/app/page.tsx
index f3c6e05..e58e028 100644
--- a/app/page.tsx
+++ b/app/page.tsx
@@ -29,7 +29,7 @@ const getCachedEnrichedCreators = unstable_cache(
         }
     },
     ['enriched-creators'],
-    { revalidate: 3600 }
+    { revalidate: 3600, tags: ['enriched-creators'] }
 );
 
 async function enrichCreators(creators: SanityAuthor[] | undefined): Promise<SanityAuthor[]> {
@@ -76,7 +76,7 @@ const getCachedEngagementScoresMap = unstable_cache(
         }
     },
     ['homepage-engagement-scores'],
-    { revalidate: 60 }
+    { revalidate: 60, tags: ['engagement-scores'] }
 );
 
 
diff --git a/app/profile/ProfilePage.module.css b/app/profile/ProfilePage.module.css
index c7c73c0..8930875 100644
--- a/app/profile/ProfilePage.module.css
+++ b/app/profile/ProfilePage.module.css
@@ -29,4 +29,8 @@
 @keyframes glint{0%,100%{transform:scale(1)}50%{transform:scale(1.2) rotate(10deg);filter:brightness(1.5)}}
 .badgeItem:hover .badgeIconFOUNDER{animation:glint .7s ease-in-out}
 
-
+@media (max-width: 768px) {
+  .profileSidebar {
+    padding-top: 8rem; /* Nudge the content down on mobile to avoid navbar overlap */
+  }
+}
\ No newline at end of file
diff --git a/app/profile/[username]/page.tsx b/app/profile/[username]/page.tsx
index fac0e16..3669943 100644
--- a/app/profile/[username]/page.tsx
+++ b/app/profile/[username]/page.tsx
@@ -6,17 +6,13 @@ import Image from 'next/image';
 import { getBadgesForUser } from '@/lib/badges';
 import Link from 'next/link';
 import styles from '../ProfilePage.module.css';
+import { client } from '@/lib/sanity.client';
+import { groq } from 'next-sanity';
 
 function hasCreatorRole(userRoles: string[]): boolean {
     return userRoles.some(role => ['REVIEWER', 'AUTHOR', 'REPORTER', 'DESIGNER'].includes(role));
 }
 
-function getCommentLink(comment: { contentSlug: string, content: string }) {
-    // Corrected logic for news path
-    const path = comment.contentSlug.startsWith('review-') ? 'reviews' : comment.contentSlug.startsWith('article-') ? 'articles' : 'news';
-    return ( <Link href={`/${path}/${comment.contentSlug}`} className="author-link">{comment.content.slice(0, 30)}...</Link> );
-}
-
 export default async function PublicProfilePage({ params }: { params: { username: string } }) {
     const { username: encodedUsername } = await params;
     const username = decodeURIComponent(encodedUsername);
@@ -32,6 +28,21 @@ export default async function PublicProfilePage({ params }: { params: { username
 
     if (!user) { notFound(); }
     
+    // 1. Extract content slugs from the user's recent comments.
+    const commentSlugs = user.comments.map(c => c.contentSlug);
+    
+    // 2. Fetch the titles for these slugs from Sanity.
+    let contentTitles: { slug: string, title: string }[] = [];
+    if (commentSlugs.length > 0) {
+        contentTitles = await client.fetch(
+            groq`*[_type in ["review", "article", "news"] && slug.current in $slugs]{ "slug": slug.current, title }`,
+            { slugs: commentSlugs }
+        );
+    }
+    
+    // 3. Create a lookup map for easy access (slug -> title).
+    const titleMap = new Map(contentTitles.map(item => [item.slug, item.title]));
+
     const arabicMonths = ["يناير", "فبراير", "مارس", "أبريل", "مايو", "يونيو", "يوليو", "أغسطس", "سبتمبر", "أكتوبر", "نوفمبر", "ديسمبر"];
     const englishMonths = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
     const joinDate = new Date(user.createdAt);
@@ -67,14 +78,22 @@ export default async function PublicProfilePage({ params }: { params: { username
                         <h2 className={styles.profileSectionTitle}>النشاط الأخير</h2>
                         {user.comments.length > 0 ? (
                             <ul style={{listStyle: 'none', padding: 0, display: 'flex', flexDirection: 'column', gap: '2rem'}}>
-                                {user.comments.map(comment => (
-                                    <li key={comment.id}>
-                                        <p style={{margin: '0 0 0.5rem 0'}}>علّق على {getCommentLink(comment)}</p>
-                                        <blockquote style={{margin: 0, padding: '1rem', background: 'var(--bg-secondary)', borderRight: '3px solid var(--border-color)', borderLeft: 'none', borderRadius: '4px'}}>
-                                            &quot;{comment.content.slice(0, 150)}{comment.content.length > 150 ? '...' : ''}&quot;
-                                        </blockquote>
-                                    </li>
-                                ))}
+                                {user.comments.map(comment => {
+                                    const contentTitle = titleMap.get(comment.contentSlug) || 'محتوى لم يعد متاحًا';
+                                    const path = comment.contentSlug.startsWith('review-') ? 'reviews' : comment.contentSlug.startsWith('article-') ? 'articles' : 'news';
+                                    const linkHref = `/${path}/${comment.contentSlug}`;
+
+                                    return (
+                                        <li key={comment.id}>
+                                            <p style={{margin: '0 0 0.5rem 0'}}>
+                                                علّق على <Link href={linkHref} className="creator-credit-link">{contentTitle}</Link>
+                                            </p>
+                                            <blockquote style={{margin: 0, padding: '1rem', background: 'var(--bg-secondary)', borderRight: '3px solid var(--border-color)', borderLeft: 'none', borderRadius: '4px'}}>
+                                                &quot;{comment.content.slice(0, 150)}{comment.content.length > 150 ? '...' : ''}&quot;
+                                            </blockquote>
+                                        </li>
+                                    );
+                                })}
                             </ul>
                         ) : ( <p>{user.name} لم ينشر أي تعليقات بعد.</p> )}
                     </section>
@@ -82,6 +101,4 @@ export default async function PublicProfilePage({ params }: { params: { username
             </div>
         </div>
     );
-}
-
-
+}
\ No newline at end of file
diff --git a/app/reviews/ReviewsPageClient.tsx b/app/reviews/ReviewsPageClient.tsx
index 4a0c8b9..491ef5b 100644
--- a/app/reviews/ReviewsPageClient.tsx
+++ b/app/reviews/ReviewsPageClient.tsx
@@ -1,148 +1,107 @@
 // app/reviews/ReviewsPageClient.tsx
 'use client';
 
-import { useState, useMemo, useRef, useCallback, useEffect } from 'react';
+import { useState, useMemo, useCallback, useEffect } from 'react';
 import type { SanityReview, SanityGame, SanityTag } from '@/types/sanity';
-import { motion, AnimatePresence, useInView } from 'framer-motion';
+import { motion, AnimatePresence } from 'framer-motion';
 import Image from 'next/image';
-import Link from 'next/link';
-
 import ReviewFilters, { ScoreFilter } from '@/components/filters/ReviewFilters';
-import FilteredReviewsGrid from '@/components/FilteredReviewsGrid';
-import { ContentBlock } from '@/components/ContentBlock';
+import ArticleCard from '@/components/ArticleCard';
 import { adaptToCardProps } from '@/lib/adapters';
 import { CardProps } from '@/types';
 import styles from './ReviewsPage.module.css';
-
-const fetchReviews = async (params: URLSearchParams) => {
-    const res = await fetch(`/api/reviews?${params.toString()}`);
-    if (!res.ok) throw new Error('Failed to fetch reviews');
-    return res.json();
-};
+import { useLayoutIdStore } from '@/lib/layoutIdStore';
+import { useRouter, usePathname, useSearchParams } from 'next/navigation';
 
 export default function ReviewsPageClient({ heroReview, initialGridReviews, allGames, allTags }: { heroReview: SanityReview, initialGridReviews: SanityReview[], allGames: SanityGame[], allTags: SanityTag[] }) {
-    const intersectionRef = useRef(null);
-    const isIntersecting = useInView(intersectionRef);
+    const router = useRouter();
+    const pathname = usePathname();
+    const searchParams = useSearchParams();
+    const setPrefix = useLayoutIdStore((state) => state.setPrefix);
 
-    const initialCards = useMemo(() => initialGridReviews.map(adaptToCardProps).filter(Boolean) as CardProps[], [initialGridReviews]);
+    const gridReviews = useMemo(() => initialGridReviews.map(adaptToCardProps).filter(Boolean) as CardProps[], [initialGridReviews]);
     
-    const [reviews, setReviews] = useState<CardProps[]>(initialCards);
-    const [isLoading, setIsLoading] = useState(false);
-    const [nextOffset, setNextOffset] = useState<number | null>(initialCards.length === 20 ? 20 : null);
-    const [isFeedExhausted, setIsFeedExhausted] = useState(initialCards.length < 20);
-
-    // Replaced useUrlState with standard useState
-    const [searchTerm, setSearchTerm] = useState('');
-    const [activeSort, setActiveSort] = useState<'latest' | 'score'>('latest');
-    const [selectedScoreRange, setSelectedScoreRange] = useState<ScoreFilter>('All');
-    const [selectedGame, setSelectedGame] = useState<SanityGame | null>(null);
-    const [selectedTags, setSelectedTags] = useState<SanityTag[]>([]);
-
-    const currentFilters = useMemo(() => ({ searchTerm, activeSort, selectedScoreRange, selectedGame, selectedTags }), [searchTerm, activeSort, selectedScoreRange, selectedGame, selectedTags]);
-    const hasActiveFilters = searchTerm || activeSort !== 'latest' || selectedScoreRange !== 'All' || !!selectedGame || selectedTags.length > 0;
+    // Initialize filter state from URL search params
+    const [searchTerm, setSearchTerm] = useState(searchParams.get('q') || '');
+    const [activeSort, setActiveSort] = useState<'latest' | 'score'>((searchParams.get('sort') as any) || 'latest');
+    const [selectedScoreRange, setSelectedScoreRange] = useState<ScoreFilter>((searchParams.get('score') as any) || 'All');
+    const [selectedGame, setSelectedGame] = useState<SanityGame | null>(() => {
+        const gameSlug = searchParams.get('game');
+        return gameSlug ? allGames.find(g => g.slug === gameSlug) || null : null;
+    });
+    const [selectedTags, setSelectedTags] = useState<SanityTag[]>(() => {
+        const tagSlugs = searchParams.get('tags')?.split(',') || [];
+        return allTags.filter(t => tagSlugs.includes(t.slug));
+    });
 
+    // Update URL when filters change
     useEffect(() => {
-        const filtersAreDefault = !hasActiveFilters;
-        if (filtersAreDefault) {
-            setReviews(initialCards);
-            setNextOffset(initialCards.length === 20 ? 20 : null);
-            setIsFeedExhausted(initialCards.length < 20);
-            return;
-        }
-
-        const fetchAndReplace = async () => {
-            setIsLoading(true);
-            setIsFeedExhausted(false);
-            const params = new URLSearchParams({ offset: '0', limit: '20' });
-            if (searchTerm) params.set('q', searchTerm);
-            if (activeSort !== 'latest') params.set('sort', activeSort);
-            if (selectedScoreRange !== 'All') params.set('score', selectedScoreRange);
-            if (selectedGame) params.set('game', selectedGame.slug);
-            if (selectedTags.length > 0) params.set('tags', selectedTags.map(t => t.slug).join(','));
-
-            try {
-                const result = await fetchReviews(params);
-                const uniqueNewItems = result.data.filter((item: CardProps) => item.id !== heroReview._id);
-                setReviews(uniqueNewItems);
-                setNextOffset(result.nextOffset);
-                if (!result.nextOffset) setIsFeedExhausted(true);
-            } catch (error) {
-                console.error("Filter change fetch failed:", error);
-            } finally {
-                setIsLoading(false);
-            }
-        };
-
-        fetchAndReplace();
-    }, [currentFilters, initialCards, heroReview._id, hasActiveFilters]);
-
-    useEffect(() => {
-        if (isIntersecting && nextOffset !== null && !isLoading) {
-            const loadMore = async () => {
-                setIsLoading(true);
-                const params = new URLSearchParams({ offset: String(nextOffset), limit: '20' });
-                if (searchTerm) params.set('q', searchTerm);
-                if (activeSort !== 'latest') params.set('sort', activeSort);
-                if (selectedScoreRange !== 'All') params.set('score', selectedScoreRange);
-                if (selectedGame) params.set('game', selectedGame.slug);
-                if (selectedTags.length > 0) params.set('tags', selectedTags.map(t => t.slug).join(','));
-
-                try {
-                    const result = await fetchReviews(params);
-                    setReviews(prev => [...prev, ...result.data]);
-                    setNextOffset(result.nextOffset);
-                    if (!result.nextOffset) setIsFeedExhausted(true);
-                } catch (error) {
-                    console.error("Failed to load more reviews:", error);
-                } finally {
-                    setIsLoading(false);
-                }
-            };
-            loadMore();
-        }
-    }, [isIntersecting, nextOffset, isLoading, currentFilters]);
-
+        const params = new URLSearchParams(searchParams);
+        if (searchTerm) params.set('q', searchTerm); else params.delete('q');
+        if (activeSort !== 'latest') params.set('sort', activeSort); else params.delete('sort');
+        if (selectedScoreRange !== 'All') params.set('score', selectedScoreRange); else params.delete('score');
+        if (selectedGame) params.set('game', selectedGame.slug); else params.delete('game');
+        if (selectedTags.length > 0) params.set('tags', selectedTags.map(t => t.slug).join(',')); else params.delete('tags');
+        
+        router.push(`${pathname}?${params.toString()}`, { scroll: false });
+    }, [searchTerm, activeSort, selectedScoreRange, selectedGame, selectedTags, router, pathname, searchParams]);
+    
     const handleTagToggle = (tag: SanityTag) => { setSelectedTags(prev => prev.some(t => t._id === tag._id) ? prev.filter(t => t._id !== tag._id) : [...prev, tag]); };
     const handleClearAll = () => { setSearchTerm(''); setSelectedScoreRange('All'); setSelectedGame(null); setSelectedTags([]); setActiveSort('latest'); };
 
+    const handleHeroClick = (e: React.MouseEvent) => {
+        e.preventDefault();
+        setPrefix('reviews-hero');
+        router.push(`/reviews/${heroReview.slug}`, { scroll: false });
+    };
+
     return (
         <>
-            <div className={styles.reviewHero}>
-                <Image src={heroReview.mainImage.url} alt={`Background for ${heroReview.title}`} fill className={styles.heroBg} style={{ objectFit: 'cover' }} priority placeholder='blur' blurDataURL={heroReview.mainImage.blurDataURL} />
+            <motion.div
+                layoutId={`reviews-hero-card-container-${heroReview.legacyId}`}
+                className={styles.reviewHero}
+                onClick={handleHeroClick}
+                style={{ cursor: 'pointer' }}
+            >
+                <motion.div layoutId={`reviews-hero-card-image-${heroReview.legacyId}`} className={styles.heroBg}>
+                    <Image src={heroReview.mainImage.url} alt={`Background for ${heroReview.title}`} fill style={{ objectFit: 'cover' }} priority placeholder='blur' blurDataURL={heroReview.mainImage.blurDataURL} />
+                </motion.div>
                 <div className={styles.heroOverlay} />
                 <motion.div className="container" style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '1rem', zIndex: 5, color: '#fff', textAlign: 'center' }} initial={{opacity: 0, y: 20}} animate={{opacity: 1, y: 0}} transition={{duration: 0.5, delay: 0.2}}>
                     <p className={styles.heroCategory}>الأعلى تقييمًا</p>
                     <div className={styles.titleScoreWrapper}>
-                        <h1 className={styles.heroTitle}>{heroReview.title}</h1>
+                        <motion.h1 layoutId={`reviews-hero-card-title-${heroReview.legacyId}`} className={styles.heroTitle}>{heroReview.title}</motion.h1>
                         <span className={styles.heroScore}>{heroReview.score?.toFixed(1)}</span>
                     </div>
                     {heroReview.game?.title && (<span className={styles.heroGame}>{heroReview.game.title}</span>)}
-                    <Link href={`/reviews/${heroReview.slug}`} className="primary-button no-underline" style={{padding: '1rem 2.4rem', fontSize: '1.6rem'}}>اقرأ المراجعة</Link>
+                    <div className="primary-button no-underline" style={{padding: '1rem 2.4rem', fontSize: '1.6rem', pointerEvents: 'none'}}>اقرأ المراجعة</div>
                 </motion.div>
-            </div>
+            </motion.div>
             
             <div className="container" style={{paddingTop: '4rem'}}>
                 <ReviewFilters activeSort={activeSort} onSortChange={setActiveSort} selectedScoreRange={selectedScoreRange} onScoreSelect={setSelectedScoreRange} allGames={allGames} selectedGame={selectedGame} onGameSelect={setSelectedGame} allTags={allTags} selectedTags={selectedTags} onTagToggle={handleTagToggle} onClearAll={handleClearAll} searchTerm={searchTerm} onSearchChange={setSearchTerm} />
                 
-                <ContentBlock title="جميع المراجعات">
-                    <FilteredReviewsGrid reviews={reviews} />
-                    <AnimatePresence>
-                        {(isLoading && nextOffset !== null) && (
-                            <motion.div key="loading" style={{display: 'flex', justifyContent: 'center', padding: '4rem'}} initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}>
-                                <div className="spinner" />
-                            </motion.div>
-                        )}
-                    </AnimatePresence>
-                    <div ref={intersectionRef} style={{ height: '1px', margin: '1rem 0' }} />
-                    <AnimatePresence>
-                        {(isFeedExhausted && reviews.length > 0 && !isLoading) && (
-                             <motion.p key="end" style={{textAlign: 'center', padding: '3rem 0', color: 'var(--text-secondary)'}} initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}>وصلت إلى نهاية الأرشيف.</motion.p>
-                        )}
-                    </AnimatePresence>
-                    {(!isLoading && reviews.length === 0 && hasActiveFilters) && (
-                        <motion.p key="no-match" style={{textAlign: 'center', padding: '4rem 0', color: 'var(--text-secondary)'}} initial={{ opacity: 0 }} animate={{ opacity: 1 }}>لا توجد مراجعات تطابق ما اخترت.</motion.p>
+                <div style={{marginBottom: '6rem'}}>
+                    <h2 className="section-title" style={{textAlign: 'right', marginBottom: '3rem', fontSize: 'clamp(2.8rem, 4vw, 3.6rem)'}}>جميع المراجعات</h2>
+                    <motion.div layout className="content-grid">
+                        <AnimatePresence>
+                            {gridReviews.map((review, index) => (
+                                <ArticleCard
+                                    key={review.id}
+                                    article={review}
+                                    layoutIdPrefix="reviews"
+                                    isPriority={index < 3}
+                                />
+                            ))}
+                        </AnimatePresence>
+                    </motion.div>
+                    
+                    {gridReviews.length === 0 && (
+                        <motion.p key="no-match" style={{textAlign: 'center', padding: '4rem 0', color: 'var(--text-secondary)'}} initial={{ opacity: 0 }} animate={{ opacity: 1 }}>
+                            لا توجد مراجعات تطابق ما اخترت.
+                        </motion.p>
                     )}
-                </ContentBlock>
+                </div>
             </div>
         </>
     );
diff --git a/app/reviews/page.tsx b/app/reviews/page.tsx
index b1ff524..a3e9180 100644
--- a/app/reviews/page.tsx
+++ b/app/reviews/page.tsx
@@ -1,24 +1,39 @@
 // app/reviews/page.tsx
 import { client } from '@/lib/sanity.client';
-import { featuredHeroReviewQuery, allReviewsListQuery } from '@/lib/sanity.queries';
+import { featuredHeroReviewQuery, paginatedReviewsQuery } from '@/lib/sanity.queries';
 import { groq } from 'next-sanity';
 import type { SanityReview, SanityGame, SanityTag } from '@/types/sanity';
 import ReviewsPageClient from './ReviewsPageClient';
 import { Suspense } from 'react';
+import GridPageSkeleton from '@/components/skeletons/GridPageSkeleton';
+import { ScoreFilter } from '@/components/filters/ReviewFilters';
 
+export const dynamic = 'force-dynamic';
 export const revalidate = 60;
 
 const allGamesQuery = groq`*[_type == "game"] | order(title asc) {_id, title, "slug": slug.current}`;
 const allTagsQuery = groq`*[_type == "tag" && category == "Game"] | order(title asc) {_id, title, "slug": slug.current}`;
 
-export default async function ReviewsPage() {
-  const [heroReview, initialGridReviews, allGames, allTags]: [SanityReview, SanityReview[], SanityGame[], SanityTag[]] = await Promise.all([
+export default async function ReviewsPage({ searchParams }: {
+  searchParams: { [key: string]: string | string[] | undefined }
+}) {
+  const [heroReview, allGames, allTags]: [SanityReview, SanityGame[], SanityTag[]] = await Promise.all([
     client.fetch(featuredHeroReviewQuery),
-    client.fetch(allReviewsListQuery),
     client.fetch(allGamesQuery),
     client.fetch(allTagsQuery),
   ]);
 
+  const offset = 0; // Server-side filtering doesn't need pagination for initial load
+  const limit = 20;
+  const sort = (searchParams.sort as 'latest' | 'score') || 'latest';
+  const scoreRange = (searchParams.score as ScoreFilter) || 'All';
+  const gameSlug = (searchParams.game as string) || undefined;
+  const tagSlugs = searchParams.tags ? String(searchParams.tags).split(',') : undefined;
+  const searchTerm = (searchParams.q as string) || undefined;
+
+  const query = paginatedReviewsQuery(gameSlug, tagSlugs, searchTerm, scoreRange, offset, limit, sort);
+  const initialGridReviews: SanityReview[] = await client.fetch(query);
+  
   if (!heroReview) {
     return (
       <div className="container page-container">
@@ -28,10 +43,11 @@ export default async function ReviewsPage() {
     );
   }
 
+  // Ensure hero review isn't duplicated in the grid on initial load
   const gridReviews = (initialGridReviews || []).filter(review => review._id !== heroReview._id);
 
   return (
-    <Suspense fallback={<div className="spinner page-container" style={{margin: 'auto'}} />}>
+    <Suspense fallback={<GridPageSkeleton />}>
       <ReviewsPageClient 
         heroReview={heroReview} 
         initialGridReviews={gridReviews}
diff --git a/app/studio/StudioDashboard.tsx b/app/studio/StudioDashboard.tsx
index f60dbe8..359aafe 100644
--- a/app/studio/StudioDashboard.tsx
+++ b/app/studio/StudioDashboard.tsx
@@ -47,7 +47,7 @@ const ContentCanvas = ({ item, onDelete, isActive, onCardClick, isTouchDevice }:
         setIsHovered(false);
     };
 
-    const isDrawerVisible = isActive || isHovered;
+    const isDrawerVisible = isActive || (!isTouchDevice && isHovered);
 
     const imageUrlWithBuster = useMemo(() => {
         if (!item.mainImage?.asset) return null;
diff --git a/app/studio/[contentType]/[id]/EditorClient.tsx b/app/studio/[contentType]/[id]/EditorClient.tsx
index b77a635..2974b2b 100644
--- a/app/studio/[contentType]/[id]/EditorClient.tsx
+++ b/app/studio/[contentType]/[id]/EditorClient.tsx
@@ -23,15 +23,16 @@ type EditorDocument = {
     _id: string; _type: string; _updatedAt: string; title: string; slug?: { current: string }; score?: number; verdict?: string; pros?: string[]; cons?: string[]; game?: { _id: string; title: string } | null; publishedAt?: string | null; mainImage?: { _ref: string | null; url: string | null; metadata?: any }; authors?: any[]; reporters?: any[]; designers?: any[]; tags?: any[]; releaseDate?: string; platforms?: string[]; synopsis?: string; tiptapContent?: any; content?: any;
 };
 
-// ... (reducer, generateDiffPatch, etc. remain the same) ...
 const clientSlugify = (text: string): string => { if (!text) return ''; return text.toLowerCase().trim().replace(/[^a-z0-9\s-]/g, '').replace(/[\s-]+/g, '-'); };
+
+// THE DEFINITIVE FIX: Added `game` to the initial state to ensure it's always present.
 const initialState = { _id: null, _type: null, title: '', slug: '', score: 0, verdict: '', pros: [], cons: [], game: null, tags: [], mainImage: { assetId: null, assetUrl: null }, authors: [], reporters: [], designers: [], publishedAt: null, isSlugManual: false, releaseDate: '', platforms: [], synopsis: '' };
 
 function editorReducer(state: any, action: { type: string; payload: any }) {
     switch (action.type) {
-        case 'INITIALIZE_STATE': return { ...action.payload, isSlugManual: !!action.payload.slug, };
+        case 'INITIALIZE_STATE': return { ...state, ...action.payload, isSlugManual: !!action.payload.slug, };
         case 'UPDATE_FIELD': return { ...state, [action.payload.field]: action.payload.value };
-        case 'UPDATE_SLUG': return { ...state, slug: clientSlugify(action.payload.slug), isManual: action.payload.isManual };
+        case 'UPDATE_SLUG': return { ...state, slug: clientSlugify(action.payload.slug), isSlugManual: action.payload.isManual };
         default: throw new Error(`Unhandled action type: ${action.type}`);
     }
 }
@@ -82,7 +83,7 @@ export function EditorClient({ document: initialDocument, allGames, allTags, all
         setEditorActive(true);
         return () => {
             setEditorActive(false);
-            setLiveUrl(null); // Clean up on unmount
+            setLiveUrl(null);
         };
     }, [setEditorActive, setLiveUrl]);
 
@@ -119,8 +120,8 @@ export function EditorClient({ document: initialDocument, allGames, allTags, all
     useEffect(() => { dispatch({ type: 'INITIALIZE_STATE', payload: { _id: sourceOfTruth._id, _type: sourceOfTruth._type, title: sourceOfTruth.title ?? '', slug: sourceOfTruth.slug?.current ?? '', score: sourceOfTruth.score ?? 0, verdict: sourceOfTruth.verdict ?? '', pros: sourceOfTruth.pros ?? [], cons: sourceOfTruth.cons ?? [], game: sourceOfTruth.game || null, publishedAt: sourceOfTruth.publishedAt || null, mainImage: { assetId: sourceOfTruth.mainImage?._ref || null, assetUrl: sourceOfTruth.mainImage?.url || null }, authors: (sourceOfTruth.authors || []).filter(Boolean), reporters: (sourceOfTruth.reporters || []).filter(Boolean), designers: (sourceOfTruth.designers || []).filter(Boolean), tags: (sourceOfTruth.tags || []).filter(Boolean), releaseDate: sourceOfTruth.releaseDate || '', platforms: sourceOfTruth.platforms || [], synopsis: sourceOfTruth.synopsis || '', } }); const imageWidth = sourceOfTruth?.mainImage?.metadata?.dimensions?.width; if (imageWidth && imageWidth >= 3840) { setMainImageUploadQuality('4k'); } else { setMainImageUploadQuality('1080p'); } if (editorInstance) { const editorJSON = JSON.stringify(editorInstance.getJSON()); const sourceJSON = JSON.stringify(sourceOfTruth.tiptapContent || {}); if (editorJSON !== sourceJSON) { editorInstance.commands.setContent(sourceOfTruth.tiptapContent, false); } } }, [sourceOfTruth._id, sourceOfTruth._updatedAt, editorInstance]);
     useEffect(() => { if (editorInstance) { const updateJson = () => setEditorContentJson(JSON.stringify(editorInstance.getJSON())); editorInstance.on('update', updateJson); return () => { editorInstance.off('update', updateJson); }; } }, [editorInstance]);
     useEffect(() => { if (!isSlugManual && title !== sourceOfTruth.title) { dispatch({ type: 'UPDATE_SLUG', payload: { slug: clientSlugify(title), isManual: false } }); } }, [title, isSlugManual, sourceOfTruth.title]);
-    useEffect(() => { if (!state._id || !debouncedSlug) { setSlugValidationStatus('invalid'); setSlugValidationMessage(!state._id ? 'Waiting for document ID...' : 'المُعرّف لا يمكن أن يكون فارغًا.'); return; } setSlugValidationStatus('pending'); setSlugValidationMessage('جار التحقق...'); const checkSlug = async () => { const result = await validateSlugAction(debouncedSlug, state._id); setSlugValidationStatus(result.isValid ? 'valid' : 'invalid'); setSlugValidationMessage(result.message); }; checkSlug(); }, [debouncedSlug, state._id]);
-    const isDocumentValid = useMemo(() => { const { title, slug, mainImage, game, score, verdict, authors, reporters, releaseDate, platforms, synopsis } = state; const baseValid = title.trim() && slug.trim() && mainImage.assetId; if (!baseValid) return false; const type = sourceOfTruth._type; if (type === 'review') return game?._id && (authors || []).length > 0 && score > 0 && verdict.trim(); if (type === 'article') return game?._id && (authors || []).length > 0; if (type === 'news') return (reporters || []).length > 0; if (type === 'gameRelease') return releaseDate.trim() && synopsis.trim() && (platforms || []).length > 0; return false; }, [state, sourceOfTruth._type]);
+    useEffect(() => { if (!state._id || !debouncedSlug) { setSlugValidationStatus('invalid'); setSlugValidationMessage(!state._id ? 'Waiting for document ID...' : 'المُعرِّف لا يمكن أن يكون فارغًا.'); return; } setSlugValidationStatus('pending'); setSlugValidationMessage('جار التحقق...'); const checkSlug = async () => { const result = await validateSlugAction(debouncedSlug, state._id); setSlugValidationStatus(result.isValid ? 'valid' : 'invalid'); setSlugValidationMessage(result.message); }; checkSlug(); }, [debouncedSlug, state._id]);
+    const isDocumentValid = useMemo(() => { const { title, slug, mainImage, game, score, verdict, authors, reporters, releaseDate, platforms, synopsis } = state; const baseValid = title.trim() && slug.trim() && mainImage.assetId; if (!baseValid) return false; const type = sourceOfTruth._type; if (type === 'review') return game?._id && (authors || []).length > 0 && score > 0 && verdict.trim(); if (type === 'article') return game?._id && (authors || []).length > 0; if (type === 'news') return (reporters || []).length > 0; if (type === 'gameRelease') return game?._id && releaseDate.trim() && synopsis.trim() && (platforms || []).length > 0; return false; }, [state, sourceOfTruth._type]);
     const saveWorkingCopy = async (): Promise<boolean> => { if (!hasChanges) return true; if (slugValidationStatus !== 'valid') { toast.error('لا يمكن الحفظ بمُعرّف غير صالح.', 'left'); return false; } const result = await updateDocumentAction(sourceOfTruth._id, patch); if (result.success && result.updatedDocument) { setSourceOfTruth(result.updatedDocument); return true; } else { toast.error(result.message || 'فشل حفظ التغييرات.', 'left'); return false; } };
     const handlePublish = async (publishTime?: string | null): Promise<boolean> => { const didSave = await saveWorkingCopy(); if (!didSave) { if (hasChanges) toast.error('يرجى حفظ التغييرات أولاً.', 'left'); return false; } const result = await publishDocumentAction(sourceOfTruth._id, publishTime); if (result.success && result.updatedDocument) { setSourceOfTruth(result.updatedDocument); toast.success(result.message || 'تم تحديث حالة النشر بنجاح!', 'left'); return true; } else { toast.error(result.message || 'فشل تحديث حالة النشر.', 'left'); return false; } };
     useEffect(() => { if (hasChanges) { document.title = `*غير محفوظ* ${title || 'غير معنون'}`; window.onbeforeunload = () => "You have unsaved changes. Are you sure you want to leave?"; } else { document.title = title || "EternalGames الديوان"; window.onbeforeunload = null; } return () => { window.onbeforeunload = null; }; }, [hasChanges, title]);
diff --git a/app/studio/[contentType]/[id]/EditorSidebar.tsx b/app/studio/[contentType]/[id]/EditorSidebar.tsx
index 78b6d19..7df6da3 100644
--- a/app/studio/[contentType]/[id]/EditorSidebar.tsx
+++ b/app/studio/[contentType]/[id]/EditorSidebar.tsx
@@ -100,8 +100,19 @@ export function EditorSidebar({
                             <AnimatePresence> {!isSlugValid && !isSlugPending && <motion.p initial={{height:0, opacity:0}} animate={{height:'auto', opacity:1}} exit={{height:0, opacity:0}} style={{ color: '#DC2626', fontSize: '1.2rem', marginTop: '0.5rem', textAlign: 'right' }}>{slugValidationMessage}</motion.p>} </AnimatePresence>
                         </motion.div>
                         
-                        {isRelease ? ( <> <motion.div className={styles.sidebarSection} variants={itemVariants}> <label className={styles.sidebarLabel}>تاريخ الإصدار</label> <input type="date" value={releaseDate} onChange={(e) => handleFieldChange('releaseDate', e.target.value)} className={styles.sidebarInput} /> </motion.div> <motion.div variants={itemVariants}><PlatformInput selectedPlatforms={platforms} onPlatformsChange={(p: any) => handleFieldChange('platforms', p)} /></motion.div> <motion.div className={styles.sidebarSection} variants={itemVariants}> <label className={styles.sidebarLabel}>نبذة</label> <textarea value={synopsis} onChange={(e) => handleFieldChange('synopsis', e.target.value)} className={styles.sidebarInput} rows={5} /> </motion.div> </> ) : ( <> <div><CreatorInput allCreators={creatorsForRole(primaryCreatorConfig.sanityType)} label={primaryCreatorConfig.label} selectedCreators={documentState[primaryCreatorConfig.field]} onCreatorsChange={(c: any) => handleFieldChange(primaryCreatorConfig.field, c)} /></div> <div><GameInput allGames={allGames} selectedGame={game} onGameSelect={(g: any) => handleFieldChange('game', g)} /></div> <div><TagInput allTags={allTags} selectedTags={tags} onTagsChange={(t: any) => handleFieldChange('tags', t)} /></div> </> )}
-                        <div><CreatorInput allCreators={creatorsForRole('designer')} label="المصممون (اختياري)" selectedCreators={designers} onCreatorsChange={(c: any) => handleFieldChange('designers', c)} /></div>
+                        {isRelease ? ( <> 
+                            <motion.div variants={itemVariants}><GameInput allGames={allGames} selectedGame={game} onGameSelect={(g: any) => handleFieldChange('game', g)} /></motion.div>
+                            <motion.div className={styles.sidebarSection} variants={itemVariants}> <label className={styles.sidebarLabel}>تاريخ الإصدار</label> <input type="date" value={releaseDate} onChange={(e) => handleFieldChange('releaseDate', e.target.value)} className={styles.sidebarInput} /> </motion.div> 
+                            <motion.div variants={itemVariants}><PlatformInput selectedPlatforms={platforms} onPlatformsChange={(p: any) => handleFieldChange('platforms', p)} /></motion.div> 
+                            <motion.div variants={itemVariants}><CreatorInput allCreators={creatorsForRole('designer')} label="المصممون (اختياري)" selectedCreators={designers} onCreatorsChange={(c: any) => handleFieldChange('designers', c)} /></motion.div>
+                            <motion.div className={styles.sidebarSection} variants={itemVariants}> <label className={styles.sidebarLabel}>نبذة</label> <textarea value={synopsis} onChange={(e) => handleFieldChange('synopsis', e.target.value)} className={styles.sidebarInput} rows={5} /> </motion.div> 
+                        </> ) : ( <> 
+                            <div><CreatorInput allCreators={creatorsForRole(primaryCreatorConfig.sanityType)} label={primaryCreatorConfig.label} selectedCreators={documentState[primaryCreatorConfig.field]} onCreatorsChange={(c: any) => handleFieldChange(primaryCreatorConfig.field, c)} /></div> 
+                            <div><GameInput allGames={allGames} selectedGame={game} onGameSelect={(g: any) => handleFieldChange('game', g)} /></div> 
+                            <div><TagInput allTags={allTags} selectedTags={tags} onTagsChange={(t: any) => handleFieldChange('tags', t)} /></div>
+                            <div><CreatorInput allCreators={creatorsForRole('designer')} label="المصممون (اختياري)" selectedCreators={designers} onCreatorsChange={(c: any) => handleFieldChange('designers', c)} /></div>
+                        </> )}
+                        
                         {isReview && (<> <motion.hr variants={itemVariants} style={{ border: 'none', borderTop: '1px solid var(--border-color)', margin: '1rem 0' }} /> <motion.div className={styles.sidebarSection} variants={itemVariants}> <label className={styles.sidebarLabel}>التقييم (0-10) {score <= 0 && <AlertIcon />}</label> <input type="number" value={score} onChange={(e) => handleFieldChange('score', parseFloat(e.target.value) || 0)} className={styles.sidebarInput} min="0" max="10" step="0.1" /> </motion.div> <motion.div className={styles.sidebarSection} variants={itemVariants}> <label className={styles.sidebarLabel}>الخلاصة {!verdict.trim() && <AlertIcon />}</label> <textarea value={verdict} onChange={(e) => handleFieldChange('verdict', e.target.value)} className={styles.sidebarInput} rows={3} /> </motion.div> <motion.div variants={itemVariants}><ProsConsInput label="المحاسن" items={pros} setItems={(p: any) => handleFieldChange('pros', p)} /></motion.div> <motion.div variants={itemVariants}><ProsConsInput label="المآخذ" items={cons} setItems={(c: any) => handleFieldChange('cons', c)} /></motion.div> </>)}
                     </fieldset>
                     
diff --git a/app/studio/[contentType]/[id]/ImageCompareComponent.tsx b/app/studio/[contentType]/[id]/ImageCompareComponent.tsx
index b2fe51c..62826ce 100644
--- a/app/studio/[contentType]/[id]/ImageCompareComponent.tsx
+++ b/app/studio/[contentType]/[id]/ImageCompareComponent.tsx
@@ -5,17 +5,17 @@ import { NodeViewWrapper, NodeViewProps } from '@tiptap/react';
 import { ReactCompareSlider, ReactCompareSliderImage } from 'react-compare-slider';
 import { useState, useRef, useCallback } from 'react';
 import { optimizeImageForUpload } from '@/lib/image-optimizer';
-import { clientAssetUploader } from '@/lib/sanity.client';
+import { uploadSanityAssetAction } from '../../actions';
 import { useToast } from '@/lib/toastStore';
 import styles from '@/components/ImageCompare.module.css';
 import editorStyles from './Editor.module.css';
 import Image from 'next/image';
 
-const UploadIcon = () => <svg className={styles.uploadIcon} fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M12 16.5V9.75m0 0l-3.75 3.75M12 9.75l3.75 3.75M17.25 12a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0z" /></svg>;
-const DeleteIcon = () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>;
-const SizeSmallIcon = () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="3" width="18" height="6" rx="1"/><rect x="3" y="15" width="18" height="6" rx="1"/></svg>;
-const SizeMediumIcon = () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="3" width="18" height="10" rx="1"/><rect x="3" y="17" width="18" height="4" rx="1"/></svg>;
-const SizeLargeIcon = () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="3" width="18" height="18" rx="1"/></svg>;
+const UploadIcon = () => <svg className={styles.uploadIcon} fill="none" viewBox="0 0 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M12 16.5V9.75m0 0l-3.75 3.75M12 9.75l3.75 3.75M17.25 12a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0z" /></svg>;
+const DeleteIcon = () => <svg width="20" height="20" viewBox="0 0 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>;
+const SizeSmallIcon = () => <svg width="20" height="20" viewBox="0 0 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="3" width="18" height="6" rx="1"/><rect x="3" y="15" width="18" height="6" rx="1"/></svg>;
+const SizeMediumIcon = () => <svg width="20" height="20" viewBox="0 0 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="3" width="18" height="10" rx="1"/><rect x="3" y="17" width="18" height="4" rx="1"/></svg>;
+const SizeLargeIcon = () => <svg width="20" height="20" viewBox="0 0 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="3" width="18" height="18" rx="1"/></svg>;
 
 const formatFileSize = (bytes: number): string => {
     if (bytes < 1024) return `${bytes} B`;
@@ -40,24 +40,22 @@ export const ImageCompareComponent = ({ node, updateAttributes, editor, getPos }
         try {
             toast.info('جار تحسين الصورة للرفع...', 'left');
             const quality = editor.storage.uploadQuality || '1080p';
-            // THE DEFINITIVE FIX: Destructure the object to get the file.
             const { file: optimizedFile, finalQuality } = await optimizeImageForUpload(file, quality);
 
             toast.info(`جار رفع الصورة (${formatFileSize(optimizedFile.size)} @ ${Math.round(finalQuality * 100)}%)...`, 'left');
             
-            const asset = await clientAssetUploader.assets.upload('image', optimizedFile, {
-                filename: optimizedFile.name,
-                contentType: optimizedFile.type,
-            });
+            const formData = new FormData();
+            formData.append('file', optimizedFile);
+            const result = await uploadSanityAssetAction(formData);
 
-            if (asset?._id && asset?.url) {
+            if (result.success && result.asset) {
                 updateAttributes({
-                    [side === 'left' ? 'src1' : 'src2']: asset.url,
-                    [side === 'left' ? 'assetId1' : 'assetId2']: asset._id,
+                    [side === 'left' ? 'src1' : 'src2']: result.asset.url,
+                    [side === 'left' ? 'assetId1' : 'assetId2']: result.asset._id,
                 });
                 toast.success('تم رفع الصورة بنجاح.', 'left');
             } else {
-                throw new Error('فشل رفع أصل الصورة إلى Sanity.');
+                throw new Error(result.error || 'فشل رفع أصل الصورة إلى Sanity.');
             }
         } catch (error: any) {
             toast.error(error.message || 'فشل معالجة الصورة.', 'left');
@@ -91,6 +89,4 @@ export const ImageCompareComponent = ({ node, updateAttributes, editor, getPos }
             </div>
         </NodeViewWrapper>
     );
-};
-
-
+};
\ No newline at end of file
diff --git a/app/studio/[contentType]/[id]/RichTextEditor.tsx b/app/studio/[contentType]/[id]/RichTextEditor.tsx
index af38673..9d1953d 100644
--- a/app/studio/[contentType]/[id]/RichTextEditor.tsx
+++ b/app/studio/[contentType]/[id]/RichTextEditor.tsx
@@ -15,7 +15,7 @@ import { useState, useEffect, useCallback } from 'react';
 import { AnimatePresence } from 'framer-motion';
 import { useToast } from '@/lib/toastStore';
 import { optimizeImageForUpload, UploadQuality } from '@/lib/image-optimizer';
-import { clientAssetUploader } from '@/lib/sanity.client';
+import { uploadSanityAssetAction } from '../../actions';
 import { FormattingToolbar } from './FormattingToolbar';
 import { LinkEditorModal } from './LinkEditorModal';
 import { ImageResizeComponent } from './ImageResizeComponent';
@@ -48,10 +48,9 @@ export const uploadFile = async (file: File, editor: Editor, toast: ReturnType<t
             
             toast.info(`جار رفع الصورة (${formatFileSize(optimizedFile.size)} @ ${Math.round(finalQuality * 100)}%)...`, 'left');
             
-            const asset = await clientAssetUploader.assets.upload('image', optimizedFile, {
-                filename: optimizedFile.name,
-                contentType: optimizedFile.type,
-            });
+            const formData = new FormData();
+            formData.append('file', optimizedFile);
+            const result = await uploadSanityAssetAction(formData);
 
             let imagePos: number | null = null;
             editor.state.doc.descendants((node, pos) => {
@@ -63,16 +62,16 @@ export const uploadFile = async (file: File, editor: Editor, toast: ReturnType<t
             });
             
             if (imagePos !== null) {
-                if (asset?._id && asset?.url) {
+                if (result.success && result.asset) {
                     const finalTransaction = editor.state.tr.setNodeMarkup(imagePos, undefined, {
                         ...editor.state.doc.nodeAt(imagePos)?.attrs,
-                        src: asset.url,
-                        assetId: asset._id,
+                        src: result.asset.url,
+                        assetId: result.asset._id,
                     });
                     editor.view.dispatch(finalTransaction);
                     toast.success('تم رفع الصورة بنجاح.', 'left');
                 } else {
-                    throw new Error('فشل رفع أصل الصورة إلى Sanity.');
+                    throw new Error(result.error || 'فشل رفع أصل الصورة إلى Sanity.');
                 }
             }
         };
@@ -156,7 +155,7 @@ export default function RichTextEditor({ onEditorCreated, initialContent }: Rich
                 editor={editor} 
                 tippyOptions={{ 
                     duration: 100, 
-                    placement: 'top-end', // <-- THE DEFINITIVE FIX
+                    placement: 'top-end',
                     offset: [0, 8] 
                 }} 
                 shouldShow={({ editor, state }) => { 
diff --git a/app/studio/[contentType]/[id]/editor-components/FourImageGridComponent.tsx b/app/studio/[contentType]/[id]/editor-components/FourImageGridComponent.tsx
index 09166d4..90cf46f 100644
--- a/app/studio/[contentType]/[id]/editor-components/FourImageGridComponent.tsx
+++ b/app/studio/[contentType]/[id]/editor-components/FourImageGridComponent.tsx
@@ -4,14 +4,14 @@
 import { NodeViewWrapper, NodeViewProps } from '@tiptap/react';
 import { useToast } from '@/lib/toastStore';
 import { optimizeImageForUpload } from '@/lib/image-optimizer';
-import { clientAssetUploader } from '@/lib/sanity.client';
+import { uploadSanityAssetAction } from '../../../actions';
 import { useState, useRef, useCallback } from 'react';
 import Image from 'next/image';
 import styles from '../Editor.module.css';
 import compareStyles from '@/components/ImageCompare.module.css';
 
-const UploadIcon = () => ( <svg className={compareStyles.uploadIcon} fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M12 16.5V9.75m0 0l-3.75 3.75M12 9.75l3.75 3.75M17.25 12a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0z" /></svg> );
-const DeleteIcon = () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>;
+const UploadIcon = () => ( <svg className={compareStyles.uploadIcon} fill="none" viewBox="0 0 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M12 16.5V9.75m0 0l-3.75 3.75M12 9.75l3.75 3.75M17.25 12a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0z" /></svg> );
+const DeleteIcon = () => <svg width="20" height="20" viewBox="0 0 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>;
 
 const formatFileSize = (bytes: number): string => {
     if (bytes < 1024) return `${bytes} B`;
@@ -46,23 +46,18 @@ export const FourImageGridComponent = ({ node, updateAttributes, editor, getPos
         try {
             toast.info('جار تحسين الصورة للرفع...', 'left');
             const quality = editor.storage.uploadQuality || '1080p';
-            // --- THE FIX IS HERE (PART 1) ---
-            // Correctly destructure the object returned by the optimizer.
             const { file: optimizedFile, finalQuality } = await optimizeImageForUpload(file, quality);
 
-            // --- THE FIX IS HERE (PART 2) ---
-            // Use the final size and quality percentage in the toast.
             toast.info(`جار رفع الصورة (${formatFileSize(optimizedFile.size)} @ ${Math.round(finalQuality * 100)}%)...`, 'left');
 
-            const asset = await clientAssetUploader.assets.upload('image', optimizedFile, {
-                filename: optimizedFile.name,
-                contentType: optimizedFile.type,
-            });
+            const formData = new FormData();
+            formData.append('file', optimizedFile);
+            const result = await uploadSanityAssetAction(formData);
 
-            if (asset?._id && asset?.url) {
-                updateAttributes({ [`src${slot}`]: asset.url, [`assetId${slot}`]: asset._id });
+            if (result.success && result.asset) {
+                updateAttributes({ [`src${slot}`]: result.asset.url, [`assetId${slot}`]: result.asset._id });
                 toast.success('تم رفع الصورة بنجاح.', 'left');
-            } else { throw new Error('فشل الرفع'); }
+            } else { throw new Error(result.error || 'فشل الرفع'); }
         } catch (error: any) { toast.error(error.message, 'left'); }
     }, [updateAttributes, toast, editor.storage.uploadQuality]);
     
@@ -81,6 +76,4 @@ export const FourImageGridComponent = ({ node, updateAttributes, editor, getPos
             </div>
         </NodeViewWrapper>
     );
-};
-
-
+};
\ No newline at end of file
diff --git a/app/studio/[contentType]/[id]/editor-components/TwoImageGridComponent.tsx b/app/studio/[contentType]/[id]/editor-components/TwoImageGridComponent.tsx
index 5c1bf11..b522483 100644
--- a/app/studio/[contentType]/[id]/editor-components/TwoImageGridComponent.tsx
+++ b/app/studio/[contentType]/[id]/editor-components/TwoImageGridComponent.tsx
@@ -4,14 +4,14 @@
 import { NodeViewWrapper, NodeViewProps } from '@tiptap/react';
 import { useToast } from '@/lib/toastStore';
 import { optimizeImageForUpload } from '@/lib/image-optimizer';
-import { clientAssetUploader } from '@/lib/sanity.client';
+import { uploadSanityAssetAction } from '../../../actions';
 import { useState, useRef, useCallback } from 'react';
 import Image from 'next/image';
 import styles from '../Editor.module.css';
 import compareStyles from '@/components/ImageCompare.module.css';
 
-const UploadIcon = () => ( <svg className={compareStyles.uploadIcon} fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M12 16.5V9.75m0 0l-3.75 3.75M12 9.75l3.75 3.75M17.25 12a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0z" /></svg> );
-const DeleteIcon = () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>;
+const UploadIcon = () => ( <svg className={compareStyles.uploadIcon} fill="none" viewBox="0 0 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M12 16.5V9.75m0 0l-3.75 3.75M12 9.75l3.75 3.75M17.25 12a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0z" /></svg> );
+const DeleteIcon = () => <svg width="20" height="20" viewBox="0 0 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>;
 
 const formatFileSize = (bytes: number): string => {
     if (bytes < 1024) return `${bytes} B`;
@@ -46,23 +46,18 @@ export const TwoImageGridComponent = ({ node, updateAttributes, editor, getPos }
         try {
             toast.info('جار تحسين الصورة للرفع...', 'left');
             const quality = editor.storage.uploadQuality || '1080p';
-            // --- THE FIX IS HERE (PART 1) ---
-            // Correctly destructure the object returned by the optimizer.
             const { file: optimizedFile, finalQuality } = await optimizeImageForUpload(file, quality);
 
-            // --- THE FIX IS HERE (PART 2) ---
-            // Use the final size and quality percentage in the toast.
             toast.info(`جار رفع الصورة (${formatFileSize(optimizedFile.size)} @ ${Math.round(finalQuality * 100)}%)...`, 'left');
 
-            const asset = await clientAssetUploader.assets.upload('image', optimizedFile, {
-                filename: optimizedFile.name,
-                contentType: optimizedFile.type,
-            });
+            const formData = new FormData();
+            formData.append('file', optimizedFile);
+            const result = await uploadSanityAssetAction(formData);
 
-            if (asset?._id && asset?.url) {
-                updateAttributes({ [`src${slot}`]: asset.url, [`assetId${slot}`]: asset._id });
+            if (result.success && result.asset) {
+                updateAttributes({ [`src${slot}`]: result.asset.url, [`assetId${slot}`]: result.asset._id });
                 toast.success('تم رفع الصورة بنجاح.', 'left');
-            } else { throw new Error('فشل الرفع'); }
+            } else { throw new Error(result.error || 'فشل الرفع'); }
         } catch (error: any) { toast.error(error.message, 'left'); }
     }, [updateAttributes, toast, editor.storage.uploadQuality]);
 
@@ -79,6 +74,4 @@ export const TwoImageGridComponent = ({ node, updateAttributes, editor, getPos }
             </div>
         </NodeViewWrapper>
     );
-};
-
-
+};
\ No newline at end of file
diff --git a/app/studio/[contentType]/[id]/metadata/MainImageInput.tsx b/app/studio/[contentType]/[id]/metadata/MainImageInput.tsx
index e7c0e2b..ede77a1 100644
--- a/app/studio/[contentType]/[id]/metadata/MainImageInput.tsx
+++ b/app/studio/[contentType]/[id]/metadata/MainImageInput.tsx
@@ -6,7 +6,7 @@ import { motion, AnimatePresence } from 'framer-motion';
 import Image from 'next/image';
 import { useToast } from '@/lib/toastStore';
 import { optimizeImageForUpload, UploadQuality } from '@/lib/image-optimizer';
-import { clientAssetUploader } from '@/lib/sanity.client';
+import { uploadSanityAssetAction } from '../../../actions';
 import avatarStyles from '../../../../components/ProfileEditForm.module.css';
 
 const UploadIcon = () => ( <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24" strokeWidth={1.5} stroke="currentColor" width="24" height="24"> <path strokeLinecap="round" strokeLinejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5" /> </svg> );
@@ -44,24 +44,21 @@ export function MainImageInput({ currentAssetId, currentAssetUrl, onImageChange,
         startUpload(async () => {
             try {
                 toast.info('جار تحسين الصورة...', 'left');
-                // THE FIX: Get file and final quality from optimizer
                 const { file: optimizedFile, finalQuality } = await optimizeImageForUpload(file, uploadQuality);
                 const localUrl = URL.createObjectURL(optimizedFile);
                 setPreviewUrl(localUrl);
 
-                // THE FIX: Use final size and quality in the toast
                 toast.info(`جار رفع الصورة (${formatFileSize(optimizedFile.size)} @ ${Math.round(finalQuality * 100)}%)...`, 'left');
                 
-                const asset = await clientAssetUploader.assets.upload('image', optimizedFile, {
-                    filename: optimizedFile.name,
-                    contentType: optimizedFile.type,
-                });
+                const formData = new FormData();
+                formData.append('file', optimizedFile);
+                const result = await uploadSanityAssetAction(formData);
                 
-                if (asset?._id && asset?.url) {
-                    onImageChange(asset._id, asset.url);
+                if (result.success && result.asset) {
+                    onImageChange(result.asset._id, result.asset.url);
                     toast.success('تم رفع الصورة الرئيسية بنجاح.', 'left');
                 } else {
-                    throw new Error('فشل رفع الصورة إلى Sanity.');
+                    throw new Error(result.error || 'فشل رفع الصورة إلى Sanity.');
                 }
             } catch (error: any) {
                 setPreviewUrl(currentAssetUrl);
@@ -71,7 +68,6 @@ export function MainImageInput({ currentAssetId, currentAssetUrl, onImageChange,
         });
     }, [onImageChange, toast, currentAssetUrl, currentAssetId, uploadQuality]);
     
-    // ... (rest of the component is the same)
     const handleDrop = useCallback((e: React.DragEvent<HTMLDivElement>) => {
         e.preventDefault();
         setIsDragging(false);
@@ -136,6 +132,4 @@ export function MainImageInput({ currentAssetId, currentAssetUrl, onImageChange,
             )}
         </>
     );
-}
-
-
+}
\ No newline at end of file
diff --git a/app/studio/actions.ts b/app/studio/actions.ts
index f858169..7f4f5d2 100644
--- a/app/studio/actions.ts
+++ b/app/studio/actions.ts
@@ -309,4 +309,30 @@ export async function validateSlugAction(slug: string, docId: string): Promise<{
     }
 }
 
+export async function uploadSanityAssetAction(formData: FormData): Promise<{ success: boolean; asset?: { _id: string; url: string }; error?: string }> {
+    const session = await getServerSession(authOptions);
+    const userRoles = session?.user?.roles || [];
+    const isCreatorOrAdmin = userRoles.some((role: string) =>
+      ['DIRECTOR', 'ADMIN', 'REVIEWER', 'AUTHOR', 'REPORTER', 'DESIGNER'].includes(role)
+    );
 
+    if (!session?.user?.id || !isCreatorOrAdmin) {
+        return { success: false, error: 'Unauthorized' };
+    }
+    
+    const file = formData.get('file') as File | null;
+    if (!file) {
+        return { success: false, error: 'No file provided' };
+    }
+
+    try {
+        const asset = await sanityWriteClient.assets.upload('image', file, {
+            filename: file.name,
+            contentType: file.type,
+        });
+        return { success: true, asset: { _id: asset._id, url: asset.url } };
+    } catch (error: any) {
+        console.error("Sanity asset upload failed:", error);
+        return { success: false, error: 'Failed to upload asset to Sanity.' };
+    }
+}
\ No newline at end of file
diff --git a/app/studio/director/actions.ts b/app/studio/director/actions.ts
index 386ca08..5f7be03 100644
--- a/app/studio/director/actions.ts
+++ b/app/studio/director/actions.ts
@@ -5,7 +5,7 @@
 import { getServerSession } from "next-auth/next";
 import { authOptions } from "@/app/lib/authOptions";
 import prisma from "@/lib/prisma";
-import { revalidatePath } from "next/cache";
+import { revalidatePath, revalidateTag } from "next/cache";
 import { Role } from "@prisma/client";
 import { sanityWriteClient } from "@/lib/sanity.server";
 
@@ -79,6 +79,10 @@ export async function updateUserRolesAction(userId: string, roleIds: number[]) {
             }
         }
         // --- END NEW LOGIC ---
+        
+        // --- ADDED TAG REVALIDATION ---
+        revalidateTag('enriched-creators', '');
+        revalidateTag('enriched-creator-details', '');
 
         revalidatePath('/studio/director');
         revalidatePath(`/profile/${userId}`);
@@ -91,6 +95,4 @@ export async function updateUserRolesAction(userId: string, roleIds: number[]) {
         console.error("Failed to update user roles:", error);
         return { success: false, message: "A database error occurred." };
     }
-}
-
-
+}
\ No newline at end of file
diff --git a/app/template.tsx b/app/template.tsx
index d491dbe..79c93f8 100644
--- a/app/template.tsx
+++ b/app/template.tsx
@@ -1,17 +1,21 @@
 'use client';
 
-import { motion } from 'framer-motion';
+import { motion, AnimatePresence } from 'framer-motion';
+import { usePathname } from 'next/navigation';
 
 export default function Template({ children }: { children: React.ReactNode }) {
+  const pathname = usePathname();
   return (
-    <motion.div
-      initial={{ y: 20, opacity: 0 }}
-      animate={{ y: 0, opacity: 1 }}
-      transition={{ ease: 'easeInOut' as const, duration: 0.75 }}
-    >
-      {children}
-    </motion.div>
+    <AnimatePresence mode="wait">
+      <motion.div
+        key={pathname}
+        initial={{ opacity: 0 }}
+        animate={{ opacity: 1 }}
+        exit={{ opacity: 0 }}
+        transition={{ duration: 0.2, ease: 'easeInOut' }}
+      >
+        {children}
+      </motion.div>
+    </AnimatePresence>
   );
-}
-
-
+}
\ No newline at end of file
diff --git a/components/ArticleCard.module.css b/components/ArticleCard.module.css
index 87bc5c9..d9fa024 100644
--- a/components/ArticleCard.module.css
+++ b/components/ArticleCard.module.css
@@ -1,18 +1,9 @@
 /* components/ArticleCard.module.css */
 
 .livingCardWrapper {
-    transform-style: preserve-3d;
     height: 100%;
 }
 
-/* This is the main link now, covering the whole card */
-.cardLink {
-    display: flex;
-    flex-direction: column;
-    height: 100%;
-    text-decoration: none;
-}
-
 .articleCard {
     background-color: var(--bg-secondary);
     border-radius: 8px;
@@ -21,7 +12,6 @@
     flex-direction: column;
     height: 100%;
     border: 1px solid var(--border-color);
-    transform-style: preserve-3d;
     will-change: transform;
     transition: box-shadow 0.4s ease-out, border-color 0.4s ease-out;
 }
@@ -58,7 +48,6 @@
     border-radius: 4px;
     box-shadow: 0 0 10px color-mix(in srgb, var(--accent) 50%, transparent);
     z-index: 2;
-    /* REMOVED transformZ, replaced with hover effect */
     opacity: 0;
     transform: translateY(10px);
     transition: opacity 0.3s ease, transform 0.3s ease;
@@ -70,7 +59,6 @@
 
 .livingCardWrapper:hover .score {
     opacity: 1;
-    /* REMOVED transformZ */
     transform: translateY(0);
 }
 
@@ -80,7 +68,6 @@
     flex-direction: column;
     flex-grow: 1;
     min-height: 0;
-    /* REMOVED transformZ */
     text-align: right;
     transition: transform 0.4s ease; /* Added for subtle hover effect */
 }
@@ -97,7 +84,7 @@
 }
 
 /* Make the title change color on card hover */
-.cardLink:hover .cardTitleLink h3 {
+.cardTitleLink:hover h3 {
     color: var(--accent);
 }
 
diff --git a/components/ArticleCard.tsx b/components/ArticleCard.tsx
index d37c9bf..0f9ca75 100644
--- a/components/ArticleCard.tsx
+++ b/components/ArticleCard.tsx
@@ -19,10 +19,10 @@ type ArticleCardProps = {
     article: CardProps & { width?: number; height?: number; mainImageRef?: any; };
     layoutIdPrefix: string;
     isPriority?: boolean;
-    isArticle?: boolean;
+    disableLivingEffect?: boolean; 
 };
 
-const ArticleCardComponent = ({ article, layoutIdPrefix, isPriority = false, isArticle = false }: ArticleCardProps) => {
+const ArticleCardComponent = ({ article, layoutIdPrefix, isPriority = false, disableLivingEffect = false }: ArticleCardProps) => {
     const router = useRouter();
     const setPrefix = useLayoutIdStore((state) => state.setPrefix); 
     const { livingCardRef, livingCardAnimation } = useLivingCard();
@@ -42,11 +42,9 @@ const ArticleCardComponent = ({ article, layoutIdPrefix, isPriority = false, isA
     const linkPath = `${getLinkBasePath()}${article.slug}`;
     
     const handleClick = (e: React.MouseEvent) => {
-        // If the original click target or its parent is an interactive element (a nested link or button), let it handle the event.
         if ((e.target as HTMLElement).closest('a, button, [role="button"]')) {
             return;
         }
-
         e.preventDefault();
         setPrefix(layoutIdPrefix);
         router.push(linkPath, { scroll: false });
@@ -61,55 +59,59 @@ const ArticleCardComponent = ({ article, layoutIdPrefix, isPriority = false, isA
     const imageSource = article.imageUrl;
     if (!imageSource) return null;
 
+    const wrapperProps = disableLivingEffect ? {} : {
+        ref: livingCardRef,
+        onMouseMove: livingCardAnimation.onMouseMove,
+        onMouseEnter: () => { livingCardAnimation.onHoverStart(); handleMouseEnter(); },
+        onMouseLeave: livingCardAnimation.onHoverEnd,
+        style: { ...livingCardAnimation.style, cursor: 'pointer' }
+    };
+
     return (
         <motion.div
-            ref={livingCardRef}
-            onMouseMove={livingCardAnimation.onMouseMove}
-            onMouseEnter={() => { livingCardAnimation.onHoverStart(); handleMouseEnter(); }}
-            onMouseLeave={livingCardAnimation.onHoverEnd}
+            onClick={handleClick}
             className={styles.livingCardWrapper}
-            style={livingCardAnimation.style}
+            {...wrapperProps}
+            style={disableLivingEffect ? { cursor: 'pointer', ...wrapperProps.style } : wrapperProps.style}
         >
-            <Link href={linkPath} onClick={handleClick} className={`${styles.cardLink} no-underline`}>
-                <motion.div
-                    layoutId={`${layoutIdPrefix}-card-container-${article.id}`}
-                    className={styles.articleCard}
-                >
-                    <motion.div className={styles.imageContainer} layoutId={`${layoutIdPrefix}-card-image-${article.id}`}>
-                        {hasScore && ( <motion.div className={styles.score}>{article.score!.toFixed(1)}</motion.div> )}
-                        <Image 
-                            loader={sanityLoader}
-                            src={imageSource}
-                            alt={article.title}
-                            width={800} // Default width, loader will override
-                            height={450} // Default height, loader will override
-                            sizes="(max-width: 768px) 90vw, (max-width: 1200px) 45vw, 350px"
-                            className={styles.cardImage}
-                            style={{ objectFit: 'cover' }}
-                            placeholder="blur" 
-                            blurDataURL={article.blurDataURL}
-                            priority={isPriority}
-                        />
-                    </motion.div>
-                    <motion.div className={styles.cardContent}>
-                        <div className={styles.cardTitleLink}> {/* Re-purposed class for styling */}
-                            <motion.h3 layoutId={`${layoutIdPrefix}-card-title-${article.id}`}>{article.title}</motion.h3>
-                        </div>
-                        <div className={styles.cardMetadata}>
-                            <CreatorCredit label="بقلم" creators={article.authors} />
-                            {article.date && (
-                                <p className={styles.cardDate}>
-                                    <Calendar03Icon className={styles.metadataIcon} />
-                                    <span>{article.date}</span>
-                                </p>
-                            )}
-                        </div>
-                        <div className={styles.tagContainer}>
-                            <TagLinks tags={article.tags.map(tag => tag.title)} small={true} />
-                        </div>
-                    </motion.div>
+            <motion.div
+                layoutId={`${layoutIdPrefix}-card-container-${article.legacyId}`}
+                className={styles.articleCard}
+            >
+                <motion.div className={styles.imageContainer} layoutId={`${layoutIdPrefix}-card-image-${article.legacyId}`}>
+                    {hasScore && ( <motion.div className={styles.score}>{article.score!.toFixed(1)}</motion.div> )}
+                    <Image 
+                        loader={sanityLoader}
+                        src={imageSource}
+                        alt={article.title}
+                        width={800}
+                        height={450}
+                        sizes="(max-width: 768px) 90vw, (max-width: 1200px) 45vw, 350px"
+                        className={styles.cardImage}
+                        style={{ objectFit: 'cover' }}
+                        placeholder="blur" 
+                        blurDataURL={article.blurDataURL}
+                        priority={isPriority}
+                    />
+                </motion.div>
+                <motion.div className={styles.cardContent}>
+                    <div className={styles.cardTitleLink}>
+                        <motion.h3 layoutId={`${layoutIdPrefix}-card-title-${article.legacyId}`}>{article.title}</motion.h3>
+                    </div>
+                    <div className={styles.cardMetadata}>
+                        <CreatorCredit label="بقلم" creators={article.authors} />
+                        {article.date && (
+                            <p className={styles.cardDate}>
+                                <Calendar03Icon className={styles.metadataIcon} />
+                                <span>{article.date}</span>
+                            </p>
+                        )}
+                    </div>
+                    <div className={styles.tagContainer}>
+                        <TagLinks tags={article.tags.map(tag => tag.title)} small={true} />
+                    </div>
                 </motion.div>
-            </Link>
+            </motion.div>
         </motion.div>
     );
 };
diff --git a/components/ArticleGrid.tsx b/components/ArticleGrid.tsx
deleted file mode 100644
index a59ea23..0000000
--- a/components/ArticleGrid.tsx
+++ /dev/null
@@ -1,58 +0,0 @@
-// components/ArticleGrid.tsx
-'use client';
-
-import { motion, AnimatePresence } from 'framer-motion';
-import ArticleCard from './ArticleCard';
-import { CardProps } from '@/types';
-
-const kineticCardVariant = {
-    hidden: { 
-        opacity: 0, 
-        y: 60, 
-        rotateX: -20,
-        skewY: 5,
-        clipPath: "inset(100% 0% 0% 0%)"
-    },
-    visible: { 
-        opacity: 1, 
-        y: 0, 
-        rotateX: 0,
-        skewY: 0,
-        clipPath: "inset(0% 0% 0% 0%)",
-        transition: { 
-            duration: 0.8, 
-            ease: [0.22, 1, 0.36, 1] as const,
-            y: { type: 'spring', stiffness: 120, damping: 20 }
-        }
-    },
-    exit: { 
-        opacity: 0, 
-        y: -30, 
-        transition: { duration: 0.3 } 
-    }
-};
-
-export default function ArticleGrid({ articles }: { articles: CardProps[] }) {
-  return (
-    <motion.div layout className="content-grid" style={{ transformStyle: 'preserve-3d', perspective: '1200px' }}>
-      <AnimatePresence>
-        {articles.map((article, index) => (
-          <motion.div
-            key={article.id}
-            layout
-            variants={kineticCardVariant}
-            // initial, animate, exit are inherited from parent ContentBlock
-            transition={{ type: 'spring' as const, stiffness: 400, damping: 30 }}
-            style={{ height: '100%' }}
-          >
-            <ArticleCard
-              article={article}
-              layoutIdPrefix="articles-grid"
-              isPriority={index < 3}
-            />
-          </motion.div>
-        ))}
-      </AnimatePresence>
-    </motion.div>
-  );
-}
\ No newline at end of file
diff --git a/components/DigitalAtriumHomePage.module.css b/components/DigitalAtriumHomePage.module.css
index 8df1ecd..01502e5 100644
--- a/components/DigitalAtriumHomePage.module.css
+++ b/components/DigitalAtriumHomePage.module.css
@@ -9,6 +9,7 @@
     background-color: var(--bg-secondary);
     padding-top: 4rem;
     margin-bottom: 5rem;
+    overflow-x: clip; /* THE DEFINITIVE FIX: Contain overflow here */
 }
 
 .atriumMainContent {
@@ -36,6 +37,4 @@
     .atriumMainContent {
         padding-bottom: 4rem;
     }
-}
-
-
+}
\ No newline at end of file
diff --git a/components/FilteredReviewsGrid.tsx b/components/FilteredReviewsGrid.tsx
deleted file mode 100644
index 3597c44..0000000
--- a/components/FilteredReviewsGrid.tsx
+++ /dev/null
@@ -1,60 +0,0 @@
-// components/FilteredReviewsGrid.tsx
-'use client';
-
-import { motion, AnimatePresence } from 'framer-motion';
-import ArticleCard from './ArticleCard';
-import type { CardProps } from '@/types'; 
-
-const kineticCardVariant = {
-    hidden: { 
-        opacity: 0, 
-        y: 60, 
-        rotateX: -20,
-        skewY: 5,
-        clipPath: "inset(100% 0% 0% 0%)"
-    },
-    visible: { 
-        opacity: 1, 
-        y: 0, 
-        rotateX: 0,
-        skewY: 0,
-        clipPath: "inset(0% 0% 0% 0%)",
-        transition: { 
-            duration: 0.8, 
-            ease: [0.22, 1, 0.36, 1] as const,
-            y: { type: 'spring', stiffness: 120, damping: 20 }
-        }
-    },
-    exit: { 
-        opacity: 0, 
-        y: -30, 
-        transition: { duration: 0.3 } 
-    }
-};
-
-export default function FilteredReviewsGrid({ reviews }: { reviews: CardProps[] }) {
-  return (
-    <motion.div layout className="content-grid" style={{ transformStyle: 'preserve-3d', perspective: '1200px' }}>
-      <AnimatePresence>
-        {reviews.map((review, index) => (
-          <motion.div
-            key={review.id}
-            layout
-            variants={kineticCardVariant}
-            initial="hidden"
-            animate="visible"
-            exit="exit"
-            transition={{ type: 'spring' as const, stiffness: 400, damping: 30 }}
-            style={{ height: '100%' }}
-          >
-            <ArticleCard
-              article={review}
-              layoutIdPrefix="reviews"
-              isPriority={index < 3}
-            />
-          </motion.div>
-        ))}
-      </AnimatePresence>
-    </motion.div>
-  );
-}
\ No newline at end of file
diff --git a/components/HorizontalShowcase.tsx b/components/HorizontalShowcase.tsx
index 94bb1d5..c73adfe 100644
--- a/components/HorizontalShowcase.tsx
+++ b/components/HorizontalShowcase.tsx
@@ -5,7 +5,9 @@
 import { useRef, useEffect, useState, useCallback } from 'react';
 import { motion, AnimatePresence } from 'framer-motion';
 import Image from 'next/image';
-import Link from 'next/link';
+import { useRouter } from 'next/navigation';
+import { useLayoutIdStore } from '@/lib/layoutIdStore';
+import { CardProps } from '@/types';
 import styles from './HorizontalShowcase.module.css';
 
 const ArrowIcon = ({ direction = 'right' }: { direction?: 'left' | 'right' }) => (
@@ -14,42 +16,50 @@ const ArrowIcon = ({ direction = 'right' }: { direction?: 'left' | 'right' }) =>
   </svg>
 );
 
-const ShowcaseCard = ({ article, isActive }: { article: any, isActive: boolean }) => {
+const ShowcaseCard = ({ article, isActive }: { article: CardProps, isActive: boolean }) => {
+  const router = useRouter();
+  const setPrefix = useLayoutIdStore((state) => state.setPrefix);
+  const layoutIdPrefix = "articles-showcase";
   
+  const handleClick = (e: React.MouseEvent) => {
+    e.preventDefault();
+    setPrefix(layoutIdPrefix);
+    router.push(`/articles/${article.slug}`, { scroll: false });
+  };
+
   const imageSource = article.imageUrl;
   if (!imageSource) return null;
 
   return (
     <motion.div
       className={styles.showcaseCardContainer}
-      animate={{ 
-        scale: isActive ? 1 : 0.85, 
-        opacity: isActive ? 1 : 0.7,
-      }}
+      animate={{ scale: isActive ? 1 : 0.85, opacity: isActive ? 1 : 0.7 }}
       transition={{ type: 'spring', stiffness: 300, damping: 30 }}
     >
-      <Link href={`/articles/${article.slug}`} className={`no-underline ${styles.showcaseCardLink}`} tabIndex={isActive ? 0 : -1} draggable="false">
-        <div className={styles.showcaseCardImageWrapper}>
+      <motion.div
+        layoutId={`${layoutIdPrefix}-card-container-${article.legacyId}`}
+        onClick={handleClick}
+        className={`no-underline ${styles.showcaseCardLink}`}
+        draggable="false"
+        style={{ cursor: 'pointer' }}
+      >
+        <motion.div layoutId={`${layoutIdPrefix}-card-image-${article.legacyId}`} className={styles.showcaseCardImageWrapper}>
           <Image 
-            src={imageSource} 
-            alt={article.title} 
-            fill 
-            sizes="60vw"
-            style={{ objectFit: 'cover' }}
-            className={styles.showcaseCardImage}
+            src={imageSource} alt={article.title} fill sizes="60vw"
+            style={{ objectFit: 'cover' }} className={styles.showcaseCardImage}
             draggable="false"
           />
-        </div>
+        </motion.div>
         <div className={styles.showcaseCardContent}>
-          <h3 className={styles.showcaseCardTitle}>{article.title}</h3>
+          <motion.h3 layoutId={`${layoutIdPrefix}-card-title-${article.legacyId}`} className={styles.showcaseCardTitle}>{article.title}</motion.h3>
           <p className={styles.showcaseCardGame}>{article.game}</p>
         </div>
-      </Link>
+      </motion.div>
     </motion.div>
   );
 };
 
-export default function HorizontalShowcase({ articles, onActiveIndexChange }: { articles: any[], onActiveIndexChange: (index: number) => void }) {
+export default function HorizontalShowcase({ articles, onActiveIndexChange }: { articles: CardProps[], onActiveIndexChange: (index: number) => void }) {
   const [activeIndex, setActiveIndex] = useState(0);
   const [xOffset, setXOffset] = useState(0);
   const [isCalculated, setIsCalculated] = useState(false);
@@ -59,48 +69,29 @@ export default function HorizontalShowcase({ articles, onActiveIndexChange }: {
 
   const calculateAndGoToIndex = useCallback((index: number) => {
     if (!wrapperRef.current || !cardRefs.current[index]) return;
-
     const wrapperWidth = wrapperRef.current.offsetWidth;
     const targetCard = cardRefs.current[index]!;
     const targetOffsetLeft = targetCard.offsetLeft;
     const targetWidth = targetCard.offsetWidth;
-    
     const newXOffset = (wrapperWidth / 2) - targetOffsetLeft - (targetWidth / 2);
-    
     setXOffset(newXOffset);
     setActiveIndex(index);
     onActiveIndexChange(index);
     setIsCalculated(true);
   }, [onActiveIndexChange]);
 
-  // Recalculate on resize
   useEffect(() => {
     const handleResize = () => calculateAndGoToIndex(activeIndex);
     window.addEventListener('resize', handleResize);
-    // Initial calculation after a short delay to ensure layout is stable
     const timeoutId = setTimeout(() => handleResize(), 100); 
-    
-    return () => {
-      window.removeEventListener('resize', handleResize);
-      clearTimeout(timeoutId);
-    };
+    return () => { window.removeEventListener('resize', handleResize); clearTimeout(timeoutId); };
   }, [activeIndex, calculateAndGoToIndex]);
   
-  const handleNext = useCallback(() => {
-    const nextIndex = Math.min(activeIndex + 1, articles.length - 1);
-    calculateAndGoToIndex(nextIndex);
-  }, [activeIndex, articles.length, calculateAndGoToIndex]);
-
-  const handlePrev = useCallback(() => {
-    const prevIndex = Math.max(activeIndex - 1, 0);
-    calculateAndGoToIndex(prevIndex);
-  }, [activeIndex, calculateAndGoToIndex]);
+  const handleNext = useCallback(() => { const nextIndex = Math.min(activeIndex + 1, articles.length - 1); calculateAndGoToIndex(nextIndex); }, [activeIndex, articles.length, calculateAndGoToIndex]);
+  const handlePrev = useCallback(() => { const prevIndex = Math.max(activeIndex - 1, 0); calculateAndGoToIndex(prevIndex); }, [activeIndex, calculateAndGoToIndex]);
   
   useEffect(() => {
-    const handleKeyDown = (event: KeyboardEvent) => {
-      if (event.key === 'ArrowRight') handleNext();
-      if (event.key === 'ArrowLeft') handlePrev();
-    };
+    const handleKeyDown = (event: KeyboardEvent) => { if (event.key === 'ArrowRight') handleNext(); if (event.key === 'ArrowLeft') handlePrev(); };
     window.addEventListener('keydown', handleKeyDown);
     return () => window.removeEventListener('keydown', handleKeyDown);
   }, [handleNext, handlePrev]);
@@ -108,15 +99,9 @@ export default function HorizontalShowcase({ articles, onActiveIndexChange }: {
   const onDragEnd = (event: any, { offset, velocity }: any) => {
     const swipeConfidenceThreshold = 10000;
     const swipePower = Math.abs(offset.x) * velocity.x;
-
-    if (swipePower < -swipeConfidenceThreshold) {
-      handleNext();
-    } else if (swipePower > swipeConfidenceThreshold) {
-      handlePrev();
-    } else {
-      // Snap back to the current active index if not a strong swipe
-      calculateAndGoToIndex(activeIndex);
-    }
+    if (swipePower < -swipeConfidenceThreshold) { handleNext(); } 
+    else if (swipePower > swipeConfidenceThreshold) { handlePrev(); } 
+    else { calculateAndGoToIndex(activeIndex); }
   };
 
   return (
@@ -138,35 +123,17 @@ export default function HorizontalShowcase({ articles, onActiveIndexChange }: {
 
       <motion.div
         className={styles.horizontalShowcaseList}
-        drag="x"
-        dragConstraints={{ left: 0, right: 0 }}
-        dragElastic={0.1}
-        onDragEnd={onDragEnd}
+        drag="x" dragConstraints={{ left: 0, right: 0 }} dragElastic={0.1} onDragEnd={onDragEnd}
         initial={{ opacity: 0 }}
-        animate={{ 
-          x: xOffset,
-          opacity: isCalculated ? 1 : 0
-        }}
-        transition={{ 
-          x: { type: 'spring', stiffness: 300, damping: 50 },
-          opacity: { duration: 0.5 }
-        }}
+        animate={{ x: xOffset, opacity: isCalculated ? 1 : 0 }}
+        transition={{ x: { type: 'spring', stiffness: 300, damping: 50 }, opacity: { duration: 0.5 } }}
       >
         {articles.map((article, index) => (
-          <div 
-            key={article.id} 
-            ref={(el) => { cardRefs.current[index] = el; }}
-            className={styles.showcaseItemWrapper}
-          >
-            <ShowcaseCard
-              article={{...article, isLeft: index < activeIndex}}
-              isActive={activeIndex === index}
-            />
+          <div key={article.id} ref={(el) => { cardRefs.current[index] = el; }} className={styles.showcaseItemWrapper}>
+            <ShowcaseCard article={article} isActive={activeIndex === index} />
           </div>
         ))}
       </motion.div>
     </div>
   );
-}
-
-
+}
\ No newline at end of file
diff --git a/components/HubPageClient.tsx b/components/HubPageClient.tsx
index 5137e49..2745602 100644
--- a/components/HubPageClient.tsx
+++ b/components/HubPageClient.tsx
@@ -19,6 +19,18 @@ interface HubPageClientProps {
 }
 
 export default function HubPageClient({ initialItems, hubTitle, hubType, headerAction }: HubPageClientProps) {
+    // THE DEFINITIVE FIX: Safeguard against empty initial items.
+    if (!initialItems || initialItems.length === 0) {
+        return (
+            <div className="container page-container">
+                <h1 className="page-title">{hubType}: &quot;{hubTitle}&quot;</h1>
+                <p style={{textAlign: 'center', color: 'var(--text-secondary)', fontSize: '1.8rem', maxWidth: '600px', margin: '0 auto'}}>
+                    لم يُنشر أي محتوى يطابق هذا المحور بعد. الأرشيف يترقب المستجدات.
+                </p>
+            </div>
+        );
+    }
+    
     const [activeTypeFilter, setActiveTypeFilter] = useState<HubTypeFilter>('all');
     const [activeSort, setActiveSort] = useState<HubSortOrder>('latest');
     const [engagementScores, setEngagementScores] = useState<Map<number, number>>(new Map());
@@ -108,6 +120,8 @@ export default function HubPageClient({ initialItems, hubTitle, hubType, headerA
         </div>
     );
 
+    const layoutIdPrefix = `hub-${hubType}-${hubTitle.replace(/\s+/g, '-')}`;
+
     return (
         <div className={styles.hubPageContainer}>
             {heroContent}
@@ -125,27 +139,31 @@ export default function HubPageClient({ initialItems, hubTitle, hubType, headerA
                     />
                 </motion.div>
                 
-                <motion.div layout className="content-grid" style={{ paddingBottom: '6rem' }}>
+                <motion.div 
+                    layout 
+                    className="content-grid" 
+                    style={{ paddingBottom: '6rem' }}
+                >
                     <AnimatePresence>
                         {filteredAndSortedItems.length > 0 ? (
                             filteredAndSortedItems.map(item => (
                                 <motion.div
                                     key={item.id}
                                     layout
-                                    initial={{ opacity: 0, scale: 0.8 }}
-                                    animate={{ opacity: 1, scale: 1 }}
-                                    exit={{ opacity: 0, scale: 0.8 }}
+                                    initial={{ opacity: 0 }}
+                                    animate={{ opacity: 1 }}
+                                    exit={{ opacity: 0 }}
                                     transition={{ type: 'spring' as const, stiffness: 250, damping: 25 }}
                                     style={{ height: '100%' }}
                                 >
                                     <ArticleCard
                                         article={item}
-                                        layoutIdPrefix={`${hubType}-${hubTitle}`}
+                                        layoutIdPrefix={layoutIdPrefix}
                                     />
                                 </motion.div>
                             ))
                         ) : (
-                             <motion.div 
+                                <motion.div 
                                 initial={{ opacity: 0 }} animate={{ opacity: 1 }}
                                 style={{gridColumn: '1 / -1', textAlign: 'center', padding: '4rem 0', color: 'var(--text-secondary)'}}
                             >
diff --git a/components/Navbar.tsx b/components/Navbar.tsx
index 15814ab..a40ca82 100644
--- a/components/Navbar.tsx
+++ b/components/Navbar.tsx
@@ -31,7 +31,7 @@ export const HamburgerIcon = ({ isOpen }: { isOpen: boolean }) => (
 );
 
 const ConstellationIcon = (props: React.SVGProps<SVGSVGElement>) => (
-    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" role="img" color="currentColor" {...props} style={{ transform: 'translate(1px, 2px)' }}>
+    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24" fill="none" role="img" color="currentColor" {...props} style={{ transform: 'translate(1px, 2px)' }}>
         <path d="M12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14Z" stroke="currentColor" strokeWidth="1.5" strokeLinejoin="round"></path>
         <path d="M20 18C21.1046 18 22 17.1046 22 16C22 14.8954 21.1046 14 20 14C18.8954 14 18 14.8954 18 16C18 17.1046 18.8954 18 20 18Z" stroke="currentColor" strokeWidth="1.5" strokeLinejoin="round"></path>
         <path d="M11 22C12.1046 22 13 21.1046 13 20C13 18.8954 12.1046 18 11 18C9.89543 18 9 18.8954 9 20C9 21.1046 9.89543 22 11 22Z" stroke="currentColor" strokeWidth="1.5" strokeLinejoin="round"></path>
@@ -42,7 +42,7 @@ const ConstellationIcon = (props: React.SVGProps<SVGSVGElement>) => (
 );
 
 const CelestialAlmanacIcon = (props: React.SVGProps<SVGSVGElement>) => (
-    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" color="currentColor" {...props}>
+    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24" fill="none" color="currentColor" {...props}>
       <path fillRule="evenodd" clipRule="evenodd" d="M18 1.25C19.5188 1.25 20.75 2.48122 20.75 4V4.23047C20.75 5.5687 20.1855 6.84489 19.1953 7.74512L15.7441 10.8818C15.4292 11.1681 15.25 11.5744 15.25 12C15.25 12.4256 15.4292 12.8319 15.7441 13.1182L19.1953 16.2549C20.1855 17.1551 20.75 18.4313 20.75 19.7695V20C20.75 21.5188 19.5188 22.75 18 22.75H6C4.48122 22.75 3.25 21.5188 3.25 20V19.7695C3.25 18.4313 3.81451 17.1551 4.80469 16.2549L8.25586 13.1182C8.57077 12.8319 8.75 12.4256 8.75 12C8.75 11.5744 8.57077 11.1681 8.25586 10.8818L4.80469 7.74512C3.81451 6.84489 3.25 5.5687 3.25 4.23047V4C3.25 2.48122 4.48122 1.25 6 1.25H18Z" fill="currentColor"/>
       <path d="M16.5 19.5001V17.0001H14C13.4477 17.0001 13 16.5523 13 16.0001C13 15.4478 13.4477 15.0001 14 15.0001H16.5V12.5001C16.5 11.9478 16.9477 11.5001 17.5 11.5001C18.0523 11.5001 18.5 11.9478 18.5 12.5001V15.0001H21C21.5523 15.0001 22 15.4478 22 16.0001C22 16.5523 21.5523 17.0001 21 17.0001H18.5V19.5001C18.5 20.0523 18.0523 20.5001 17.5 20.5001C16.9477 20.5001 16.5 20.0523 16.5 19.5001Z" fill="none" stroke="var(--bg-primary)" strokeWidth="2.5"/>
       <path d="M16.5 19.5001V17.0001H14C13.4477 17.0001 13 16.5523 13 16.0001C13 15.4478 13.4477 15.0001 14 15.0001H16.5V12.5001C16.5 11.9478 16.9477 11.5001 17.5 11.5001C18.0523 11.5001 18.5 11.9478 18.5 12.5001V15.0001H21C21.5523 15.0001 22 15.4478 22 16.0001C22 16.5523 21.5523 17.0001 21 17.0001H18.5V19.5001C18.5 20.0523 18.0523 20.5001 17.5 20.5001C16.9477 20.5001 16.5 20.0523 16.5 19.5001Z" fill="currentColor"/>
@@ -99,7 +99,7 @@ const OrbitalNavItem = ({ item, angle, radius, isActive, onClick }: { item: type
 };
 
 const AnimatedPreviewIcon = () => (
-    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
+    <svg width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
         <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
         <motion.circle 
             cx="12" cy="12" r="3"
@@ -154,8 +154,6 @@ const Navbar = () => {
     const [loadSearch, setLoadSearch] = useState(false);
     const pathname = usePathname();
 
-    const isEditorDashboard = pathname === '/studio';
-
     useBodyClass('mobile-menu-open', isMobileMenuOpen);
 
     const openSearch = () => {
@@ -184,11 +182,6 @@ const Navbar = () => {
                         </nav>
                         <div className={styles.navControls}>
                             {isEditorActive && <EditorPreviewButton />}
-                            {isEditorDashboard && (
-                                <Link href="/studio" className="no-underline" title="Return to Studio Dashboard">
-                                    <StudioIcon style={{ color: 'var(--text-primary)', width: 24, height: 24 }} />
-                                </Link>
-                            )}
                             <ThemeToggle />
                             <UserProfile />
                             <button className={styles.navSearch} onClick={openSearch} aria-label="فتح البحث">
@@ -208,11 +201,6 @@ const Navbar = () => {
                                     onQualityChange={setBlockUploadQuality}
                                     isMobile={true}
                                 />
-                            )}
-                            {isEditorDashboard && (
-                                <Link href="/studio" className="no-underline" title="Return to Studio Dashboard">
-                                   <StudioIcon style={{ color: 'var(--text-primary)', width: 22, height: 22 }} />
-                               </Link>
                             )}
                              <button className={styles.navSearch} onClick={openSearch} aria-label="فتح البحث">
                                 <SearchIcon />
diff --git a/components/PaginatedCarousel.tsx b/components/PaginatedCarousel.tsx
index bc8643f..1cc95d1 100644
--- a/components/PaginatedCarousel.tsx
+++ b/components/PaginatedCarousel.tsx
@@ -1,18 +1,70 @@
-// components/PaginatedCarousel.tsx
+// components/homepage/PaginatedLatestArticles.tsx
 'use client';
 
-import { useState, useEffect, useRef } from 'react';
+import React, { useState, useEffect, useRef, memo } from 'react';
 import { motion, AnimatePresence } from 'framer-motion';
-import ArticleCard from './ArticleCard';
-import styles from './PaginatedCarousel.module.css'; // <-- IMPORT MODULE
+import Image from 'next/image';
+import { CardProps } from '@/types';
+import CreatorCredit from '@/components/CreatorCredit';
+import { Calendar03Icon } from '@/components/icons/index';
+import styles from './PaginatedLatestArticles.module.css';
+import feedStyles from './feed/Feed.module.css';
+import { useRouter } from 'next/navigation';
+import { useLayoutIdStore } from '@/lib/layoutIdStore';
 
-type PaginatedCarouselProps = {
-    items: any[];
-    itemsPerPage: number;
-    layoutIdPrefix: string;
+const LatestArticleListItem = memo(({ article }: { article: CardProps }) => {
+    const router = useRouter();
+    const setPrefix = useLayoutIdStore((state) => state.setPrefix);
+    const layoutIdPrefix = "homepage-latest-articles";
+
+    const handleClick = (e: React.MouseEvent) => {
+        if ((e.target as HTMLElement).closest('a')) return;
+        e.preventDefault();
+        setPrefix(layoutIdPrefix);
+        router.push(`/articles/${article.slug}`, { scroll: false });
+    };
+
+    return (
+        <motion.div 
+            layoutId={`${layoutIdPrefix}-card-container-${article.legacyId}`} 
+            className={feedStyles.latestArticleItem}
+            onClick={handleClick}
+            style={{ cursor: 'pointer' }}
+        >
+            <motion.div layoutId={`${layoutIdPrefix}-card-image-${article.legacyId}`} className={feedStyles.latestArticleThumbnail}>
+                <Image 
+                    src={article.imageUrl} 
+                    alt={article.title} 
+                    fill 
+                    sizes="120px" 
+                    placeholder="blur" 
+                    blurDataURL={article.blurDataURL} 
+                    style={{ objectFit: 'cover' }} 
+                />
+            </motion.div>
+            <div className={feedStyles.latestArticleInfo}>
+                <motion.h4 layoutId={`${layoutIdPrefix}-card-title-${article.legacyId}`} className={feedStyles.latestArticleTitle}>{article.title}</motion.h4>
+                <div className={feedStyles.latestArticleMeta}>
+                    <CreatorCredit label="بقلم" creators={article.authors} />
+                    {article.date && (
+                        <div className={feedStyles.latestArticleDate}>
+                            <Calendar03Icon style={{ width: '16px', height: '16px', color: 'var(--accent)' }} />
+                            <span>{article.date}</span>
+                        </div>
+                    )}
+                </div>
+            </div>
+        </motion.div>
+    );
+});
+LatestArticleListItem.displayName = "LatestArticleListItem";
+
+type PaginatedLatestArticlesProps = {
+    items: CardProps[];
+    itemsPerPage?: number;
 };
 
-export default function PaginatedCarousel({ items, itemsPerPage, layoutIdPrefix }: PaginatedCarouselProps) {
+export default function PaginatedLatestArticles({ items, itemsPerPage = 3 }: PaginatedLatestArticlesProps) {
     const [currentPage, setCurrentPage] = useState(0);
     const [isHovered, setIsHovered] = useState(false);
     const timeoutRef = useRef<NodeJS.Timeout | null>(null);
@@ -22,8 +74,11 @@ export default function PaginatedCarousel({ items, itemsPerPage, layoutIdPrefix
 
     useEffect(() => {
         resetTimeout();
-        if (!isHovered) {
-            timeoutRef.current = setTimeout( () => setCurrentPage((prevPage) => (prevPage + 1) % totalPages), 5000 );
+        if (!isHovered && totalPages > 1) {
+            timeoutRef.current = setTimeout(
+                () => setCurrentPage((prevPage) => (prevPage + 1) % totalPages),
+                5000
+            );
         }
         return () => resetTimeout();
     }, [currentPage, isHovered, totalPages]);
@@ -33,41 +88,44 @@ export default function PaginatedCarousel({ items, itemsPerPage, layoutIdPrefix
     const currentItems = items.slice(startIndex, endIndex);
 
     return (
-        <div className={styles.paginatedCarouselContainer} onMouseEnter={() => setIsHovered(true)} onMouseLeave={() => setIsHovered(false)}>
-            <div className={styles.paginatedCarouselContent}>
+        <div 
+            className={styles.paginatedContainer}
+            onMouseEnter={() => setIsHovered(true)} 
+            onMouseLeave={() => setIsHovered(false)}
+        >
+            <div className={styles.paginatedContent}>
                 <AnimatePresence mode="wait">
                     <motion.div
                         key={currentPage}
-                        className={styles.twoColumnGrid} // <-- APPLIED NEW CLASS
-                        initial={{ opacity: 0, x: 50 }}
+                        initial={{ opacity: 0, x: 30 }}
                         animate={{ opacity: 1, x: 0 }}
-                        exit={{ opacity: 0, x: -50 }}
-                        transition={{ duration: 0.35, ease: 'easeInOut' }}
-                        style={{ transformStyle: 'preserve-3d' }}
+                        exit={{ opacity: 0, x: -30 }}
+                        transition={{ duration: 0.4, ease: 'easeInOut' }}
+                        className={styles.itemList}
                     >
-                        {currentItems.map((item) => (
-                            <ArticleCard key={item.id} article={item} isArticle={item.type === 'article'} layoutIdPrefix={layoutIdPrefix} />
+                        {currentItems.map((item, index) => (
+                            <React.Fragment key={item.id}>
+                                <LatestArticleListItem article={item} />
+                                {index < currentItems.length - 1 && <div className={feedStyles.listDivider} />}
+                            </React.Fragment>
                         ))}
                     </motion.div>
                 </AnimatePresence>
             </div>
-            <div className={styles.paginationControls}>
-                {Array.from({ length: totalPages }).map((_, index) => (
-                    <motion.button
-                        key={index}
-                        className={`${styles.paginationDot} ${currentPage === index ? styles.active : ''}`}
-                        onClick={() => setCurrentPage(index)}
-                        aria-label={`Go to page ${index + 1}`}
-                        whileHover={{ scale: 1.2 }}
-                        whileTap={{ scale: 0.9 }}
-                    />
-                ))}
-            </div>
+            {totalPages > 1 && (
+                <div className={styles.paginationControls}>
+                    {Array.from({ length: totalPages }).map((_, index) => (
+                        <motion.button
+                            key={index}
+                            className={`${styles.paginationDot} ${currentPage === index ? styles.active : ''}`}
+                            onClick={() => setCurrentPage(index)}
+                            aria-label={`Go to page ${index + 1}`}
+                            whileHover={{ scale: 1.2 }}
+                            whileTap={{ scale: 0.9 }}
+                        />
+                    ))}
+                </div>
+            )}
         </div>
     );
-}
-
-
-
-
-
+}
\ No newline at end of file
diff --git a/components/TimelineCard.tsx b/components/TimelineCard.tsx
index 7d422e7..0c9a013 100644
--- a/components/TimelineCard.tsx
+++ b/components/TimelineCard.tsx
@@ -24,10 +24,8 @@ const PlatformIcons: Record<string, React.FC<React.SVGProps<SVGSVGElement>>> = {
 
 const CheckIcon = (props: React.SVGProps<SVGSVGElement>) => ( <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" {...props}><path fillRule="evenodd" d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.052-.143z" clipRule="evenodd" /></svg> );
 
-const TimelineCardComponent = ({ release }: { release: SanityGameRelease }) => {
+const TimelineCardComponent = ({ release }: { release: SanityGameRelease & { game?: { slug?: string } } }) => {
     const { livingCardRef, livingCardAnimation } = useLivingCard();
-
-    // --- ENHANCEMENT: Glare effect logic from ChronoCard.tsx ---
     const mouseX = useMotionValue(0.5);
     const mouseY = useMotionValue(0.5);
     const smoothMouseX = useSpring(mouseX, { damping: 20, stiffness: 150, mass: 0.7 });
@@ -48,7 +46,6 @@ const TimelineCardComponent = ({ release }: { release: SanityGameRelease }) => {
         mouseX.set(0.5);
         mouseY.set(0.5);
     };
-    // --- END ENHANCEMENT ---
 
     const arabicMonths = ["يناير", "فبراير", "مارس", "أبريل", "مايو", "يونيو", "يوليو", "أغسطس", "سبتمبر", "أكتوبر", "نوفمبر", "ديسمبر"];
     const englishMonths = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
@@ -57,6 +54,9 @@ const TimelineCardComponent = ({ release }: { release: SanityGameRelease }) => {
     const monthIndex = date.getUTCMonth();
     const formattedDate = `${day} ${arabicMonths[monthIndex]} - ${englishMonths[monthIndex]}`;
 
+    // THE DEFINITIVE FIX: Use the game slug if available, otherwise default to a non-existent path.
+    const linkPath = release.game?.slug ? `/games/${release.game.slug}` : '/';
+
     return (
         <motion.div 
             ref={livingCardRef} 
@@ -66,14 +66,10 @@ const TimelineCardComponent = ({ release }: { release: SanityGameRelease }) => {
             className={styles.livingCardWrapper} 
             style={livingCardAnimation.style}
         >
-            <Link href={`/games/${release.slug}`} className={`${styles.timelineCard} no-underline`} style={{transformStyle: 'preserve-3d'}}>
-                {/* --- ENHANCEMENT: Glare element --- */}
+            <Link href={linkPath} className={`${styles.timelineCard} no-underline`} style={{transformStyle: 'preserve-3d'}}>
                 <motion.div
                     className={styles.livingCardGlare}
-                    style={{
-                        '--mouse-x': glareX,
-                        '--mouse-y': glareY,
-                    } as any}
+                    style={{ '--mouse-x': glareX, '--mouse-y': glareY } as any}
                 />
                 
                 <div className={styles.imageContainer} style={{ transform: 'translateZ(20px)' }}>
@@ -102,6 +98,4 @@ const TimelineCardComponent = ({ release }: { release: SanityGameRelease }) => {
     );
 }
 
-export default memo(TimelineCardComponent);
-
-
+export default memo(TimelineCardComponent);
\ No newline at end of file
diff --git a/components/VanguardReviews/VanguardReviews.module.css b/components/VanguardReviews/VanguardReviews.module.css
index 39b59c6..17275d3 100644
--- a/components/VanguardReviews/VanguardReviews.module.css
+++ b/components/VanguardReviews/VanguardReviews.module.css
@@ -11,13 +11,8 @@
     --center-width: 400px;
     --side-width: 280px;
     background-color: var(--bg-secondary);
-    width: 100vw;
-    position: relative;
-    left: 50%;
-    right: 50%;
-    margin-left: -50vw;
-    margin-right: -50vw;
-    overflow-x: clip;
+    width: 100%;
+    overflow-x: clip; /* THE DEFINITIVE FIX */
 }
 
 .spotlightGlow {
@@ -35,7 +30,6 @@
 .cardSlot {
     position: absolute;
     transition: transform 0.7s cubic-bezier(0.22, 1, 0.36, 1), opacity 0.5s ease-out, left 0.7s cubic-bezier(0.22, 1, 0.36, 1);
-    /* --- DEFINITIVE FIX: Set base size here --- */
     width: var(--center-width);
     height: 500px;
 }
diff --git a/components/VanguardReviews/VanguardReviews.tsx b/components/VanguardReviews/VanguardReviews.tsx
index 9630aa6..77e41e4 100644
--- a/components/VanguardReviews/VanguardReviews.tsx
+++ b/components/VanguardReviews/VanguardReviews.tsx
@@ -25,20 +25,12 @@ const creatorBubbleItemVariants = {
 const ArrowIcon = () => <svg width="20" height="20" viewBox="0 0 24" fill="none" stroke="currentColor" strokeWidth="2.5"><line x1="22" y1="12" x2="2" y2="12"></line><polyline points="15 5 22 12 15 19"></polyline></svg>;
 
 const CreatorBubble = ({ label, creator }: { label: string, creator: SanityAuthor }) => {
-    // This onClick handler is now only for stopping propagation if absolutely necessary,
-    // but the structural fix makes it primarily a safety measure.
-    const handleBubbleClick = (e: React.MouseEvent) => {
-        e.stopPropagation();
-    };
-    
+    const handleBubbleClick = (e: React.MouseEvent) => { e.stopPropagation(); };
     const profileSlug = creator.username || (creator.slug as any)?.current || creator.name?.toLowerCase().replace(/\s+/g, '-');
     const hasPublicProfile = !!profileSlug;
     
     const bubbleContent = (
-        <motion.div 
-            className={styles.creatorBubble} 
-            whileHover={{ scale: 1.1, x: -10, transition: { type: 'spring', stiffness: 400, damping: 15 } }}
-        >
+        <motion.div className={styles.creatorBubble} whileHover={{ scale: 1.1, x: -10, transition: { type: 'spring', stiffness: 400, damping: 15 } }}>
             <span className={styles.creatorLabel}>{label}</span>
             <span className={styles.creatorName}>{creator.name}</span>
             <div className={styles.creatorArrow}><ArrowIcon /></div>
@@ -48,11 +40,7 @@ const CreatorBubble = ({ label, creator }: { label: string, creator: SanityAutho
     return (
         <motion.div variants={creatorBubbleItemVariants}>
             {hasPublicProfile ? (
-                <Link
-                    href={`/creators/${profileSlug}`}
-                    onClick={handleBubbleClick}
-                    className="no-underline"
-                >
+                <Link href={`/creators/${profileSlug}`} onClick={handleBubbleClick} className="no-underline">
                     {bubbleContent}
                 </Link>
             ) : (
@@ -78,7 +66,13 @@ const VanguardCard = memo(({ review, isCenter, isInView, isPriority, isMobile, i
             return () => controls.stop();
         }
     }, [isInView, review.score]);
-    const handleClick = (e: React.MouseEvent) => { e.preventDefault(); setPrefix(layoutIdPrefix); router.push(`/reviews/${review.slug}`, { scroll: false }); };
+
+    const handleClick = (e: React.MouseEvent) => {
+        if ((e.target as HTMLElement).closest('a')) return;
+        e.preventDefault();
+        setPrefix(layoutIdPrefix);
+        router.push(`/reviews/${review.slug}`, { scroll: false });
+    };
     
     const imageUrl = review.mainImageRef 
         ? urlFor(review.mainImageRef).width(isCenter ? 800 : 560).height(isCenter ? 1000 : 700).fit('crop').auto('format').url()
@@ -86,15 +80,12 @@ const VanguardCard = memo(({ review, isCenter, isInView, isPriority, isMobile, i
 
     const showCredits = isCenter || isHovered;
 
-    // THE DEFINITIVE FIX:
-    // The CreatorBubbleContainer is moved OUTSIDE the main <Link> component.
-    // They are now siblings, which produces valid HTML and fixes the unclickable link issue.
     return (
         <motion.div ref={livingCardRef} onMouseMove={livingCardAnimation.onMouseMove} onMouseEnter={livingCardAnimation.onHoverStart} onMouseLeave={livingCardAnimation.onHoverEnd} className={styles.cardWrapper} style={{...livingCardAnimation.style, transformStyle: 'preserve-3d'}}>
-            <Link href={`/reviews/${review.slug}`} onClick={handleClick} className="no-underline" style={{ display: 'block', height: '100%', cursor: 'pointer' }}>
+            <motion.div layoutId={`${layoutIdPrefix}-card-container-${review.legacyId}`} onClick={handleClick} style={{ display: 'block', height: '100%', cursor: 'pointer' }}>
                 <div className={styles.vanguardCard}>
                     {typeof review.score === 'number' && (<div className={styles.vanguardScoreBadge}><p ref={scoreRef} style={{ margin: 0 }}>0.0</p></div>)}
-                    <div className={styles.cardImageContainer}>
+                    <motion.div layoutId={`${layoutIdPrefix}-card-image-${review.legacyId}`} className={styles.cardImageContainer}>
                         <Image 
                             src={imageUrl} 
                             alt={review.title} 
@@ -105,13 +96,13 @@ const VanguardCard = memo(({ review, isCenter, isInView, isPriority, isMobile, i
                             blurDataURL={review.blurDataURL} 
                             priority={isPriority}
                         />
-                    </div>
+                    </motion.div>
                     <motion.div className={styles.cardContent} animate={{ background: isCenter ? 'linear-gradient(to top, rgba(0,0,0,0.6) 0%, transparent 50%)' : 'linear-gradient(to top, rgba(0,0,0,0.9) 0%, transparent 60%)' }} transition={{ duration: 0.5, ease: 'circOut' }}>
-                        <h3>{review.title}</h3>
+                        <motion.h3 layoutId={`${layoutIdPrefix}-card-title-${review.legacyId}`}>{review.title}</motion.h3>
                         {review.date && <p className={styles.cardDate}>{review.date.split(' - ')[0]}</p>}
                     </motion.div>
                 </div>
-            </Link>
+            </motion.div>
             <AnimatePresence>
                 {showCredits && (
                     <motion.div
@@ -230,6 +221,4 @@ export default function VanguardReviews({ reviews }: { reviews: CardProps[] }) {
             {hasAnimatedIn && <KineticNavigator reviews={reviews} currentIndex={currentIndex} navigateToIndex={navigateToIndex} />}
         </div>
     );
-}
-
-
+}
\ No newline at end of file
diff --git a/components/constellation/StarPreviewCard.tsx b/components/constellation/StarPreviewCard.tsx
index db03ba1..d37da55 100644
--- a/components/constellation/StarPreviewCard.tsx
+++ b/components/constellation/StarPreviewCard.tsx
@@ -3,14 +3,15 @@
 import React from 'react';
 import { motion } from 'framer-motion';
 import Image from 'next/image';
-import Link from 'next/link';
+import { useRouter } from 'next/navigation';
+import { useLayoutIdStore } from '@/lib/layoutIdStore';
 import { urlFor } from '@/sanity/lib/image';
 import { SanityContentObject, StarData, ScreenPosition } from './config';
 
 interface StarPreviewCardProps {
-starData: StarData;
-position: ScreenPosition;
-onClose: () => void;
+    starData: StarData;
+    position: ScreenPosition;
+    onClose: () => void;
 }
 
 const typeMap: Record<'review' | 'article' | 'news', string> = {
@@ -20,77 +21,86 @@ const typeMap: Record<'review' | 'article' | 'news', string> = {
 }
 
 export const StarPreviewCard = ({ starData, position, onClose }: StarPreviewCardProps) => {
+    const router = useRouter();
+    const setPrefix = useLayoutIdStore((state) => state.setPrefix);
+    const layoutIdPrefix = "constellation-preview";
+    
     const { content } = starData;
     const getLinkPath = (item: SanityContentObject) => {
         switch (item._type) {
-        case 'review': return `/reviews/${item.slug}`;
-        case 'article': return `/articles/${item.slug}`;
-        case 'news': return `/news/${item.slug}`;
-        default: return '/';
+            case 'review': return `/reviews/${item.slug}`;
+            case 'article': return `/articles/${item.slug}`;
+            case 'news': return `/news/${item.slug}`;
+            default: return '/';
         }
     };
     
     const imageUrl = content.mainImage?.asset ? urlFor(content.mainImage).width(600).height(338).fit('crop').auto('format').url() : null;
     const blurDataURL = content.mainImage?.blurDataURL;
     const contentType = typeMap[content._type] || 'محتوى';
+    const linkPath = getLinkPath(content);
     const formattedDate = content.publishedAt 
         ? new Date(content.publishedAt).toLocaleDateString('ar-EG', { year: 'numeric', month: 'short', day: 'numeric' })
         : '';
 
+    const handleClick = (e: React.MouseEvent) => {
+        e.stopPropagation();
+        setPrefix(layoutIdPrefix);
+        router.push(linkPath, { scroll: false });
+        onClose();
+    };
+
     return (
         <motion.div
-        onClick={(e) => e.stopPropagation()}
-        initial={{ opacity: 0, scale: 0.9 }} animate={{ opacity: 1, scale: 1 }} exit={{ opacity: 0, scale: 0.9 }}
-        transition={{ type: 'spring', damping: 25, stiffness: 300 }}
-        style={{
-        position: 'fixed', top: position.top, left: position.left,
-        width: '300px',
-        background: 'var(--bg-secondary)', border: '1px solid var(--border-color)', borderRadius: '12px',
-        boxShadow: '0 10px 30px rgba(0,0,0,0.3)', overflow: 'hidden', zIndex: 10001,
-        transform: position.placement === 'below'
-        ? 'translate(-50%, 20px)'
-        : 'translate(-50%, calc(-100% - 20px))',
-        transformOrigin: position.placement === 'below' ? 'top center' : 'bottom center',
-        }}
-        >
-        <motion.button
-        onClick={onClose} whileHover={{ scale: 1.2, rotate: 90 }} whileTap={{ scale: 0.9 }}
-        style={{
-        position: 'absolute', top: '10px', right: '10px', zIndex: 2, width: '32px', height: '32px',
-        borderRadius: '50%', border: 'none', background: 'rgba(0,0,0,0.3)', color: 'white',
-        display: 'flex', alignItems: 'center', justifyContent: 'center', cursor: 'pointer', backdropFilter: 'blur(4px)'
-        }} aria-label="إغلاق المعاينة"
+            layoutId={`${layoutIdPrefix}-card-container-${content.legacyId}`}
+            onClick={handleClick}
+            initial={{ opacity: 0, scale: 0.9 }} animate={{ opacity: 1, scale: 1 }} exit={{ opacity: 0, scale: 0.9 }}
+            transition={{ type: 'spring', damping: 25, stiffness: 300 }}
+            style={{
+                position: 'fixed', top: position.top, left: position.left,
+                width: '300px',
+                background: 'var(--bg-secondary)', border: '1px solid var(--border-color)', borderRadius: '12px',
+                boxShadow: '0 10px 30px rgba(0,0,0,0.3)', overflow: 'hidden', zIndex: 10001,
+                transform: position.placement === 'below'
+                ? 'translate(-50%, 20px)'
+                : 'translate(-50%, calc(-100% - 20px))',
+                transformOrigin: position.placement === 'below' ? 'top center' : 'bottom center',
+                cursor: 'pointer',
+            }}
         >
-        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
-        </motion.button>
+            <motion.button
+                onClick={(e) => { e.stopPropagation(); onClose(); }} 
+                whileHover={{ scale: 1.2, rotate: 90 }} whileTap={{ scale: 0.9 }}
+                style={{
+                    position: 'absolute', top: '10px', right: '10px', zIndex: 2, width: '32px', height: '32px',
+                    borderRadius: '50%', border: 'none', background: 'rgba(0,0,0,0.3)', color: 'white',
+                    display: 'flex', alignItems: 'center', justifyContent: 'center', cursor: 'pointer', backdropFilter: 'blur(4px)'
+                }} aria-label="إغلاق المعاينة"
+            >
+                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
+            </motion.button>
 
-        <div style={{ position: 'relative', width: '100%', height: '150px' }}>
-            {imageUrl ? ( 
-                <Image 
-                    src={imageUrl} 
-                    alt={content.title} 
-                    fill 
-                    sizes="300px"
-                    style={{ objectFit: 'cover' }} 
-                    placeholder={blurDataURL ? 'blur' : 'empty'}
-                    blurDataURL={blurDataURL || ''}
-                /> 
-            ) : ( <div style={{ width: '100%', height: '100%', backgroundColor: 'var(--border-color)' }} /> )}
-        </div>
+            <motion.div layoutId={`${layoutIdPrefix}-card-image-${content.legacyId}`} style={{ position: 'relative', width: '100%', height: '150px' }}>
+                {imageUrl ? ( 
+                    <Image 
+                        src={imageUrl} alt={content.title} fill sizes="300px"
+                        style={{ objectFit: 'cover' }} 
+                        placeholder={blurDataURL ? 'blur' : 'empty'}
+                        blurDataURL={blurDataURL || ''}
+                    /> 
+                ) : ( <div style={{ width: '100%', height: '100%', backgroundColor: 'var(--border-color)' }} /> )}
+            </motion.div>
 
-        <div style={{ padding: '1.5rem', textAlign: 'right' }}>
-            <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'baseline', marginBottom: '0.5rem'}}>
-                <p style={{ textTransform: 'capitalize', color: 'var(--accent)', fontFamily: 'var(--font-main)', fontSize: '1.3rem', margin: 0 }}>{contentType}</p>
-                {formattedDate && <p style={{color: 'var(--text-secondary)', fontSize: '1.2rem', margin: 0}}>{formattedDate}</p>}
+            <div style={{ padding: '1.5rem', textAlign: 'right' }}>
+                <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'baseline', marginBottom: '0.5rem'}}>
+                    <p style={{ textTransform: 'capitalize', color: 'var(--accent)', fontFamily: 'var(--font-main)', fontSize: '1.3rem', margin: 0 }}>{contentType}</p>
+                    {formattedDate && <p style={{color: 'var(--text-secondary)', fontSize: '1.2rem', margin: 0}}>{formattedDate}</p>}
+                </div>
+                <motion.h3 layoutId={`${layoutIdPrefix}-card-title-${content.legacyId}`} style={{ margin: '0 0 1.5rem 0', fontSize: '1.7rem' }}>{content.title}</motion.h3>
+                <div className="primary-button no-underline" style={{ display: 'block', textAlign: 'center', pointerEvents: 'none' }}>
+                    عرض كامل الـ{contentType}
+                </div>
             </div>
-            <h3 style={{ margin: '0 0 1.5rem 0', fontSize: '1.7rem' }}>{content.title}</h3>
-            <Link href={getLinkPath(content)} onClick={onClose} className="primary-button no-underline" style={{ display: 'block', textAlign: 'center' }}>
-                عرض كامل الـ{contentType}
-            </Link>
-        </div>
-
         </motion.div>
     );
-};
-
-
+};
\ No newline at end of file
diff --git a/components/content/ContentPageClient.tsx b/components/content/ContentPageClient.tsx
index 35f0e6a..670f501 100644
--- a/components/content/ContentPageClient.tsx
+++ b/components/content/ContentPageClient.tsx
@@ -27,7 +27,7 @@ type ContentItem = (SanityReview | SanityArticle | SanityNews) & { relatedConten
 type ContentType = 'reviews' | 'articles' | 'news';
 
 export type Heading = { id: string; title: string; top: number; };
-const contentVariants = { hidden: { opacity: 0 }, visible: { opacity: 1, transition: { delay: 0.3, duration: 0.5 } } };
+const contentVariants = { hidden: { opacity: 0 }, visible: { opacity: 1, transition: { delay: 0.4, duration: 0.5 } } };
 const adaptReviewForScoreBox = (review: any) => ({ score: review.score, verdict: review.verdict, pros: review.pros, cons: review.cons });
 
 export default function ContentPageClient({ item, type, children }: {
@@ -99,11 +99,18 @@ export default function ContentPageClient({ item, type, children }: {
     const isLongGameTitle = (item as any).game?.title?.length > GAME_TITLE_THRESHOLD;
     const shouldShiftLayout = isMobile && isLongGameTitle;
 
+    const springTransition = { type: 'spring' as const, stiffness: 200, damping: 35 };
+
     return (
         <>
-            <motion.div initial="hidden" animate="visible" variants={contentVariants}><ReadingHud contentContainerRef={contentContainerRef} headings={headings} /></motion.div>
-            <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ duration: 0.5 }}>
-                <motion.div layoutId={`${layoutIdPrefix}-card-image-${item.legacyId}`} className={styles.heroImage}>
+            <ReadingHud contentContainerRef={contentContainerRef} headings={headings} />
+
+            <motion.div
+                layoutId={`${layoutIdPrefix}-card-container-${item.legacyId}`}
+                transition={springTransition}
+                style={{ backgroundColor: 'var(--bg-primary)' }}
+            >
+                <motion.div layoutId={`${layoutIdPrefix}-card-image-${item.legacyId}`} className={styles.heroImage} transition={springTransition}>
                     <Image 
                         loader={sanityLoader} 
                         src={heroImageUrl} 
@@ -117,51 +124,60 @@ export default function ContentPageClient({ item, type, children }: {
                     />
                 </motion.div>
 
-                <motion.div initial="hidden" animate="visible" variants={contentVariants} className="container page-container" style={{ paddingTop: '0' }}>
-                    <div className={styles.contentLayout}>
-                        <main>
-                            <div className={`${styles.headerContainer} ${shouldShiftLayout ? styles.shiftedLayout : ''}`}>
-                                {(item as any).game?.title && <GameLink gameName={(item as any).game.title} gameSlug={(item as any).game.slug} />}
-                                <div className={styles.titleWrapper}>
-                                    {isNews && <p className="news-card-category" style={{ textAlign: 'right', margin: '0' }}>{(item as SanityNews).category}</p>}
-                                    <motion.h1 layoutId={`${layoutIdPrefix}-card-title-${item.legacyId}`} className="page-title" style={{ textAlign: 'right', margin: isNews ? '0.5rem 0 0 0' : 0 }}>{item.title}</motion.h1>
+                <div className="container page-container" style={{ paddingTop: '0' }}>
+                    <motion.div initial="hidden" animate="visible" variants={contentVariants} >
+                        <div className={styles.contentLayout}>
+                            <main>
+                                <div className={`${styles.headerContainer} ${shouldShiftLayout ? styles.shiftedLayout : ''}`}>
+                                    {(item as any).game?.title && <GameLink gameName={(item as any).game.title} gameSlug={(item as any).game.slug} />}
+                                    <div className={styles.titleWrapper}>
+                                        {isNews && <p className="news-card-category" style={{ textAlign: 'right', margin: '0' }}>{(item as SanityNews).category}</p>}
+                                        <motion.h1 layoutId={`${layoutIdPrefix}-card-title-${item.legacyId}`} className="page-title" style={{ textAlign: 'right', margin: isNews ? '0.5rem 0 0 0' : 0 }} transition={springTransition}>{item.title}</motion.h1>
+                                    </div>
+                                </div>
+
+                                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '3rem' }}>
+                                    <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'flex-start', gap: '1rem', fontSize: '1.5rem' }}>
+                                        <CreatorCredit label="بقلم" creators={primaryCreators} />
+                                        <CreatorCredit label="تصميم" creators={item.designers} />
+                                        <p style={{ margin: 0, fontSize: '1.4rem', color: 'var(--text-secondary)' }}>نُشر في {formattedDate}</p>
+                                    </div>
+                                    <ContentActionBar contentId={item.legacyId} contentType={contentTypeForActionBar} contentSlug={item.slug} />
                                 </div>
-                            </div>
 
-                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '3rem' }}>
-                                <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'flex-start', gap: '1rem', fontSize: '1.5rem' }}>
-                                    <CreatorCredit label="بقلم" creators={primaryCreators} />
-                                    <CreatorCredit label="تصميم" creators={item.designers} />
-                                    <p style={{ margin: 0, fontSize: '1.4rem', color: 'var(--text-secondary)' }}>نُشر في {formattedDate}</p>
+                                <div ref={contentContainerRef} className="article-body">
+                                    <PortableTextComponent content={item.content || []} />
+                                    {isReview && <ScoreBox review={adaptReviewForScoreBox(item)} />}
                                 </div>
-                                <ContentActionBar contentId={item.legacyId} contentType={contentTypeForActionBar} contentSlug={item.slug} />
-                            </div>
-
-                            <div ref={contentContainerRef} className="article-body">
-                                <PortableTextComponent content={item.content || []} />
-                                {isReview && <ScoreBox review={adaptReviewForScoreBox(item)} />}
-                            </div>
-                            <div style={{ marginTop: '4rem', paddingTop: '2rem', borderTop: '1px solid var(--border-color)' }}>
-                                <TagLinks tags={(item.tags || []).map(t => t.title)} />
-                            </div>
-                        </main>
-                        <aside className={styles.sidebar}>
-                            <ContentBlock title="قد يروق لك" Icon={SparklesIcon}>
-                                <div className={styles.relatedGrid}>
-                                    {adaptedRelatedContent.map(related => (
-                                        <ArticleCard key={related?.id} article={related} layoutIdPrefix={`related-${type}`} />
-                                    ))}
+                                <div style={{ marginTop: '4rem', paddingTop: '2rem', borderTop: '1px solid var(--border-color)' }}>
+                                    <TagLinks tags={(item.tags || []).map(t => t.title)} />
                                 </div>
-                            </ContentBlock>
-                        </aside>
-                    </div>
-                </motion.div>
-                <div className="container" style={{ paddingBottom: '6rem' }}>
-                    <ContentBlock title="حديث المجتمع">{children}</ContentBlock>
+                            </main>
+                            <aside className={styles.sidebar}>
+                                <ContentBlock title="قد يروق لك" Icon={SparklesIcon}>
+                                    <motion.div 
+                                        className={styles.relatedGrid}
+                                        variants={{ visible: { transition: { staggerChildren: 0.1 } } }}
+                                        initial="hidden"
+                                        animate="visible"
+                                        exit="hidden"
+                                    >
+                                        {adaptedRelatedContent.map(related => (
+                                            <motion.div key={related.id} variants={{ hidden: { opacity: 0, y: 20 }, visible: { opacity: 1, y: 0 } }}>
+                                                <ArticleCard article={related} layoutIdPrefix={`related-${type}`} />
+                                            </motion.div>
+                                        ))}
+                                    </motion.div>
+                                </ContentBlock>
+                            </aside>
+                        </div>
+                    </motion.div>
                 </div>
             </motion.div>
+            
+            <motion.div initial="hidden" animate="visible" variants={contentVariants} className="container" style={{ paddingBottom: '6rem' }}>
+                <ContentBlock title="حديث المجتمع">{children}</ContentBlock>
+            </motion.div>
         </>
     );
-}
-
-
+}
\ No newline at end of file
diff --git a/components/homepage/HomepageFeeds.tsx b/components/homepage/HomepageFeeds.tsx
index b17a6fa..07089fa 100644
--- a/components/homepage/HomepageFeeds.tsx
+++ b/components/homepage/HomepageFeeds.tsx
@@ -18,6 +18,7 @@ import KineticSpotlightNews from "./kinetic-news/KineticSpotlightNews";
 import NewsfeedStream from "./kinetic-news/NewsfeedStream";
 import gridStyles from './HomepageFeeds.module.css';
 import feedStyles from './feed/Feed.module.css';
+import { useLayoutIdStore } from "@/lib/layoutIdStore";
 
 // --- Specific Card Renderers ---
 
@@ -25,18 +26,28 @@ const TopArticleCard = memo(({ article }: { article: CardProps }) => {
     const { livingCardRef, livingCardAnimation } = useLivingCard();
     const [isHovered, setIsHovered] = useState(false);
     const router = useRouter();
+    const setPrefix = useLayoutIdStore((state) => state.setPrefix);
+    const layoutIdPrefix = "homepage-top-articles";
+
     const handleClick = (e: React.MouseEvent) => {
         if ((e.target as HTMLElement).closest('a')) return;
-        router.push(`/articles/${article.slug}`);
+        e.preventDefault();
+        setPrefix(layoutIdPrefix);
+        router.push(`/articles/${article.slug}`, { scroll: false });
     };
+
     return (
-        <motion.div ref={livingCardRef} style={livingCardAnimation.style} onMouseMove={livingCardAnimation.onMouseMove} onMouseEnter={() => { livingCardAnimation.onHoverStart(); setIsHovered(true); }} onMouseLeave={() => { livingCardAnimation.onHoverEnd(); setIsHovered(false); }} onClick={handleClick} className={feedStyles.topArticleCard}>
-            <AnimatePresence>{isHovered && <KineticGlyphs />}</AnimatePresence>
-            <div className={feedStyles.topArticleImage}><Image src={article.imageUrl} alt={article.title} fill sizes="(max-width: 768px) 45vw, 30vw" placeholder="blur" blurDataURL={article.blurDataURL} style={{ objectFit: 'cover' }} /></div>
-            <div className={feedStyles.topArticleContent}>
-                <h3 className={feedStyles.topArticleTitle}>{article.title}</h3>
-                <div className={feedStyles.topArticleMeta}><CreatorCredit label="بقلم" creators={article.authors} small /></div>
-            </div>
+        <motion.div ref={livingCardRef} style={livingCardAnimation.style} onMouseMove={livingCardAnimation.onMouseMove} onMouseEnter={() => { livingCardAnimation.onHoverStart(); setIsHovered(true); }} onMouseLeave={() => { livingCardAnimation.onHoverEnd(); setIsHovered(false); }} onClick={handleClick} >
+            <motion.div layoutId={`${layoutIdPrefix}-card-container-${article.legacyId}`} className={feedStyles.topArticleCard}>
+                <AnimatePresence>{isHovered && <KineticGlyphs />}</AnimatePresence>
+                <motion.div layoutId={`${layoutIdPrefix}-card-image-${article.legacyId}`} className={feedStyles.topArticleImage}>
+                    <Image src={article.imageUrl} alt={article.title} fill sizes="(max-width: 768px) 45vw, 30vw" placeholder="blur" blurDataURL={article.blurDataURL} style={{ objectFit: 'cover' }} />
+                </motion.div>
+                <div className={feedStyles.topArticleContent}>
+                    <motion.h3 layoutId={`${layoutIdPrefix}-card-title-${article.legacyId}`} className={feedStyles.topArticleTitle}>{article.title}</motion.h3>
+                    <div className={feedStyles.topArticleMeta}><CreatorCredit label="بقلم" creators={article.authors} small /></div>
+                </div>
+            </motion.div>
         </motion.div>
     );
 });
@@ -77,19 +88,17 @@ export default function HomepageFeeds({ topArticles, latestArticles, pinnedNews,
                     <Feed
                         topSectionLabel="الأكثر رواجًا"
                         latestSectionLabel="الأحدث"
-                        topItems={pinnedNews} // Pass empty array as items will be handled by topSectionContent
+                        topItems={pinnedNews}
                         viewAllLink="/news"
                         viewAllText="عرض كل الأخبار"
                         topItemsContainerClassName={feedStyles.pinnedNewsList}
-                        renderTopItem={() => null} // Render nothing here
-                        topSectionContent={<KineticSpotlightNews items={pinnedNews} />} // Pass the new component here
-                        latestSectionContent={<NewsfeedStream items={newsList} />} // Pass the new component here
+                        renderTopItem={() => null}
+                        topSectionContent={<KineticSpotlightNews items={pinnedNews} />}
+                        latestSectionContent={<NewsfeedStream items={newsList} />}
                         enableTopSectionHoverEffect={true}
                     />
                 </ContentBlock>
             </motion.div>
         </div>
     );
-}
-
-
+}
\ No newline at end of file
diff --git a/components/homepage/PaginatedLatestArticles.tsx b/components/homepage/PaginatedLatestArticles.tsx
index 3b9377f..4d23599 100644
--- a/components/homepage/PaginatedLatestArticles.tsx
+++ b/components/homepage/PaginatedLatestArticles.tsx
@@ -10,33 +10,45 @@ import CreatorCredit from '@/components/CreatorCredit';
 import { Calendar03Icon } from '@/components/icons/index';
 import styles from './PaginatedLatestArticles.module.css';
 import feedStyles from './feed/Feed.module.css';
+import { useRouter } from 'next/navigation';
+import { useLayoutIdStore } from '@/lib/layoutIdStore';
 
 const LatestArticleListItem = memo(({ article }: { article: CardProps }) => {
-    // This component is the source of the hydration error.
-    // The main container is now a <div> instead of a <Link>.
-    // The image and title are wrapped in their own separate <Link>s.
-    // This resolves the nested <a> tag issue caused by CreatorCredit rendering its own link.
+    const router = useRouter();
+    const setPrefix = useLayoutIdStore((state) => state.setPrefix);
+    const layoutIdPrefix = "homepage-latest-articles";
+
+    const handleClick = (e: React.MouseEvent) => {
+        if ((e.target as HTMLElement).closest('a')) return;
+        e.preventDefault();
+        setPrefix(layoutIdPrefix);
+        router.push(`/articles/${article.slug}`, { scroll: false });
+    };
+
     return (
-        <div className={feedStyles.latestArticleItem}>
-            <Link href={`/articles/${article.slug}`} className="no-underline" style={{ display: 'block' }}>
-                <div className={feedStyles.latestArticleThumbnail}>
-                    <Image 
-                        src={article.imageUrl} 
-                        alt={article.title} 
-                        fill 
-                        sizes="120px" 
-                        placeholder="blur" 
-                        blurDataURL={article.blurDataURL} 
-                        style={{ objectFit: 'cover' }} 
-                    />
-                </div>
-            </Link>
+        <motion.div 
+            layoutId={`${layoutIdPrefix}-card-container-${article.legacyId}`} 
+            onClick={handleClick}
+            style={{ cursor: 'pointer' }}
+            className={feedStyles.latestArticleItem}
+        >
+            <motion.div layoutId={`${layoutIdPrefix}-card-image-${article.legacyId}`} className={feedStyles.latestArticleThumbnail}>
+                <Image 
+                    src={article.imageUrl} 
+                    alt={article.title} 
+                    fill 
+                    sizes="120px" 
+                    placeholder="blur" 
+                    blurDataURL={article.blurDataURL} 
+                    style={{ objectFit: 'cover' }} 
+                />
+            </motion.div>
             <div className={feedStyles.latestArticleInfo}>
                 <Link href={`/articles/${article.slug}`} className="no-underline">
-                    <h4 className={feedStyles.latestArticleTitle}>{article.title}</h4>
+                    <motion.h4 layoutId={`${layoutIdPrefix}-card-title-${article.legacyId}`} className={feedStyles.latestArticleTitle}>{article.title}</motion.h4>
                 </Link>
                 <div className={feedStyles.latestArticleMeta}>
-                    <CreatorCredit label="بقلم" creators={article.authors} />
+                    <CreatorCredit label="بقلم" creators={article.authors} disableLink={true} />
                     {article.date && (
                         <div className={feedStyles.latestArticleDate}>
                             <Calendar03Icon style={{ width: '16px', height: '16px', color: 'var(--accent)' }} />
@@ -45,7 +57,7 @@ const LatestArticleListItem = memo(({ article }: { article: CardProps }) => {
                     )}
                 </div>
             </div>
-        </div>
+        </motion.div>
     );
 });
 LatestArticleListItem.displayName = "LatestArticleListItem";
@@ -119,6 +131,4 @@ export default function PaginatedLatestArticles({ items, itemsPerPage = 3 }: Pag
             )}
         </div>
     );
-}
-
-
+}
\ No newline at end of file
diff --git a/components/homepage/feed/Feed.module.css b/components/homepage/feed/Feed.module.css
index f0c998c..a3d75e8 100644
--- a/components/homepage/feed/Feed.module.css
+++ b/components/homepage/feed/Feed.module.css
@@ -161,6 +161,7 @@
     align-items: center;
     position: relative;
     padding: 1.5rem 0;
+    border-radius: 8px; /* Added for hover effect */
 }
 
 .latestArticleThumbnail {
@@ -171,10 +172,9 @@
     position: relative;
     border: 1px solid var(--border-color);
     transition: border-color 0.3s ease;
-    cursor: pointer;
 }
 
-.latestArticleItem a:hover .latestArticleThumbnail {
+.latestArticleItem:hover .latestArticleThumbnail {
     border-color: var(--accent);
 }
 
@@ -182,7 +182,7 @@
     transition: transform 0.3s ease-out;
 }
 
-.latestArticleItem a:hover .latestArticleThumbnail img {
+.latestArticleItem:hover .latestArticleThumbnail img {
     transform: scale(1.05);
 }
 
@@ -201,7 +201,7 @@
     display: inline-block; /* Required for the underline effect */
 }
 
-.latestArticleInfo a:hover .latestArticleTitle {
+.latestArticleItem:hover .latestArticleTitle {
     color: var(--accent);
 }
 
@@ -219,7 +219,7 @@
     filter: drop-shadow(0 0 4px var(--accent));
 }
 
-.latestArticleInfo a:hover .latestArticleTitle::after {
+.latestArticleItem:hover .latestArticleTitle::after {
     transform: scaleX(1);
 }
 
@@ -395,6 +395,4 @@
         padding-left: 1.5rem; /* THE FIX: Reduce horizontal padding */
         padding-right: 1.5rem; /* THE FIX: Reduce horizontal padding */
     }
-}
-
-
+}
\ No newline at end of file
diff --git a/components/homepage/kinetic-news/KineticSpotlightNews.tsx b/components/homepage/kinetic-news/KineticSpotlightNews.tsx
index 614d5fe..1cb40f1 100644
--- a/components/homepage/kinetic-news/KineticSpotlightNews.tsx
+++ b/components/homepage/kinetic-news/KineticSpotlightNews.tsx
@@ -3,19 +3,33 @@
 
 import React, { useState, useEffect, memo } from 'react';
 import { motion, AnimatePresence } from 'framer-motion';
-import Link from 'next/link';
 import Image from 'next/image';
 import { CardProps } from '@/types';
 import { Calendar03Icon } from '@/components/icons/index';
 import { translateTag } from '@/lib/translations';
 import styles from './KineticSpotlightNews.module.css';
 import feedStyles from '../feed/Feed.module.css';
+import { useRouter } from 'next/navigation';
+import { useLayoutIdStore } from '@/lib/layoutIdStore';
 
 const PinnedNewsCard = memo(({ item, isActive }: { item: CardProps, isActive: boolean }) => {
     const primaryTag = item.tags && item.tags.length > 0 ? translateTag(item.tags[0].title) : 'أخبار';
+    const router = useRouter();
+    const setPrefix = useLayoutIdStore((state) => state.setPrefix);
+    const layoutIdPrefix = "homepage-pinned-news";
+
+    const handleClick = (e: React.MouseEvent) => {
+        e.preventDefault();
+        setPrefix(layoutIdPrefix);
+        router.push(`/news/${item.slug}`, { scroll: false });
+    };
 
     return (
-        <Link href={`/news/${item.slug}`} className={`${feedStyles.pinnedNewsItem} ${styles.spotlightItem} no-underline`}>
+        <motion.div 
+            layoutId={`${layoutIdPrefix}-card-container-${item.legacyId}`}
+            onClick={handleClick}
+            className={`${feedStyles.pinnedNewsItem} ${styles.spotlightItem} no-underline`}
+        >
             <AnimatePresence>
                 {isActive && (
                     <motion.div
@@ -28,7 +42,7 @@ const PinnedNewsCard = memo(({ item, isActive }: { item: CardProps, isActive: bo
                     />
                 )}
             </AnimatePresence>
-            <div className={feedStyles.pinnedNewsThumbnail}>
+            <motion.div layoutId={`${layoutIdPrefix}-card-image-${item.legacyId}`} className={feedStyles.pinnedNewsThumbnail}>
                 <Image 
                     src={item.imageUrl} 
                     alt={item.title} 
@@ -38,9 +52,9 @@ const PinnedNewsCard = memo(({ item, isActive }: { item: CardProps, isActive: bo
                     blurDataURL={item.blurDataURL} 
                     style={{ objectFit: 'cover' }} 
                 />
-            </div>
+            </motion.div>
             <div className={feedStyles.pinnedNewsInfo}>
-                <h4 className={feedStyles.pinnedNewsTitle}>{item.title}</h4>
+                <motion.h4 layoutId={`${layoutIdPrefix}-card-title-${item.legacyId}`} className={feedStyles.pinnedNewsTitle}>{item.title}</motion.h4>
                 {item.date && (
                     <div className={feedStyles.pinnedNewsDate}>
                         <Calendar03Icon style={{width: '14px', height: '14px', color: 'var(--accent)'}} />
@@ -49,7 +63,7 @@ const PinnedNewsCard = memo(({ item, isActive }: { item: CardProps, isActive: bo
                 )}
                 <p className={feedStyles.pinnedNewsCategory}>{primaryTag}</p>
             </div>
-        </Link>
+        </motion.div>
     );
 });
 PinnedNewsCard.displayName = 'PinnedNewsCard';
diff --git a/components/homepage/kinetic-news/NewsfeedStream.tsx b/components/homepage/kinetic-news/NewsfeedStream.tsx
index 2b039f3..d5a8585 100644
--- a/components/homepage/kinetic-news/NewsfeedStream.tsx
+++ b/components/homepage/kinetic-news/NewsfeedStream.tsx
@@ -3,20 +3,34 @@
 
 import React, { useState, useEffect, useRef, memo } from 'react';
 import { motion, AnimatePresence } from 'framer-motion';
-import Link from 'next/link';
-import Image from 'next/image';
 import { CardProps } from '@/types';
 import { Calendar03Icon } from '@/components/icons/index';
 import { translateTag } from '@/lib/translations';
 import styles from './NewsfeedStream.module.css';
 import feedStyles from '../feed/Feed.module.css';
+import { useRouter } from 'next/navigation';
+import { useLayoutIdStore } from '@/lib/layoutIdStore';
+import Image from 'next/image';
 
 const LatestNewsListItem = memo(({ item }: { item: CardProps }) => {
     const primaryTag = item.tags && item.tags.length > 0 ? translateTag(item.tags[0].title) : 'أخبار';
+    const router = useRouter();
+    const setPrefix = useLayoutIdStore((state) => state.setPrefix);
+    const layoutIdPrefix = "homepage-news-stream";
+    
+    const handleClick = (e: React.MouseEvent) => {
+        e.preventDefault();
+        setPrefix(layoutIdPrefix);
+        router.push(`/news/${item.slug}`, { scroll: false });
+    };
 
     return (
-        <Link href={`/news/${item.slug}`} className={`${feedStyles.newsListItem} no-underline`}>
-            <div className={feedStyles.newsListThumbnail}>
+        <motion.div 
+            layoutId={`${layoutIdPrefix}-card-container-${item.legacyId}`}
+            onClick={handleClick}
+            className={`${feedStyles.newsListItem} no-underline`}
+        >
+            <motion.div layoutId={`${layoutIdPrefix}-card-image-${item.legacyId}`} className={feedStyles.newsListThumbnail}>
                 <Image 
                     src={item.imageUrl} 
                     alt={item.title} 
@@ -26,10 +40,10 @@ const LatestNewsListItem = memo(({ item }: { item: CardProps }) => {
                     blurDataURL={item.blurDataURL} 
                     style={{ objectFit: 'cover' }} 
                 />
-            </div>
+            </motion.div>
             <div className={feedStyles.newsListInfo}>
                 <p className={feedStyles.newsListCategory}>{primaryTag}</p>
-                <h5 className={feedStyles.newsListTitle}>{item.title}</h5>
+                <motion.h5 layoutId={`${layoutIdPrefix}-card-title-${item.legacyId}`} className={feedStyles.newsListTitle}>{item.title}</motion.h5>
                 {item.date && (
                     <div style={{ margin: '0.25rem 0 0', fontSize: '1.2rem', color: 'var(--text-secondary)', display: 'flex', alignItems: 'center', gap: '0.5rem' }}>
                         <Calendar03Icon style={{width: '14px', height: '14px', color: 'var(--accent)'}} />
@@ -37,7 +51,7 @@ const LatestNewsListItem = memo(({ item }: { item: CardProps }) => {
                     </div>
                 )}
             </div>
-        </Link>
+        </motion.div>
     );
 });
 LatestNewsListItem.displayName = "LatestNewsListItem";
@@ -48,7 +62,7 @@ export default function NewsfeedStream({ items }: { items: CardProps[] }) {
     const intervalRef = useRef<NodeJS.Timeout | null>(null);
 
     useEffect(() => {
-        if (!isHovered && items.length > 5) { // Only cycle if there are enough items
+        if (!isHovered && items.length > 5) {
             intervalRef.current = setInterval(() => {
                 setListItems(prevItems => {
                     const newItems = [...prevItems];
@@ -74,7 +88,7 @@ export default function NewsfeedStream({ items }: { items: CardProps[] }) {
             onMouseLeave={() => setIsHovered(false)}
         >
             <AnimatePresence initial={false}>
-                {listItems.slice(0, 5).map((item, index) => ( // Display a fixed number of items
+                {listItems.slice(0, 5).map((item, index) => (
                     <motion.div
                         key={item.id}
                         layout
diff --git a/components/news/NewsGrid.tsx b/components/news/NewsGrid.tsx
index 8ae17b8..795e4fc 100644
--- a/components/news/NewsGrid.tsx
+++ b/components/news/NewsGrid.tsx
@@ -6,57 +6,20 @@ import NewsGridCard from './NewsGridCard';
 import { CardProps } from '@/types';
 import React from 'react'; 
 
-const gridContainerVariants = {
-    visible: { transition: { staggerChildren: 0.05 } },
-};
-
-const kineticCardVariant = {
-    hidden: { 
-        opacity: 0, 
-        y: 60, 
-        rotateX: -20,
-        skewY: 5,
-        clipPath: "inset(100% 0% 0% 0%)"
-    },
-    visible: { 
-        opacity: 1, 
-        y: 0, 
-        rotateX: 0,
-        skewY: 0,
-        clipPath: "inset(0% 0% 0% 0%)",
-        transition: { 
-            duration: 0.8, 
-            ease: [0.22, 1, 0.36, 1] as const,
-            y: { type: 'spring', stiffness: 120, damping: 20 }
-        }
-    },
-    exit: { 
-        opacity: 0, 
-        scale: 0.8 
-    }
-};
-
-export default function NewsGrid({ news, isLoading }: { news: CardProps[], isLoading: boolean }) {
+export default function NewsGrid({ news }: { news: CardProps[] }) {
     return (
         <motion.div 
             layout 
-            className="content-grid" 
-            variants={gridContainerVariants} 
-            initial="hidden" 
-            animate="visible"
-            style={{ 
-                opacity: isLoading && news.length === 0 ? 0.5 : 1, 
-                transition: 'opacity 0.3s',
-                transformStyle: 'preserve-3d', 
-                perspective: '1200px'
-            }}
+            className="content-grid"
         >
             <AnimatePresence mode="popLayout">
                 {news.map((item, index) => (
                     <motion.div
-                        key={item.id}
+                        key={item.legacyId}
                         layout
-                        variants={kineticCardVariant}
+                        initial={{ opacity: 0 }}
+                        animate={{ opacity: 1 }}
+                        exit={{ opacity: 0, scale: 0.8 }}
                         transition={{ 
                             type: 'spring' as const, 
                             stiffness: 400, 
@@ -64,7 +27,11 @@ export default function NewsGrid({ news, isLoading }: { news: CardProps[], isLoa
                         }}
                         style={{ height: '100%', willChange: 'transform, opacity' }}
                     >
-                        <NewsGridCard item={item} isPriority={index < 3} />
+                        <NewsGridCard 
+                            item={item} 
+                            isPriority={index < 4}
+                            layoutIdPrefix="news-grid"
+                        />
                     </motion.div>
                 ))}
             </AnimatePresence>
diff --git a/components/news/NewsGridCard.tsx b/components/news/NewsGridCard.tsx
index 13dbb55..90df29d 100644
--- a/components/news/NewsGridCard.tsx
+++ b/components/news/NewsGridCard.tsx
@@ -2,7 +2,6 @@
 'use client';
 
 import React, { memo } from 'react';
-import Link from 'next/link';
 import Image from 'next/image';
 import { motion } from 'framer-motion';
 import { useRouter } from 'next/navigation';
@@ -17,9 +16,10 @@ import CreatorCredit from '../CreatorCredit';
 type NewsGridCardProps = {
     item: CardProps;
     isPriority?: boolean;
+    layoutIdPrefix: string;
 };
 
-const NewsGridCardComponent = ({ item, isPriority = false }: NewsGridCardProps) => {
+const NewsGridCardComponent = ({ item, isPriority = false, layoutIdPrefix }: NewsGridCardProps) => {
     const router = useRouter();
     const setPrefix = useLayoutIdStore((state) => state.setPrefix); 
     const { livingCardRef, livingCardAnimation } = useLivingCard();
@@ -27,8 +27,11 @@ const NewsGridCardComponent = ({ item, isPriority = false }: NewsGridCardProps)
     const linkPath = `/news/${item.slug}`;
     
     const handleClick = (e: React.MouseEvent) => {
+        if ((e.target as HTMLElement).closest('a, button, [role="button"]')) {
+            return;
+        }
         e.preventDefault();
-        setPrefix('news-grid');
+        setPrefix(layoutIdPrefix);
         router.push(linkPath, { scroll: false });
     };
 
@@ -45,22 +48,23 @@ const NewsGridCardComponent = ({ item, isPriority = false }: NewsGridCardProps)
             onMouseMove={livingCardAnimation.onMouseMove}
             onMouseEnter={() => { livingCardAnimation.onHoverStart(); handleMouseEnter(); }}
             onMouseLeave={livingCardAnimation.onHoverEnd}
+            onClick={handleClick}
             className={styles.cardContainer}
             style={livingCardAnimation.style}
         >
             <motion.div
-                layoutId={`news-grid-card-container-${item.id}`}
+                layoutId={`${layoutIdPrefix}-card-container-${item.legacyId}`}
                 className={styles.newsCard}
                 initial={{ opacity: 0, y: 50, scale: 0.95 }}
                 animate={{ opacity: 1, y: 0, scale: 1 }}
                 exit={{ opacity: 0, scale: 0.95 }}
                 transition={{ type: 'spring', stiffness: 200, damping: 25 }}
             >
-                <Link href={linkPath} onClick={handleClick} className={`${styles.cardLink} no-underline`}>
+                <div className={`${styles.cardLink} no-underline`}>
                     <div className={styles.imageContentWrapper}>
                         <motion.div 
                             className={styles.imageContainer} 
-                            layoutId={`news-grid-card-image-${item.id}`}
+                            layoutId={`${layoutIdPrefix}-card-image-${item.legacyId}`}
                         >
                             <Image 
                                 loader={sanityLoader}
@@ -79,7 +83,7 @@ const NewsGridCardComponent = ({ item, isPriority = false }: NewsGridCardProps)
                         <div className={styles.cardInfo}>
                             <motion.h3 
                                 className={styles.cardTitle}
-                                layoutId={`news-grid-card-title-${item.id}`}
+                                layoutId={`${layoutIdPrefix}-card-title-${item.legacyId}`}
                             >
                                 {item.title}
                             </motion.h3>
@@ -95,7 +99,7 @@ const NewsGridCardComponent = ({ item, isPriority = false }: NewsGridCardProps)
                             </div>
                         )}
                     </div>
-                </Link>
+                </div>
             </motion.div>
         </motion.div>
     );
diff --git a/components/news/NewsHero.tsx b/components/news/NewsHero.tsx
index 8be22f5..a1571a4 100644
--- a/components/news/NewsHero.tsx
+++ b/components/news/NewsHero.tsx
@@ -10,15 +10,13 @@ import styles from './NewsHero.module.css';
 import { Calendar03Icon } from '@/components/icons';
 import CreatorCredit from '@/components/CreatorCredit';
 import { translateTag } from '@/lib/translations';
+import { useLayoutIdStore } from '@/lib/layoutIdStore';
+import { useRouter } from 'next/navigation';
 
 const transition = { type: 'spring' as const, stiffness: 400, damping: 50 };
 
 const titleContainerVariants = {
-    animate: {
-        transition: {
-            staggerChildren: 0.08,
-        },
-    },
+    animate: { transition: { staggerChildren: 0.08 } },
 };
 
 const wordVariants = {
@@ -26,8 +24,16 @@ const wordVariants = {
     animate: { opacity: 1, y: 0, transition: { ...transition, duration: 0.8 } },
 };
 
-const AnimatedStory = memo(({ item, isActive }: { item: CardProps; isActive: boolean }) => {
+const AnimatedStory = memo(({ item, isActive, layoutIdPrefix }: { item: CardProps; isActive: boolean, layoutIdPrefix: string }) => {
     const primaryTag = item.tags && item.tags.length > 0 ? translateTag(item.tags[0].title) : 'أخبار';
+    const setPrefix = useLayoutIdStore((state) => state.setPrefix);
+    const router = useRouter();
+
+    const handleClick = (e: React.MouseEvent) => {
+        e.preventDefault();
+        setPrefix(layoutIdPrefix);
+        router.push(`/news/${item.slug}`, { scroll: false });
+    };
 
     return (
         <AnimatePresence>
@@ -39,13 +45,15 @@ const AnimatedStory = memo(({ item, isActive }: { item: CardProps; isActive: boo
                     animate={{ opacity: 1 }}
                     exit={{ opacity: 0 }}
                     transition={{ duration: 0.5 }}
+                    onClick={handleClick}
+                    style={{ cursor: 'pointer' }}
                 >
                     <div className={styles.textContent}>
                         <p className={styles.storyCategory}>{primaryTag}</p>
-                        <Link href={`/news/${item.slug}`} className={`${styles.storyLink} no-underline`}>
+                        <div className={`${styles.storyLink} no-underline`}>
                             <motion.h1 
                                 className={styles.storyTitle} 
-                                layoutId={`news-hero-title-${item.id}`}
+                                layoutId={`${layoutIdPrefix}-card-title-${item.legacyId}`}
                                 variants={titleContainerVariants}
                                 initial="initial"
                                 animate="animate"
@@ -56,7 +64,7 @@ const AnimatedStory = memo(({ item, isActive }: { item: CardProps; isActive: boo
                                     </motion.span>
                                 ))}
                             </motion.h1>
-                        </Link>
+                        </div>
                         <div className={styles.storyMeta}>
                             <CreatorCredit label="بواسطة" creators={item.authors} small disableLink />
                             <span className={styles.storyMetaDate}>
@@ -72,11 +80,12 @@ const AnimatedStory = memo(({ item, isActive }: { item: CardProps; isActive: boo
 AnimatedStory.displayName = "AnimatedStory";
 
 
-const HeroBackground = memo(({ imageUrl, alt }: { imageUrl: string; alt: string; }) => {
+const HeroBackground = memo(({ imageUrl, alt, layoutId }: { imageUrl: string; alt: string; layoutId: string }) => {
     return (
         <motion.div 
             key={imageUrl} 
             className={styles.heroBackground} 
+            layoutId={layoutId}
             initial={{ opacity: 0, scale: 1.1 }}
             animate={{ opacity: 1, scale: 1 }}
             exit={{ opacity: 0, scale: 1.1 }}
@@ -87,10 +96,7 @@ const HeroBackground = memo(({ imageUrl, alt }: { imageUrl: string; alt: string;
                 alt={alt}
                 fill
                 priority
-                style={{ 
-                    objectFit: 'cover', 
-                    filter: 'grayscale(10%) brightness(0.7)',
-                }}
+                style={{ objectFit: 'cover', filter: 'grayscale(10%) brightness(0.7)'}}
                 sizes="100vw"
             />
         </motion.div>
@@ -114,22 +120,24 @@ export default function NewsHero({ newsItems }: { newsItems: CardProps[] }) {
     if (newsItems.length === 0) return null;
 
     const activeItem = newsItems[activeIndex];
+    const layoutIdPrefix = "news-hero";
 
     return (
-        <div 
+        <motion.div 
+            layoutId={`${layoutIdPrefix}-card-container-${activeItem.legacyId}`}
             className={styles.heroContainer}
             onMouseEnter={() => setIsPaused(true)}
             onMouseLeave={() => setIsPaused(false)}
         >
             <AnimatePresence>
-                 <HeroBackground key={activeItem.id} imageUrl={activeItem.imageUrl} alt={activeItem.title} />
+                 <HeroBackground key={activeItem.id} imageUrl={activeItem.imageUrl} alt={activeItem.title} layoutId={`${layoutIdPrefix}-card-image-${activeItem.legacyId}`} />
             </AnimatePresence>
             
             <div className={styles.heroOverlay} />
 
             <div className={`container ${styles.heroContentWrapper}`}>
                 <AnimatePresence mode="wait">
-                    <AnimatedStory key={activeItem.id} item={activeItem} isActive={true} />
+                    <AnimatedStory key={activeItem.id} item={activeItem} isActive={true} layoutIdPrefix={layoutIdPrefix} />
                 </AnimatePresence>
             </div>
 
@@ -145,6 +153,6 @@ export default function NewsHero({ newsItems }: { newsItems: CardProps[] }) {
                     />
                 ))}
             </div>
-        </div>
+        </motion.div>
     );
 }
\ No newline at end of file
diff --git a/components/skeletons/CardSkeleton.module.css b/components/skeletons/CardSkeleton.module.css
new file mode 100644
index 0000000..22304a3
--- /dev/null
+++ b/components/skeletons/CardSkeleton.module.css
@@ -0,0 +1,68 @@
+/* components/skeletons/CardSkeleton.module.css */
+@keyframes pulse-skeleton {
+    0%, 100% {
+        background-color: var(--border-color);
+    }
+    50% {
+        background-color: color-mix(in srgb, var(--border-color) 60%, var(--bg-secondary));
+    }
+}
+
+.cardSkeleton {
+    background-color: var(--bg-secondary);
+    border-radius: 8px;
+    overflow: hidden;
+    height: 100%;
+    border: 1px solid var(--border-color);
+    display: flex;
+    flex-direction: column;
+}
+
+.imageSkeleton {
+    width: 100%;
+    aspect-ratio: 16 / 9;
+    animation: pulse-skeleton 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
+}
+
+.contentSkeleton {
+    padding: 2rem;
+    display: flex;
+    flex-direction: column;
+    flex-grow: 1;
+    gap: 1.2rem;
+}
+
+.line {
+    height: 1.6rem;
+    border-radius: 4px;
+    animation: pulse-skeleton 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
+}
+
+.line.title {
+    height: 2rem;
+    width: 80%;
+    margin-bottom: 0.5rem;
+}
+
+.line.meta {
+    width: 60%;
+}
+
+.line.metaShort {
+    width: 40%;
+}
+
+.tagArea {
+    margin-top: auto;
+    padding-top: 1rem;
+    border-top: 1px solid var(--border-color);
+    display: flex;
+    gap: 0.8rem;
+}
+
+.tag {
+    height: 2.4rem;
+    width: 70px;
+    border-radius: 999px;
+    animation: pulse-skeleton 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
+}
\ No newline at end of file
diff --git a/components/skeletons/CardSkeleton.tsx b/components/skeletons/CardSkeleton.tsx
new file mode 100644
index 0000000..3e62f0e
--- /dev/null
+++ b/components/skeletons/CardSkeleton.tsx
@@ -0,0 +1,19 @@
+// components/skeletons/CardSkeleton.tsx
+import styles from './CardSkeleton.module.css';
+
+export default function CardSkeleton() {
+    return (
+        <div className={styles.cardSkeleton}>
+            <div className={styles.imageSkeleton}></div>
+            <div className={styles.contentSkeleton}>
+                <div className={`${styles.line} ${styles.title}`}></div>
+                <div className={`${styles.line} ${styles.meta}`}></div>
+                <div className={`${styles.line} ${styles.metaShort}`}></div>
+                <div className={styles.tagArea}>
+                    <div className={styles.tag}></div>
+                    <div className={styles.tag}></div>
+                </div>
+            </div>
+        </div>
+    );
+}
\ No newline at end of file
diff --git a/components/skeletons/GridPageSkeleton.tsx b/components/skeletons/GridPageSkeleton.tsx
new file mode 100644
index 0000000..318f6a6
--- /dev/null
+++ b/components/skeletons/GridPageSkeleton.tsx
@@ -0,0 +1,12 @@
+// components/skeletons/GridPageSkeleton.tsx
+import CardSkeleton from "./CardSkeleton";
+
+export default function GridPageSkeleton({ count = 12 }: { count?: number }) {
+    return (
+        <div className="content-grid" style={{ paddingTop: '4rem', paddingBottom: '6rem' }}>
+            {Array.from({ length: count }).map((_, index) => (
+                <CardSkeleton key={index} />
+            ))}
+        </div>
+    );
+}
\ No newline at end of file
diff --git a/hooks/useEditorImageUpload.ts b/hooks/useEditorImageUpload.ts
deleted file mode 100644
index 002d1d5..0000000
--- a/hooks/useEditorImageUpload.ts
+++ /dev/null
@@ -1,60 +0,0 @@
-// hooks/useEditorImageUpload.ts
-'use client';
-
-import { useCallback } from 'react';
-import { useToast } from '@/lib/toastStore';
-import { optimizeImageForUpload } from '@/lib/image-optimizer';
-import { clientAssetUploader } from '@/lib/sanity.client';
-import { Editor } from '@tiptap/react';
-
-const formatFileSize = (bytes: number): string => {
-    if (bytes < 1024) return `${bytes} B`;
-    const kb = bytes / 1024;
-    if (kb < 1024) return `${kb.toFixed(1)} KB`;
-    const mb = kb / 1024;
-    return `${mb.toFixed(2)} MB`;
-};
-
-type UseEditorImageUploadProps = {
-    editor: Editor;
-    updateAttributes: (attributes: Record<string, any>) => void;
-};
-
-export function useEditorImageUpload({ editor, updateAttributes }: UseEditorImageUploadProps) {
-    const toast = useToast();
-
-    const handleUpload = useCallback(async (file: File, slot: 1 | 2 | 3 | 4 | 'left' | 'right') => {
-        try {
-            toast.info('جار تحسين الصورة للرفع...', 'left');
-            const quality = editor.storage.uploadQuality || '1080p';
-            const { file: optimizedFile, finalQuality } = await optimizeImageForUpload(file, quality);
-
-            toast.info(`جار رفع الصورة (${formatFileSize(optimizedFile.size)} @ ${Math.round(finalQuality * 100)}%)...`, 'left');
-
-            const asset = await clientAssetUploader.assets.upload('image', optimizedFile, {
-                filename: optimizedFile.name,
-                contentType: optimizedFile.type,
-            });
-
-            if (asset?._id && asset?.url) {
-                const isSide = slot === 'left' || slot === 'right';
-                const srcKey = isSide ? (slot === 'left' ? 'src1' : 'src2') : `src${slot}`;
-                const assetIdKey = isSide ? (slot === 'left' ? 'assetId1' : 'assetId2') : `assetId${slot}`;
-
-                updateAttributes({
-                    [srcKey]: asset.url,
-                    [assetIdKey]: asset._id,
-                });
-                toast.success('تم رفع الصورة بنجاح.', 'left');
-            } else {
-                throw new Error('فشل الرفع');
-            }
-        } catch (error: any) {
-            toast.error(error.message || 'فشل معالجة الصورة.', 'left');
-        }
-    }, [editor.storage.uploadQuality, toast, updateAttributes]);
-
-    return handleUpload;
-}
-
-
diff --git a/hooks/useVanguardCarousel.ts b/hooks/useVanguardCarousel.ts
index 67f5da5..d8af939 100644
--- a/hooks/useVanguardCarousel.ts
+++ b/hooks/useVanguardCarousel.ts
@@ -90,19 +90,17 @@ export function useVanguardCarousel(itemCount: number, isCurrentlyInView: boolea
         let transform = '';
 
         if (isMobile) {
-            // THE DEFINITIVE FIX: Animate only the transform property for mobile to match desktop's smoothness.
-            // All cards are positioned relative to the center (left: 50%) and then translated.
             style.left = '50%';
-            const offsetVw = 35;
-            const baseTranslateX = '-50%'; // To center the card itself
+            const offsetPx = 140; 
+            const baseTranslateX = '-50%';
 
             switch (slotIndex) {
                 case 0: // Far Left
-                    transform = `translateX(calc(${baseTranslateX} - ${offsetVw * 1.8}vw)) scale(0.75)`;
+                    transform = `translateX(calc(${baseTranslateX} - ${offsetPx * 1.6}px)) scale(0.75)`;
                     style.zIndex = 0;
                     break;
                 case 1: // Near Left
-                    transform = `translateX(calc(${baseTranslateX} - ${offsetVw}vw)) scale(0.8)`;
+                    transform = `translateX(calc(${baseTranslateX} - ${offsetPx * 0.9}px)) scale(0.8)`;
                     style.zIndex = 1;
                     break;
                 case 2: // Center
@@ -110,11 +108,11 @@ export function useVanguardCarousel(itemCount: number, isCurrentlyInView: boolea
                     style.zIndex = 2;
                     break;
                 case 3: // Near Right
-                    transform = `translateX(calc(${baseTranslateX} + ${offsetVw}vw)) scale(0.8)`;
+                    transform = `translateX(calc(${baseTranslateX} + ${offsetPx * 0.9}px)) scale(0.8)`;
                     style.zIndex = 1;
                     break;
                 case 4: // Far Right
-                    transform = `translateX(calc(${baseTranslateX} + ${offsetVw * 1.8}vw)) scale(0.75)`;
+                    transform = `translateX(calc(${baseTranslateX} + ${offsetPx * 1.6}px)) scale(0.75)`;
                     style.zIndex = 0;
                     break;
             }
@@ -156,6 +154,4 @@ export function useVanguardCarousel(itemCount: number, isCurrentlyInView: boolea
         getCardState,
         isMobile,
     };
-}
-
-
+}
\ No newline at end of file
diff --git a/lib/sanity.client.ts b/lib/sanity.client.ts
index f98871b..a3235b2 100644
--- a/lib/sanity.client.ts
+++ b/lib/sanity.client.ts
@@ -12,18 +12,4 @@ export const client = createClient({
     apiVersion,
     useCdn: false,
     token: process.env.SANITY_API_READ_TOKEN,
-})
-
-export const clientAssetUploader = createClient({
-    projectId,
-    dataset,
-    apiVersion,
-    useCdn: false,
-    // THE FIX: Use the NEXT_PUBLIC_ prefixed variable
-    token: process.env.NEXT_PUBLIC_SANITY_API_WRITE_TOKEN,
-})
-
-
-
-
-
+})
\ No newline at end of file
diff --git a/lib/sanity.queries.ts b/lib/sanity.queries.ts
index 1ccb57c..46be10a 100644
--- a/lib/sanity.queries.ts
+++ b/lib/sanity.queries.ts
@@ -4,7 +4,7 @@ import { groq } from 'next-sanity'
 
 // --- Base Fields & Projections (Optimized) ---
 const mainImageFields = groq`asset, "url": asset->url, "blurDataURL": asset->metadata.lqip, alt`
-const creatorFields = groq`_id, name, prismaUserId, image, bio, "username": *[_type=="user" && id==^.prismaUserId][0].username`
+const creatorFields = groq`_id, name, prismaUserId, image, bio`
 const gameFields = groq`_id, title, "slug": slug.current`
 const tagFields = groq`_id, title, "slug": slug.current`
 const publishedFilter = groq`defined(publishedAt) && publishedAt < now()`
@@ -185,7 +185,10 @@ export const searchQuery = groq`*[_type in ["review", "article", "news"] && ${pu
   "gameTitle": game->title, "tags": tags[]->{title}
 }`
 export const contentByIdsQuery = groq`*[_type in ["review", "article", "news"] && legacyId in $ids && ${publishedFilter}] { ${cardProjection} }`
-export const allReleasesQuery = groq`*[_type == "gameRelease" && defined(releaseDate)] | order(releaseDate asc) { _id, legacyId, title, "slug": slug.current, releaseDate, platforms, synopsis, "mainImage": mainImage{${mainImageFields}}, }`
+export const allReleasesQuery = groq`*[_type == "gameRelease" && defined(releaseDate)] | order(releaseDate asc) { 
+  _id, legacyId, title, "slug": slug.current, releaseDate, platforms, synopsis, "mainImage": mainImage{${mainImageFields}},
+  "game": game->{ "slug": slug.current }
+}`
 
 // --- Studio Editor Queries ---
 export const allGamesForStudioQuery = groq`*[_type == "game"] | order(title asc){_id, title, "slug": slug.current}`;
diff --git a/next-env.d.ts b/next-env.d.ts
index 9edff1c..c4b7818 100644
--- a/next-env.d.ts
+++ b/next-env.d.ts
@@ -1,6 +1,6 @@
 /// <reference types="next" />
 /// <reference types="next/image-types/global" />
-import "./.next/types/routes.d.ts";
+import "./.next/dev/types/routes.d.ts";
 
 // NOTE: This file should not be edited
 // see https://nextjs.org/docs/app/api-reference/config/typescript for more information.
diff --git a/sanity/schemaTypes/gameReleaseType.ts b/sanity/schemaTypes/gameReleaseType.ts
index 84365a1..6896244 100644
--- a/sanity/schemaTypes/gameReleaseType.ts
+++ b/sanity/schemaTypes/gameReleaseType.ts
@@ -7,15 +7,15 @@ type: 'document',
 fields: [
 defineField({name: 'title', title: 'Title', type: 'string', validation: (Rule) => Rule.required()}),
 defineField({name: 'slug', title: 'Slug', type: 'slug', options: {source: 'title', maxLength: 96}, validation: (Rule) => Rule.required()}),
+defineField({name: 'game', title: 'Game', type: 'reference', to: {type: 'game'}, validation: (Rule) => Rule.required()}),
 defineField({name: 'releaseDate', title: 'Release Date', type: 'date', validation: (Rule) => Rule.required()}),
 defineField({name: 'platforms', title: 'Platforms', type: 'array', of: [{type: 'string'}], options: {list: ['PC', 'PS5', 'Xbox', 'Switch']}}),
 defineField({name: 'mainImage', title: 'Main Image', type: 'image', options: {hotspot: true}, validation: (Rule) => Rule.required()}),
 defineField({name: 'synopsis', title: 'Synopsis', type: 'text', validation: (Rule) => Rule.required()}),
+defineField({name: 'designers', title: 'Designers (Optional)', type: 'array', of: [{type: 'reference', to: {type: 'designer'}}]}),
 defineField({name: 'legacyId', title: 'Legacy ID', type: 'number', readOnly: true}),
 ],
 preview: {
 select: {title: 'title', subtitle: 'releaseDate', media: 'mainImage'},
 },
-})
-
-
+})
\ No newline at end of file
